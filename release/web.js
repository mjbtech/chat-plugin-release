function e(e){return Object.keys(e).reduce(((t,r)=>{var i=e[r];return t[r]=Object.assign({},i),!o(i.value)||function(e){return"[object Function]"===Object.prototype.toString.call(e)}(i.value)||Array.isArray(i.value)||(t[r].value=Object.assign({},i.value)),Array.isArray(i.value)&&(t[r].value=i.value.slice(0)),t}),{})}function t(e){if(e)try{return JSON.parse(e)}catch(t){return e}}function r(e,t,r){if(null==r||!1===r)return e.removeAttribute(t);let o=JSON.stringify(r);e.__updating[t]=!0,"true"===o&&(o=""),e.setAttribute(t,o),Promise.resolve().then((()=>delete e.__updating[t]))}function o(e){return null!=e&&("object"==typeof e||"function"==typeof e)}let i;function n(o,n){const s=Object.keys(n);return class extends o{static get observedAttributes(){return s.map((e=>n[e].attribute))}constructor(){super(),this.__initialized=!1,this.__released=!1,this.__releaseCallbacks=[],this.__propertyChangedCallbacks=[],this.__updating={},this.props={}}connectedCallback(){if(!this.__initialized){this.__releaseCallbacks=[],this.__propertyChangedCallbacks=[],this.__updating={},this.props=function(o,i){const n=e(i);return Object.keys(i).forEach((e=>{const i=n[e],s=o.getAttribute(i.attribute),a=o[e];s&&(i.value=i.parse?t(s):s),null!=a&&(i.value=Array.isArray(a)?a.slice(0):a),i.reflect&&r(o,i.attribute,i.value),Object.defineProperty(o,e,{get:()=>i.value,set(t){var o=i.value;i.value=t,i.reflect&&r(this,i.attribute,i.value);for(let r=0,i=this.__propertyChangedCallbacks.length;r<i;r++)this.__propertyChangedCallbacks[r](e,t,o)},enumerable:!0,configurable:!0})})),n}(this,n);var o=function(e){return Object.keys(e).reduce(((t,r)=>(t[r]=e[r].value,t)),{})}(this.props),s=this.Component,a=i;try{(i=this).__initialized=!0,function(e){return"function"==typeof e&&0===e.toString().indexOf("class")}(s)?new s(o,{element:this}):s(o,{element:this})}finally{i=a}}}async disconnectedCallback(){if(await Promise.resolve(),!this.isConnected){this.__propertyChangedCallbacks.length=0;for(var e=null;e=this.__releaseCallbacks.pop();)e(this);delete this.__initialized,this.__released=!0}}attributeChangedCallback(e,r,o){!this.__initialized||this.__updating[e]||(e=this.lookupProp(e))in n&&(null==o&&!this[e]||(this[e]=n[e].parse?t(o):o))}lookupProp(e){if(n)return s.find((t=>e===t||e===n[t].attribute))}get renderRoot(){return this.shadowRoot||this.attachShadow({mode:"open"})}addReleaseCallback(e){this.__releaseCallbacks.push(e)}addPropertyChangedCallback(e){this.__propertyChangedCallbacks.push(e)}}}function s(e,t={},r={}){const{BaseElement:i=HTMLElement,extension:s}=r;return r=>{if(!e)throw new Error("tag is required to register a Component");let a=customElements.get(e);return a?a.prototype.Component=r:((a=n(i,function(e){return e?Object.keys(e).reduce(((t,r)=>{var i=e[r];return t[r]=o(i)&&"value"in i?i:{value:i},t[r].attribute||(t[r].attribute=function(e){return e.replace(/\.?([A-Z]+)/g,((e,t)=>"-"+t.toLowerCase())).replace("_","-").replace(/^-/,"")}(r)),t[r].parse="parse"in t[r]?t[r].parse:"string"!=typeof t[r].value,t}),{}):{}}(t))).prototype.Component=r,a.prototype.registeredTag=e,customElements.define(e,a,s)),a}}const a=Symbol("solid-proxy"),l=Symbol("solid-track"),c={equals:(e,t)=>e===t};let d=z;const u=1,h=2,p={owned:null,cleanups:null,context:null,owner:null};var f=null;let g=null,m=null,b=null,v=null,y=0;const[w,x]=C(!1);function k(e,t){const r=m,o=f,i=0===e.length,n=i?p:{owned:null,cleanups:null,context:null,owner:void 0===t?o:t},s=i?e:()=>e((()=>A((()=>U(n)))));f=n,m=null;try{return j(s,!0)}finally{m=r,f=o}}function C(e,t){const r={value:e,observers:null,observerSlots:null,comparator:(t=t?Object.assign({},c,t):c).equals||void 0};return[$.bind(r),e=>("function"==typeof e&&(e=e(r.value)),B(r,e))]}function R(e,t,r){O(M(e,t,!1,u))}function S(e,t,r){d=D,(e=M(e,t,!1,u)).user=!0,v?v.push(e):O(e)}function _(e,t,r){return r=r?Object.assign({},c,r):c,(e=M(e,t,!0,0)).observers=null,e.observerSlots=null,e.comparator=r.equals||void 0,O(e),$.bind(e)}function T(e){return j(e,!1)}function A(e){if(null===m)return e();var t=m;m=null;try{return e()}finally{m=t}}function P(e){S((()=>A(e)))}function L(e){return null!==f&&(null===f.cleanups?f.cleanups=[e]:f.cleanups.push(e)),e}function E(e){const t=m,r=f;return Promise.resolve().then((()=>{m=t,f=r,j(e,!1),m=f=null}))}function $(){var e;return this.sources&&this.state&&(this.state===u?O(this):(e=b,b=null,j((()=>N(this)),!1),b=e)),m&&(e=this.observers?this.observers.length:0,m.sources?(m.sources.push(this),m.sourceSlots.push(e)):(m.sources=[this],m.sourceSlots=[e]),this.observers?(this.observers.push(m),this.observerSlots.push(m.sources.length-1)):(this.observers=[m],this.observerSlots=[m.sources.length-1])),this.value}function B(e,t,r){var o=e.value;return e.comparator&&e.comparator(o,t)||(e.value=t,e.observers&&e.observers.length&&j((()=>{for(let o=0;o<e.observers.length;o+=1){var t=e.observers[o],r=g&&g.running;r&&g.disposed.has(t),(r?t.tState:t.state)||((t.pure?b:v).push(t),t.observers&&q(t)),r||(t.state=u)}if(1e6<b.length)throw b=[],new Error}),!1)),t}function O(e){var t,r,o;e.fn&&(U(e),t=f,r=m,o=y,function(e,t,r){let o;try{o=e.fn(t)}catch(t){return e.pure&&(e.state=u,e.owned&&e.owned.forEach(U),e.owned=null),e.updatedAt=r+1,F(t)}(!e.updatedAt||e.updatedAt<=r)&&(null!=e.updatedAt&&"observers"in e?B(e,o):e.value=o,e.updatedAt=r)}(m=f=e,e.value,o),m=r,f=t)}function M(e,t,r,o=u,i){return e={fn:e,state:o,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:f,context:null,pure:r},null!==f&&f!==p&&(f.owned?f.owned.push(e):f.owned=[e]),e}function I(e){if(0!==e.state){if(e.state===h)return N(e);if(e.suspense&&A(e.suspense.inFallback))return e.suspense.effects.push(e);const r=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<y);)e.state&&r.push(e);for(let o=r.length-1;0<=o;o--){var t;(e=r[o]).state===u?O(e):e.state===h&&(t=b,b=null,j((()=>N(e,r[0])),!1),b=t)}}}function j(e,t){if(b)return e();let r=!1;t||(b=[]),v?r=!0:v=[],y++;try{var o=e();return function(e){if(b&&(z(b),b=null),!e){const e=v;v=null,e.length&&j((()=>d(e)),!1)}}(r),o}catch(e){r||(v=null),b=null,F(e)}}function z(e){for(let t=0;t<e.length;t++)I(e[t])}function D(e){let t,r=0;for(t=0;t<e.length;t++){var o=e[t];o.user?e[r++]=o:I(o)}for(t=0;t<r;t++)I(e[t])}function N(e,t){for(let i=e.state=0;i<e.sources.length;i+=1){var r,o=e.sources[i];o.sources&&((r=o.state)===u?o!==t&&(!o.updatedAt||o.updatedAt<y)&&I(o):r===h&&N(o,t))}}function q(e){for(let r=0;r<e.observers.length;r+=1){var t=e.observers[r];t.state||(t.state=h,(t.pure?b:v).push(t),t.observers&&q(t))}}function U(e){let t;if(e.sources)for(;e.sources.length;){var r,o,i=e.sources.pop(),n=e.sourceSlots.pop(),s=i.observers;s&&s.length&&(r=s.pop(),o=i.observerSlots.pop(),n<s.length)&&(s[r.sourceSlots[o]=n]=r,i.observerSlots[n]=o)}if(e.owned){for(t=e.owned.length-1;0<=t;t--)U(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;0<=t;t--)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function F(e){throw e}const H=Symbol("fallback");function G(e){for(let t=0;t<e.length;t++)e[t]()}function W(e,t){return A((()=>e(t||{})))}function V(){return!0}const Y={get:(e,t,r)=>t===a?r:e.get(t),has:(e,t)=>t===a||e.has(t),set:V,deleteProperty:V,getOwnPropertyDescriptor:(e,t)=>({configurable:!0,enumerable:!0,get:()=>e.get(t),set:V,deleteProperty:V}),ownKeys:e=>e.keys()};function J(e){return(e="function"==typeof e?e():e)||{}}function K(...e){let t=!1;for(let o=0;o<e.length;o++){var r=e[o];t=t||!!r&&a in r,e[o]="function"==typeof r?(t=!0,_(r)):r}if(t)return new Proxy({get(t){for(let o=e.length-1;0<=o;o--){var r=J(e[o])[t];if(void 0!==r)return r}},has(t){for(let r=e.length-1;0<=r;r--)if(t in J(e[r]))return!0;return!1},keys(){var t=[];for(let r=0;r<e.length;r++)t.push(...Object.keys(J(e[r])));return[...new Set(t)]}},Y);var o={};for(let t=e.length-1;0<=t;t--)if(e[t])for(const r in Object.getOwnPropertyDescriptors(e[t]))r in o||Object.defineProperty(o,r,{enumerable:!0,get(){for(let o=e.length-1;0<=o;o--){var t=(e[o]||{})[r];if(void 0!==t)return t}}});return o}function X(e,...t){const r=new Set(t.flat());var o;if(a in e)return(o=t.map((t=>new Proxy({get:r=>t.includes(r)?e[r]:void 0,has:r=>t.includes(r)&&r in e,keys:()=>t.filter((t=>t in e))},Y)))).push(new Proxy({get:t=>r.has(t)?void 0:e[t],has:t=>!r.has(t)&&t in e,keys:()=>Object.keys(e).filter((e=>!r.has(e)))},Y)),o;const i=Object.getOwnPropertyDescriptors(e);return t.push(Object.keys(i).filter((e=>!r.has(e)))),t.map((t=>{var r={};for(let o=0;o<t.length;o++){const n=t[o];n in e&&Object.defineProperty(r,n,i[n]||{get:()=>e[n],set:()=>!0,enumerable:!0})}return r}))}function Q(e){var t="fallback"in e&&{fallback:()=>e.fallback};return _(function(e,t,r={}){let o=[],i=[],n=[],s=0,a=1<t.length?[]:null;return L((()=>G(n))),()=>{let c,d,u=e()||[];return u[l],A((()=>{let e,t,l,p,f,g,m,b,v,y=u.length;if(0===y)0!==s&&(G(n),n=[],o=[],i=[],s=0,a=a&&[]),r.fallback&&(o=[H],i[0]=k((e=>(n[0]=e,r.fallback()))),s=1);else if(0===s){for(i=new Array(y),d=0;d<y;d++)o[d]=u[d],i[d]=k(h);s=y}else{for(l=new Array(y),p=new Array(y),a&&(f=new Array(y)),g=0,m=Math.min(s,y);g<m&&o[g]===u[g];g++);for(m=s-1,b=y-1;m>=g&&b>=g&&o[m]===u[b];m--,b--)l[b]=i[m],p[b]=n[m],a&&(f[b]=a[m]);for(e=new Map,t=new Array(b+1),d=b;d>=g;d--)v=u[d],c=e.get(v),t[d]=void 0===c?-1:c,e.set(v,d);for(c=g;c<=m;c++)v=o[c],void 0!==(d=e.get(v))&&-1!==d?(l[d]=i[c],p[d]=n[c],a&&(f[d]=a[c]),d=t[d],e.set(v,d)):n[c]();for(d=g;d<y;d++)d in l?(i[d]=l[d],n[d]=p[d],a&&(a[d]=f[d],a[d](d))):i[d]=k(h);i=i.slice(0,s=y),o=u.slice(0)}return i}));function h(e){var r;return n[d]=e,a?([e,r]=C(d),a[d]=r,t(u[d],e)):t(u[d])}}}((()=>e.each),e.children,t||void 0))}function Z(e){const t=e.keyed,r=_((()=>e.when),void 0,{equals:(e,r)=>t?e===r:!e==!r});return _((()=>{const o=r();if(o){const i=e.children;return"function"==typeof i&&0<i.length?A((()=>i(t?o:()=>{if(A(r))return e.when;throw(e=>`Stale read from <${e}>.`)("Show")}))):i}return e.fallback}),void 0,void 0)}const ee=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline","allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"]),te=new Set(["innerHTML","textContent","innerText","children"]),re=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),oe=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});const ie=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),ne={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};const se="_$DX_DELEGATE";function ae(e,t,r){let o;const i=()=>{var t=document.createElement("template");return t.innerHTML=e,(r?t.content.firstChild:t.content).firstChild};return(t=t?()=>(o=o||i()).cloneNode(!0):()=>A((()=>document.importNode(o=o||i(),!0)))).cloneNode=t}function le(e,t=window.document){var r=t[se]||(t[se]=new Set);for(let i=0,n=e.length;i<n;i++){var o=e[i];r.has(o)||(r.add(o),t.addEventListener(o,ve))}}function ce(e,t,r){null==r?e.removeAttribute(t):e.setAttribute(t,r)}function de(e,t){null==t?e.removeAttribute("class"):e.className=t}function ue(e,t,r,o){if(o)Array.isArray(r)?(e["$$"+t]=r[0],e[`$$${t}Data`]=r[1]):e["$$"+t]=r;else if(Array.isArray(r)){const o=r[0];e.addEventListener(t,r[0]=t=>o.call(e,r[1],t))}else e.addEventListener(t,r)}function he(e,t,r){if(!t)return r?ce(e,"style"):t;var o=e.style;if("string"==typeof t)return o.cssText=t;let i,n;for(n in"string"==typeof r&&(o.cssText=r=void 0),t=t||{},r=r||{})null==t[n]&&o.removeProperty(n),delete r[n];for(n in t)(i=t[n])!==r[n]&&(o.setProperty(n,i),r[n]=i);return r}function pe(e,t={},r,o){const i={};return o||R((()=>i.children=ye(e,t.children,i.children))),R((()=>t.ref&&t.ref(e))),R((()=>function(e,t,r,o,i={},n=!1){t=t||{};for(const o in i)o in t||"children"!==o&&(i[o]=be(e,o,null,i[o],r,n));for(const a in t){var s;"children"===a?o||ye(e,t.children):(s=t[a],i[a]=be(e,a,s,i[a],r,n))}}(e,t,r,!0,i,!0))),i}function fe(e,t,r){return A((()=>e(t,r)))}function ge(e,t,r,o){if(void 0!==r&&(o=o||[]),"function"!=typeof t)return ye(e,t,o,r);R((o=>ye(e,t(),o,r)),o)}function me(e,t,r){var o=t.trim().split(/\s+/);for(let t=0,i=o.length;t<i;t++)e.classList.toggle(o[t],r)}function be(e,t,r,o,i,n){let s,a,l,c,d;var u;return"style"===t?he(e,r,o):"classList"===t?function(e,t,r={}){var o=Object.keys(t||{}),i=Object.keys(r);let n,s;for(n=0,s=i.length;n<s;n++){var a=i[n];a&&"undefined"!==a&&!t[a]&&(me(e,a,!1),delete r[a])}for(n=0,s=o.length;n<s;n++){var l=o[n],c=!!t[l];l&&"undefined"!==l&&r[l]!==c&&c&&(me(e,l,!0),r[l]=c)}return r}(e,r,o):r===o?o:("ref"===t?n||r(e):"on:"===t.slice(0,3)?(n=t.slice(3),o&&e.removeEventListener(n,o),r&&e.addEventListener(n,r)):"oncapture:"===t.slice(0,10)?(n=t.slice(10),o&&e.removeEventListener(n,o,!0),r&&e.addEventListener(n,r,!0)):"on"===t.slice(0,2)?(n=t.slice(2).toLowerCase(),!(u=ie.has(n))&&o&&(o=Array.isArray(o)?o[0]:o,e.removeEventListener(n,o)),(u||r)&&(ue(e,n,r,u),u)&&le([n])):"attr:"===t.slice(0,5)?ce(e,t.slice(5),r):(d="prop:"===t.slice(0,5))||(l=te.has(t))||!i&&((c=function(e,t){return"object"==typeof(e=oe[e])?e[t]?e.$:void 0:e}(t,e.tagName))||(a=ee.has(t)))||(s=e.nodeName.includes("-"))?(d&&(t=t.slice(5),a=!0),"class"===t||"className"===t?de(e,r):!s||a||l?e[c||t]=r:e[function(e){return e.toLowerCase().replace(/-([a-z])/g,((e,t)=>t.toUpperCase()))}(t)]=r):(o=i&&-1<t.indexOf(":")&&ne[t.split(":")[0]])?function(e,t,r,o){null==o?e.removeAttributeNS(t,r):e.setAttributeNS(t,r,o)}(e,o,t,r):ce(e,re[t]||t,r),r)}function ve(e){var t="$$"+e.type;let r=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==r&&Object.defineProperty(e,"target",{configurable:!0,value:r}),Object.defineProperty(e,"currentTarget",{configurable:!0,get:()=>r||document});r;){var o=r[t];if(o&&!r.disabled){var i=r[t+"Data"];if(void 0!==i?o.call(r,i,e):o.call(r,e),e.cancelBubble)return}r=r._$host||r.parentNode||r.host}}function ye(e,t,r,o,i){for(;"function"==typeof r;)r=r();if(t!==r){var n=typeof t,s=void 0!==o;if(e=s&&r[0]&&r[0].parentNode||e,"string"==n||"number"==n)if("number"==n&&(t=t.toString()),s){let i=r[0];i&&3===i.nodeType?i.data=t:i=document.createTextNode(t),r=ke(e,r,o,i)}else r=""!==r&&"string"==typeof r?e.firstChild.data=t:e.textContent=t;else if(null==t||"boolean"==n)r=ke(e,r,o);else{if("function"==n)return R((()=>{let i=t();for(;"function"==typeof i;)i=i();r=ye(e,i,r,o)})),()=>r;if(Array.isArray(t)){const a=[];if(n=r&&Array.isArray(r),we(a,t,r,i))return R((()=>r=ye(e,a,r,o,!0))),()=>r;if(0===a.length){if(r=ke(e,r,o),s)return r}else n?0===r.length?xe(e,a,o):function(e,t,r){let o=r.length,i=t.length,n=o,s=0,a=0,l=t[i-1].nextSibling,c=null;for(;s<i||a<n;)if(t[s]===r[a])s++,a++;else{for(;t[i-1]===r[n-1];)i--,n--;if(i===s)for(var d=n<o?a?r[a-1].nextSibling:r[n-a]:l;a<n;)e.insertBefore(r[a++],d);else if(n===a)for(;s<i;)c&&c.has(t[s])||t[s].remove(),s++;else if(t[s]===r[n-1]&&r[a]===t[i-1]){var u=t[--i].nextSibling;e.insertBefore(r[a++],t[s++].nextSibling),e.insertBefore(r[--n],u),t[i]=r[n]}else{if(!c){c=new Map;let e=a;for(;e<n;)c.set(r[e],e++)}var h=c.get(t[s]);if(null!=h)if(a<h&&h<n){let o,l=s,d=1;for(;++l<i&&l<n&&null!=(o=c.get(t[l]))&&o===h+d;)d++;if(d>h-a)for(var p=t[s];a<h;)e.insertBefore(r[a++],p);else e.replaceChild(r[a++],t[s++])}else s++;else t[s++].remove()}}}(e,r,a):(r&&ke(e),xe(e,a));r=a}else if(t instanceof Node){if(Array.isArray(r)){if(s)return r=ke(e,r,o,t);ke(e,r,null,t)}else null!=r&&""!==r&&e.firstChild?e.replaceChild(t,e.firstChild):e.appendChild(t);r=t}else console.warn("Unrecognized value. Skipped inserting",t)}}return r}function we(e,t,r,o){let i=!1;for(let s=0,a=t.length;s<a;s++){let a=t[s],l=r&&r[s];if(a instanceof Node)e.push(a);else if(null!=a&&!0!==a&&!1!==a)if(Array.isArray(a))i=we(e,a,l)||i;else if("function"==typeof a)if(o){for(;"function"==typeof a;)a=a();i=we(e,Array.isArray(a)?a:[a],Array.isArray(l)?l:[l])||i}else e.push(a),i=!0;else{var n=String(a);l&&3===l.nodeType?(l.data=n,e.push(l)):e.push(document.createTextNode(n))}}return i}function xe(e,t,r=null){for(let o=0,i=t.length;o<i;o++)e.insertBefore(t[o],r)}function ke(e,t,r,o){if(void 0===r)return e.textContent="";var i=o||document.createTextNode("");if(t.length){let o=!1;for(let a=t.length-1;0<=a;a--){var n,s=t[a];i!==s?(n=s.parentNode===e,o||a?n&&s.remove():n?e.replaceChild(i,s):e.insertBefore(i,r)):o=!0}}else e.insertBefore(i,r);return[i]}function Ce(e){return(t,r)=>{const o=r.element;return k((i=>{const n=function(e){var t=Object.keys(e),r={};for(let o=0;o<t.length;o++){const[i,n]=C(e[t[o]]);Object.defineProperty(r,t[o],{get:i,set(e){n((()=>e))}})}return r}(t);o.addPropertyChangedCallback(((e,t)=>n[e]=t)),o.addReleaseCallback((()=>{o.renderRoot.textContent="",i()}));var s=e(n,r);return ge(o.renderRoot,s)}),function(e){if(e.assignedSlot&&e.assignedSlot._$owner)return e.assignedSlot._$owner;let t=e.parentNode;for(;t&&!t._$owner&&(!t.assignedSlot||!t.assignedSlot._$owner);)t=t.parentNode;return(t&&t.assignedSlot?t.assignedSlot:e)._$owner}(o))}}function Re(e,t,r){return 2===arguments.length&&(r=t,t={}),s(e,t)(Ce(r))}const Se={chatflowid:"",tenantId:void 0,apiHost:void 0,poweredByVisibility:!0,chatflowConfig:void 0,theme:{loginPrompt:[{field_name:"Email",is_required:!0}],poweredByVisibility:!0}};var _e,Te='/*! tailwindcss v3.3.1 | MIT License | https://tailwindcss.com*/*,:after,:before{border:0 solid #e5e7eb;box-sizing:border-box}:after,:before{--tw-content:""}html{-webkit-text-size-adjust:100%;font-feature-settings:normal;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-variation-settings:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4}body{line-height:inherit;margin:0}hr{border-top-width:1px;color:inherit;height:0}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{border-collapse:collapse;border-color:inherit;text-indent:0}button,input,optgroup,select,textarea{color:inherit;font-family:inherit;font-size:100%;font-weight:inherit;line-height:inherit;margin:0;padding:0}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0}fieldset,legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:#9ca3af;opacity:1}input::placeholder,textarea::placeholder{color:#9ca3af;opacity:1}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{height:auto;max-width:100%}[hidden]{display:none}*,:after,:before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.pointer-events-none{pointer-events:none}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.inset-0{inset:0}.bottom-20{bottom:80px}.bottom-24{bottom:96px}.bottom-\\[110px\\]{bottom:110px}.left-0{left:0}.top-0{top:0}.z-10{z-index:10}.z-50{z-index:50}.z-\\[99999\\]{z-index:99999}.z-\\[999\\]{z-index:999}.mx-auto{margin-left:auto;margin-right:auto}.my-2{margin-bottom:8px;margin-top:8px}.my-3{margin-bottom:12px;margin-top:12px}.my-4{margin-bottom:16px;margin-top:16px}.-ml-1{margin-left:-4px}.mb-1{margin-bottom:4px}.mb-2{margin-bottom:8px}.mb-3{margin-bottom:12px}.mb-4{margin-bottom:16px}.mb-5{margin-bottom:20px}.ml-1{margin-left:4px}.ml-2{margin-left:8px}.mr-1{margin-right:4px}.mr-2{margin-right:8px}.mr-3{margin-right:12px}.mt-1{margin-top:4px}.mt-4{margin-top:16px}.mt-5{margin-top:20px}.block{display:block}.flex{display:flex}.inline-flex{display:inline-flex}.table{display:table}.hidden{display:none}.h-10{height:40px}.h-12{height:48px}.h-14{height:56px}.h-16{height:64px}.h-2{height:8px}.h-28{height:112px}.h-32{height:128px}.h-5{height:20px}.h-52{height:208px}.h-6{height:24px}.h-7{height:28px}.h-9{height:36px}.h-full{height:100%}.max-h-\\[704px\\]{max-height:704px}.min-h-full{min-height:100%}.w-10{width:40px}.w-12{width:48px}.w-16{width:64px}.w-2{width:8px}.w-3\\/4{width:75%}.w-5{width:20px}.w-52{width:208px}.w-6{width:24px}.w-7{width:28px}.w-9{width:36px}.w-\\[45\\%\\]{width:45%}.w-\\[90\\%\\]{width:90%}.w-full{width:100%}.min-w-\\[16rem\\]{min-width:16rem}.min-w-full{min-width:100%}.max-w-full{max-width:100%}.max-w-sm{max-width:384px}.flex-1{flex:1 1 0%}.flex-shrink-0{flex-shrink:0}.-rotate-180{--tw-rotate:-180deg}.-rotate-180,.rotate-0{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-0{--tw-rotate:0deg}.scale-0{--tw-scale-x:0;--tw-scale-y:0}.scale-0,.scale-100{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-100{--tw-scale-x:1;--tw-scale-y:1}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes fade-in{0%{opacity:0}to{opacity:1}}.animate-fade-in{animation:fade-in .3s ease-out}@keyframes spin{to{transform:rotate(1turn)}}.animate-spin{animation:spin 1s linear infinite}.cursor-not-allowed{cursor:not-allowed}.cursor-pointer{cursor:pointer}.resize{resize:both}.list-disc{list-style-type:disc}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-start{align-items:flex-start}.items-end{align-items:flex-end}.items-center{align-items:center}.justify-start{justify-content:flex-start}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.justify-evenly{justify-content:space-evenly}.gap-2{gap:8px}.gap-3{gap:12px}.gap-4{gap:16px}.space-x-3>:not([hidden])~:not([hidden]){--tw-space-x-reverse:0;margin-left:calc(12px*(1 - var(--tw-space-x-reverse)));margin-right:calc(12px*var(--tw-space-x-reverse))}.divide-y>:not([hidden])~:not([hidden]){--tw-divide-y-reverse:0;border-bottom-width:calc(1px*var(--tw-divide-y-reverse));border-top-width:calc(1px*(1 - var(--tw-divide-y-reverse)))}.overflow-auto{overflow:auto}.overflow-hidden{overflow:hidden}.overflow-x-auto{overflow-x:auto}.overflow-y-auto{overflow-y:auto}.overflow-y-scroll{overflow-y:scroll}.scroll-smooth{scroll-behavior:smooth}.text-ellipsis{text-overflow:ellipsis}.whitespace-pre-wrap{white-space:pre-wrap}.rounded{border-radius:4px}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:8px}.rounded-md{border-radius:6px}.border{border-width:1px}.border-t{border-top-width:1px}.border-gray-300{--tw-border-opacity:1;border-color:rgb(209 213 219/var(--tw-border-opacity))}.bg-\\[rgba\\(0\\2c 0\\2c 0\\2c 0\\.4\\)\\]{background-color:rgba(0,0,0,.4)}.bg-black{--tw-bg-opacity:1;background-color:rgb(0 0 0/var(--tw-bg-opacity))}.bg-gray-200{--tw-bg-opacity:1;background-color:rgb(229 231 235/var(--tw-bg-opacity))}.bg-red-500{--tw-bg-opacity:1;background-color:rgb(239 68 68/var(--tw-bg-opacity))}.bg-slate-100{--tw-bg-opacity:1;background-color:rgb(241 245 249/var(--tw-bg-opacity))}.bg-transparent{background-color:transparent}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity))}.bg-opacity-50{--tw-bg-opacity:0.5}.bg-cover{background-size:cover}.bg-center{background-position:50%}.fill-transparent{fill:transparent}.stroke-2{stroke-width:2}.object-cover{-o-object-fit:cover;object-fit:cover}.p-1{padding:4px}.p-2{padding:8px}.p-3{padding:12px}.p-4{padding:16px}.p-6{padding:24px}.px-2{padding-left:8px;padding-right:8px}.px-3{padding-left:12px;padding-right:12px}.px-4{padding-left:16px;padding-right:16px}.px-6{padding-left:24px;padding-right:24px}.py-1{padding-bottom:4px;padding-top:4px}.py-2{padding-bottom:8px;padding-top:8px}.py-3{padding-bottom:12px;padding-top:12px}.py-4{padding-bottom:16px;padding-top:16px}.pr-3{padding-right:12px}.pr-8{padding-right:32px}.pt-10{padding-top:40px}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.align-baseline{vertical-align:baseline}.text-3xl{font-size:30px;line-height:36px}.text-4xl{font-size:36px;line-height:40px}.text-\\[13px\\]{font-size:13px}.text-base{font-size:16px;line-height:24px}.text-sm{font-size:14px;line-height:20px}.text-xl{font-size:20px;line-height:28px}.text-xs{font-size:12px;line-height:16px}.font-bold{font-weight:700}.font-medium{font-weight:500}.font-semibold{font-weight:600}.uppercase{text-transform:uppercase}.leading-6{line-height:24px}.text-inherit{color:inherit}.text-white{--tw-text-opacity:1;color:rgb(255 255 255/var(--tw-text-opacity))}.opacity-0{opacity:0}.opacity-100{opacity:1}.opacity-25{opacity:.25}.opacity-75{opacity:.75}.shadow{--tw-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px -1px rgba(0,0,0,.1);--tw-shadow-colored:0 1px 3px 0 var(--tw-shadow-color),0 1px 2px -1px var(--tw-shadow-color)}.shadow,.shadow-lg{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.shadow-lg{--tw-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -4px rgba(0,0,0,.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color),0 4px 6px -4px var(--tw-shadow-color)}.shadow-md{--tw-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -2px rgba(0,0,0,.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color),0 2px 4px -2px var(--tw-shadow-color)}.shadow-md,.shadow-xl{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.shadow-xl{--tw-shadow:0 20px 25px -5px rgba(0,0,0,.1),0 8px 10px -6px rgba(0,0,0,.1);--tw-shadow-colored:0 20px 25px -5px var(--tw-shadow-color),0 8px 10px -6px var(--tw-shadow-color)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.transition{transition-duration:.15s;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1)}.transition-all{transition-duration:.15s;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1)}.transition-colors{transition-duration:.15s;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1)}.transition-opacity{transition-duration:.15s;transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1)}.transition-transform{transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1)}.duration-150,.transition-transform{transition-duration:.15s}.duration-200{transition-duration:.2s}.duration-300{transition-duration:.3s}.ease-in-out{transition-timing-function:cubic-bezier(.4,0,.2,1)}.ease-out{transition-timing-function:cubic-bezier(0,0,.2,1)}:host{--chatbot-container-bg-image:none;--chatbot-container-bg-color:transparent;--chatbot-container-font-family:"Open Sans";--chatbot-button-bg-color:#0042da;--chatbot-button-color:#fff;--chatbot-host-bubble-bg-color:#f7f8ff;--chatbot-host-bubble-color:#303235;--chatbot-guest-bubble-bg-color:#3b81f6;--chatbot-guest-bubble-color:#fff;--chatbot-input-bg-color:#fff;--chatbot-input-color:#303235;--chatbot-input-placeholder-color:#9095a0;--chatbot-header-bg-color:#fff;--chatbot-header-color:#303235;--chatbot-border-radius:6px;--PhoneInputCountryFlag-borderColor:transparent;--PhoneInput-color--focus:transparent}a{color:#16bed7;font-weight:500}a:hover{text-decoration:underline}pre{word-wrap:break-word;font-size:13px;margin:5px;overflow:auto;padding:5px;white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-pre-wrap;white-space:-o-pre-wrap;width:auto}.string{color:green}.number{color:#ff8c00}.boolean{color:blue}.null{color:#f0f}.key{color:#002b36}.scrollable-container::-webkit-scrollbar{display:none}.scrollable-container{-ms-overflow-style:none;scrollbar-width:none}.text-fade-in{transition:opacity .4s ease-in .2s}.bubble-typing{transition:width .4s ease-out,height .4s ease-out}.bubble1,.bubble2,.bubble3{background-color:var(--chatbot-host-bubble-color);opacity:.5}.bubble1,.bubble2{animation:chatBubbles 1s ease-in-out infinite}.bubble2{animation-delay:.3s}.bubble3{animation:chatBubbles 1s ease-in-out infinite;animation-delay:.5s}@keyframes chatBubbles{0%{transform:translateY(0)}50%{transform:translateY(-5px)}to{transform:translateY(0)}}button,input,textarea{font-weight:300}.slate-a{text-decoration:underline}.slate-html-container>div{min-height:24px}.slate-bold{font-weight:700}.slate-italic{font-style:oblique}.slate-underline{text-decoration:underline}.text-input::-moz-placeholder{color:#9095a0!important;opacity:1!important}.text-input::placeholder{color:#9095a0!important;opacity:1!important}.chatbot-container{background-color:var(--chatbot-container-bg-color);background-image:var(--chatbot-container-bg-image);font-family:Open Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol}.chatbot-button{background-color:#0042da;border:1px solid #0042da;border-radius:var(--chatbot-border-radius);color:var(--chatbot-button-color)}.chatbot-button.selectable{border:1px solid #0042da}.chatbot-button.selectable,.chatbot-host-bubble{background-color:#f7f8ff;color:var(--chatbot-host-bubble-color)}.chatbot-host-bubble>.bubble-typing{background-color:#f7f8ff;border:var(--chatbot-host-bubble-border);border-radius:6px}.chatbot-host-bubble iframe,.chatbot-host-bubble img,.chatbot-host-bubble video{border-radius:var(--chatbot-border-radius)}.chatbot-guest-bubble{background-color:#3b81f6;border-radius:6px;color:var(--chatbot-guest-bubble-color)}.chatbot-input{background-color:#fff;border-radius:var(--chatbot-border-radius);box-shadow:0 2px 6px -1px rgba(0,0,0,.1);color:#303235}.chatbot-input-error-message{color:#303235}.chatbot-button>.send-icon{fill:var(--chatbot-button-color)}.chatbot-chat-view{max-width:800px}.ping span{background-color:#0042da}.rating-icon-container svg{stroke:#0042da;fill:#f7f8ff;height:42px;transition:fill .1s ease-out;width:42px}.rating-icon-container.selected svg{fill:#0042da}.rating-icon-container:hover svg{filter:brightness(.9)}.rating-icon-container:active svg{filter:brightness(.75)}.upload-progress-bar{background-color:#0042da;border-radius:var(--chatbot-border-radius)}.total-files-indicator{background-color:#0042da;color:var(--chatbot-button-color);font-size:10px}.chatbot-upload-input{transition:border-color .1s ease-out}.chatbot-upload-input.dragging-over{border-color:#0042da}.secondary-button{background-color:#f7f8ff;border-radius:var(--chatbot-border-radius);color:var(--chatbot-host-bubble-color)}.chatbot-country-select{color:#303235}.chatbot-country-select,.chatbot-date-input{background-color:#fff;border-radius:var(--chatbot-border-radius)}.chatbot-date-input{color:#303235;color-scheme:light}.chatbot-popup-blocked-toast{border-radius:var(--chatbot-border-radius)}.messagelist{border-radius:.5rem;height:100%;overflow-y:scroll;width:100%}.messagelistloading{display:flex;justify-content:center;margin-top:1rem;width:100%}.usermessage{padding:1rem 1.5rem}.usermessagewaiting-light{background:linear-gradient(270deg,#ede7f6,#e3f2fd,#ede7f6);background-position:-100% 0;background-size:200% 200%}.usermessagewaiting-dark,.usermessagewaiting-light{animation:loading-gradient 2s ease-in-out infinite;animation-direction:alternate;animation-name:loading-gradient;padding:1rem 1.5rem}.usermessagewaiting-dark{background:linear-gradient(270deg,#2e2352,#1d3d60,#2e2352);background-position:-100% 0;background-size:200% 200%;color:#ececf1}@keyframes loading-gradient{0%{background-position:-100% 0}to{background-position:100% 0}}.apimessage{animation:fadein .5s;padding:1rem 1.5rem}@keyframes fadein{0%{opacity:0}to{opacity:1}}.apimessage,.usermessage,.usermessagewaiting{display:flex}.markdownanswer{line-height:1.75}.markdownanswer a:hover{opacity:.8}.markdownanswer a{color:#16bed7;font-weight:500}.markdownanswer code{color:#15cb19;font-weight:500;white-space:pre-wrap!important}.markdownanswer ol,.markdownanswer ul{margin:1rem}.boticon,.usericon{border-radius:1rem;margin-right:1rem}.markdownanswer h1,.markdownanswer h2,.markdownanswer h3{font-size:inherit}.center{flex-direction:column;padding:10px;position:relative}.center,.cloud{align-items:center;display:flex;justify-content:center}.cloud{border-radius:.5rem;height:calc(100% - 50px);width:400px}input{background-color:transparent;border:none;font-family:Poppins,sans-serif;padding:10px}.pulse{animation:pulse-animation 1.5s infinite}@keyframes pulse-animation{0%{box-shadow:0 0 0 0 rgba(59,129,246,.2)}to{box-shadow:0 0 0 60px rgba(59,129,246,0)}}.hover\\:scale-110:hover{--tw-scale-x:1.1;--tw-scale-y:1.1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\\:bg-blue-200:hover{--tw-bg-opacity:1;background-color:rgb(191 219 254/var(--tw-bg-opacity))}.hover\\:bg-gray-100:hover{--tw-bg-opacity:1;background-color:rgb(243 244 246/var(--tw-bg-opacity))}.hover\\:bg-red-600:hover{--tw-bg-opacity:1;background-color:rgb(220 38 38/var(--tw-bg-opacity))}.hover\\:bg-opacity-25:hover{--tw-bg-opacity:0.25}.hover\\:opacity-25:hover{opacity:.25}.hover\\:brightness-90:hover{--tw-brightness:brightness(.9);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.focus\\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.active\\:scale-95:active{--tw-scale-x:.95;--tw-scale-y:.95;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.active\\:bg-red-700:active{--tw-bg-opacity:1;background-color:rgb(185 28 28/var(--tw-bg-opacity))}.active\\:brightness-75:active{--tw-brightness:brightness(.75);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.disabled\\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\\:opacity-50:disabled{opacity:.5}.disabled\\:brightness-100:disabled{--tw-brightness:brightness(1);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}@media (min-width:640px){.sm\\:right-5{right:20px}.sm\\:my-8{margin-bottom:32px;margin-top:32px}.sm\\:block{display:block}.sm\\:w-\\[400px\\]{width:400px}.sm\\:w-full{width:100%}.sm\\:max-w-lg{max-width:512px}.sm\\:p-0{padding:0}}@media (max-width:600px){.xs\\:w-full{width:100%}}';const Ae=e=>null==e,Pe=e=>null!=e,Le=async e=>{try{var t="string"==typeof e?e:e.url,r=await fetch(t,{method:"string"==typeof e?"GET":e.method,headers:"string"!=typeof e&&Pe(e.body)?{"Content-Type":"application/json","x-tenant-code":"string"!=typeof e?e?.tenantId??"":""}:{"x-tenant-code":"string"!=typeof e?e?.tenantId??"":""},body:"string"!=typeof e&&Pe(e.body)?JSON.stringify(e.body):void 0}),o=await r.json();if(r.ok)return{data:o};throw"error"in o?o.error:o}catch(e){return console.error(e),{error:e}}},Ee=ae('<svg viewBox="0 0 24 24"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z">'),$e=ae('<img alt="Bubble button icon">'),Be=ae('<button part="button" id="bubble-button"><svg viewBox="0 0 24 24"><path fill-rule="evenodd" clip-rule="evenodd" d="M18.601 8.39897C18.269 8.06702 17.7309 8.06702 17.3989 8.39897L12 13.7979L6.60099 8.39897C6.26904 8.06702 5.73086 8.06702 5.39891 8.39897C5.06696 8.73091 5.06696 9.2691 5.39891 9.60105L11.3989 15.601C11.7309 15.933 12.269 15.933 12.601 15.601L18.601 9.60105C18.9329 9.2691 18.9329 8.73091 18.601 8.39897Z">'),Oe=e=>{{const t=Be(),r=t.firstChild;return t.$$click=()=>e.toggleBot(),t.style.setProperty("z-index","42424242"),ge(t,W(Z,{get when(){return Ae(e.customIconSrc)},keyed:!0,get children(){const t=Ee();return R((r=>{var o=e.iconColor??"white",i="stroke-2 fill-transparent absolute duration-200 transition "+(e.isBotOpened?"scale-0 opacity-0":"scale-100 opacity-100")+("large"===e.size?" w-9":" w-7");return o!==r._v$&&(null!=(r._v$=o)?t.style.setProperty("stroke",o):t.style.removeProperty("stroke")),i!==r._v$2&&ce(t,"class",r._v$2=i),r}),{_v$:void 0,_v$2:void 0}),t}}),r),ge(t,W(Z,{get when(){return e.customIconSrc},get children(){const t=$e();return R((r=>{var o=e.customIconSrc,i="rounded-full object-cover"+(e.isBotOpened?"scale-0 opacity-0":"scale-100 opacity-100")+("large"===e.size?" w-9 h-9":" w-7 h-7");return o!==r._v$3&&ce(t,"src",r._v$3=o),i!==r._v$4&&de(t,r._v$4=i),r}),{_v$3:void 0,_v$4:void 0}),t}}),r),R((o=>{var i="fixed shadow-md rounded-full hover:scale-110 active:scale-95 transition-transform duration-200 flex justify-center items-center animate-fade-in"+("large"===e.size?" w-16 h-16":" w-12 h-12"),n=e.backgroundColor??"#3B81F6",s=e.right?e.right.toString()+"px":"20px",a=e.bottom?e.bottom.toString()+"px":"20px",l=e.iconColor??"white",c="absolute duration-200 transition "+(e.isBotOpened?"scale-100 rotate-0 opacity-100":"scale-0 -rotate-180 opacity-0")+("large"===e.size?" w-9":" w-7");return i!==o._v$5&&de(t,o._v$5=i),n!==o._v$6&&(null!=(o._v$6=n)?t.style.setProperty("background-color",n):t.style.removeProperty("background-color")),s!==o._v$7&&(null!=(o._v$7=s)?t.style.setProperty("right",s):t.style.removeProperty("right")),a!==o._v$8&&(null!=(o._v$8=a)?t.style.setProperty("bottom",a):t.style.removeProperty("bottom")),l!==o._v$9&&(null!=(o._v$9=l)?r.style.setProperty("fill",l):r.style.removeProperty("fill")),c!==o._v$10&&ce(r,"class",o._v$10=c),o}),{_v$5:void 0,_v$6:void 0,_v$7:void 0,_v$8:void 0,_v$9:void 0,_v$10:void 0}),t}},Me=(le(["click"]),ae("<style>")),Ie=ae('<div class="relative z-10" aria-labelledby="modal-title" role="dialog" aria-modal="true"><style></style><div class="fixed inset-0 bg-black bg-opacity-50 transition-opacity animate-fade-in"></div><div class="fixed inset-0 z-10 overflow-y-auto"><div class="flex min-h-full items-center justify-center p-4 text-center sm:p-0"><div class="relative transform overflow-hidden rounded-lg text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg">'),je=ae("<div><pre>");const ze=e=>{let t;const[r]=X(e,["onOpen","onClose","isOpen","value"]),[o,i]=(P((()=>{t&&(t.innerHTML=function(e){return(e=(e="string"!=typeof e?JSON.stringify(e,void 0,2):e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,(function(e){let t="number";return/^"/.test(e)?t=/:$/.test(e)?"key":"string":/true|false/.test(e)?t="boolean":/null/.test(e)&&(t="null"),'<span class="'+t+'">'+e+"</span>"}))}(JSON.stringify(e?.value,void 0,2)))})),C(r.isOpen??!1)),n=(S((()=>{Ae(e.isOpen)||e.isOpen===o()||a()})),e=>{e.stopPropagation()}),s=()=>{i(!1),r.onClose?.(),document.body.style.overflow="auto"},a=()=>{o()?s():(i(!0),r.onOpen?.(),document.body.style.overflow="hidden")};return W(Z,{get when(){return o()},get children(){return[(ge(i=Me(),Te),i),(i=Ie(),r=i.firstChild,o=r.nextSibling.nextSibling.firstChild.firstChild,i.style.setProperty("z-index","1100"),i.addEventListener("click",s),ge(r,Te),o.style.setProperty("background-color","transparent"),o.style.setProperty("margin-left","20px"),o.style.setProperty("margin-right","20px"),o.addEventListener("click",n),o.addEventListener("pointerdown",n),ge(o,(()=>{const r=_((()=>!!e.value));return()=>{return r()&&(o=(e=je()).firstChild,e.style.setProperty("background","white"),e.style.setProperty("margin","auto"),e.style.setProperty("padding","7px"),"function"==typeof(i=t)?fe(i,o):t=o,e);var e,o,i}})()),i)];var r,o,i}})},De=({apiHost:e="http://localhost:3000",tenantId:t,chatflowid:r,topic_id:o,session_id:i,body:n,userSessionId:s})=>Le({method:"POST",url:e+`/api/v1/chatflow/${r}/predict/${o}/session/${i}?userSessionId=`+s,body:n,tenantId:t}),Ne=async({apiHost:e="http://localhost:3000",tenantId:t,body:r})=>(async e=>{try{var t=e.url,r=await fetch(t,{method:e.method,headers:{"x-tenant-code":"string"!=typeof e?e?.tenantId??"":""},body:e.body??void 0}),o=await r.json();if(r.ok)return{data:o};throw"error"in o?o.error:o}catch(e){return console.error(e),{error:e}}})({method:"POST",url:e+"/api/v1/common/speech-recognize",body:r,tenantId:t}),qe=Object.create(null),Ue=(qe.open="0",qe.close="1",qe.ping="2",qe.pong="3",qe.message="4",qe.upgrade="5",qe.noop="6",Object.create(null)),Fe=(Object.keys(qe).forEach((e=>{Ue[qe[e]]=e})),{type:"error",data:"parser error"}),He="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),Ge="function"==typeof ArrayBuffer,We=({type:e,data:t},r,o)=>He&&t instanceof Blob?r?o(t):Ve(t,o):Ge&&(t instanceof ArrayBuffer||(e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer)(t))?r?o(t):Ve(new Blob([t]),o):o(qe[e]+(t||"")),Ve=(e,t)=>{const r=new FileReader;return r.onload=function(){var e=r.result.split(",")[1];t("b"+(e||""))},r.readAsDataURL(e)},Ye="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Je="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let e=0;e<64;e++)Je[Ye.charCodeAt(e)]=e;const Ke="function"==typeof ArrayBuffer,Xe=(e,t)=>{var r;return"string"!=typeof e?{type:"message",data:Ze(e,t)}:"b"===(r=e.charAt(0))?{type:"message",data:Qe(e.substring(1),t)}:Ue[r]?1<e.length?{type:Ue[r],data:e.substring(1)}:{type:Ue[r]}:Fe},Qe=(e,t)=>{var r;return Ke?(r=(e=>{let t,r,o,i,n,s=.75*e.length,a=e.length,l=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2])&&s--;var c=new ArrayBuffer(s),d=new Uint8Array(c);for(t=0;t<a;t+=4)r=Je[e.charCodeAt(t)],o=Je[e.charCodeAt(t+1)],i=Je[e.charCodeAt(t+2)],n=Je[e.charCodeAt(t+3)],d[l++]=r<<2|o>>4,d[l++]=(15&o)<<4|i>>2,d[l++]=(3&i)<<6|63&n;return c})(e),Ze(r,t)):{base64:!0,data:e}},Ze=(e,t)=>"blob"===t&&e instanceof ArrayBuffer?new Blob([e]):e,et=String.fromCharCode(30);function tt(e){if(e)return function(e){for(var t in tt.prototype)e[t]=tt.prototype[t];return e}(e)}tt.prototype.on=tt.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},tt.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this},tt.prototype.off=tt.prototype.removeListener=tt.prototype.removeAllListeners=tt.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)this._callbacks={};else{var r=this._callbacks["$"+e];if(r)if(1==arguments.length)delete this._callbacks["$"+e];else{for(var o,i=0;i<r.length;i++)if((o=r[i])===t||o.fn===t){r.splice(i,1);break}0===r.length&&delete this._callbacks["$"+e]}}return this},tt.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],o=1;o<arguments.length;o++)t[o-1]=arguments[o];if(r){o=0;for(var i=(r=r.slice(0)).length;o<i;++o)r[o].apply(this,t)}return this},tt.prototype.emitReserved=tt.prototype.emit,tt.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},tt.prototype.hasListeners=function(e){return!!this.listeners(e).length};const rt="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function ot(e,...t){return t.reduce(((t,r)=>(e.hasOwnProperty(r)&&(t[r]=e[r]),t)),{})}const it=rt.setTimeout,nt=rt.clearTimeout;function st(e,t){t.useNativeTimers?(e.setTimeoutFn=it.bind(rt),e.clearTimeoutFn=nt.bind(rt)):(e.setTimeoutFn=rt.setTimeout.bind(rt),e.clearTimeoutFn=rt.clearTimeout.bind(rt))}function at(e){return"string"==typeof e?function(e){let t,r=0;for(let o=0,i=e.length;o<i;o++)(t=e.charCodeAt(o))<128?r+=1:t<2048?r+=2:t<55296||57344<=t?r+=3:(o++,r+=4);return r}(e):Math.ceil(1.33*(e.byteLength||e.size))}class lt extends Error{constructor(e,t,r){super(e),this.description=t,this.context=r,this.type="TransportError"}}class ct extends tt{constructor(e){super(),this.writable=!1,st(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,t,r){return super.emitReserved("error",new lt(e,t,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){e=Xe(e,this.socket.binaryType),this.onPacket(e)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}}const dt="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),ut=64,ht={};let pt,ft=0,gt=0;function mt(e){let t="";for(;t=dt[e%ut]+t,0<(e=Math.floor(e/ut)););return t}function bt(){var e=mt(+new Date);return e!==pt?(ft=0,pt=e):e+"."+mt(ft++)}for(;gt<ut;gt++)ht[dt[gt]]=gt;function vt(e){let t="";for(var r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}let yt=!1;try{yt="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(Wt){}const wt=yt;function xt(e){e=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!e||wt))return new XMLHttpRequest}catch(e){}if(!e)try{return new(rt[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}function kt(){}const Ct=null!=new xt({xdomain:!1}).responseType;class Rt extends tt{constructor(e,t){super(),st(this,t),this.opts=t,this.method=t.method||"GET",this.uri=e,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.create()}create(){var e=ot(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;const t=this.xhr=new xt(e);try{t.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders)for(var r in t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0),this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(r)&&t.setRequestHeader(r,this.opts.extraHeaders[r])}catch(e){}if("POST"===this.method)try{t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{t.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in t&&(t.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(t.timeout=this.opts.requestTimeout),t.onreadystatechange=()=>{4===t.readyState&&(200===t.status||1223===t.status?this.onLoad():this.setTimeoutFn((()=>{this.onError("number"==typeof t.status?t.status:0)}),0))},t.send(this.data)}catch(e){return void this.setTimeoutFn((()=>{this.onError(e)}),0)}"undefined"!=typeof document&&(this.index=Rt.requestsCount++,Rt.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=kt,e)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete Rt.requests[this.index],this.xhr=null}}onLoad(){var e=this.xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}if(Rt.requestsCount=0,Rt.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",St);else if("function"==typeof addEventListener){addEventListener("onpagehide"in rt?"pagehide":"unload",St,!1)}function St(){for(var e in Rt.requests)Rt.requests.hasOwnProperty(e)&&Rt.requests[e].abort()}const _t="function"==typeof Promise&&"function"==typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),Tt=rt.WebSocket||rt.MozWebSocket,At="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();const Pt={websocket:class extends ct{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(this.check()){var e=this.uri(),t=this.opts.protocols,r=At?{}:ot(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=At?new Tt(e,t,r):t?new Tt(e,t):new Tt(e)}catch(e){return this.emitReserved("error",e)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let r=0;r<e.length;r++){var t=e[r];const o=r===e.length-1;We(t,this.supportsBinary,(e=>{try{this.ws.send(e)}catch(e){}o&&_t((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){var e=this.query||{},t=this.opts.secure?"wss":"ws";let r="";return this.opts.port&&("wss"==t&&443!==Number(this.opts.port)||"ws"==t&&80!==Number(this.opts.port))&&(r=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=bt()),this.supportsBinary||(e.b64=1),e=vt(e),t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+(e.length?"?"+e:"")}check(){return!!Tt}},polling:class extends ct{constructor(e){if(super(e),this.polling=!1,"undefined"!=typeof location){var t="https:"===location.protocol;let r=location.port;r=r||(t?"443":"80"),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||r!==e.port,this.xs=e.secure!==t}t=e&&e.forceBase64,this.supportsBinary=Ct&&!t}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let e=0;this.polling&&(e++,this.once("pollComplete",(function(){--e||t()}))),this.writable||(e++,this.once("drain",(function(){--e||t()})))}else t()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){((e,t)=>{var r=e.split(et),o=[];for(let e=0;e<r.length;e++){var i=Xe(r[e],t);if(o.push(i),"error"===i.type)break}return o})(e,this.socket.binaryType).forEach((e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState)&&this.poll()}doClose(){var e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,((e,t)=>{const r=e.length,o=new Array(r);let i=0;e.forEach(((e,n)=>{We(e,!1,(e=>{o[n]=e,++i===r&&t(o.join(et))}))}))})(e,(e=>{this.doWrite(e,(()=>{this.writable=!0,this.emitReserved("drain")}))}))}uri(){var e=this.query||{},t=this.opts.secure?"https":"http";let r="";return!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=bt()),this.supportsBinary||e.sid||(e.b64=1),this.opts.port&&("https"==t&&443!==Number(this.opts.port)||"http"==t&&80!==Number(this.opts.port))&&(r=":"+this.opts.port),e=vt(e),t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+(e.length?"?"+e:"")}request(e={}){return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new Rt(this.uri(),e)}doWrite(e,t){(e=this.request({method:"POST",data:e})).on("success",t),e.on("error",((e,t)=>{this.onError("xhr post error",e,t)}))}doPoll(){var e=this.request();e.on("data",this.onData.bind(this)),e.on("error",((e,t)=>{this.onError("xhr poll error",e,t)})),this.pollXhr=e}}},Lt=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Et=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function $t(e){var t=e,r=e.indexOf("["),o=e.indexOf("]");-1!=r&&-1!=o&&(e=e.substring(0,r)+e.substring(r,o).replace(/:/g,";")+e.substring(o,e.length));let i=Lt.exec(e||""),n={},s=14;for(;s--;)n[Et[s]]=i[s]||"";return-1!=r&&-1!=o&&(n.source=t,n.host=n.host.substring(1,n.host.length-1).replace(/;/g,":"),n.authority=n.authority.replace("[","").replace("]","").replace(/;/g,":"),n.ipv6uri=!0),n.pathNames=function(e,t){var r=t.replace(/\/{2,9}/g,"/").split("/");return"/"!=t.slice(0,1)&&0!==t.length||r.splice(0,1),"/"==t.slice(-1)&&r.splice(r.length-1,1),r}(0,n.path),n.queryKey=function(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,o){t&&(r[t]=o)})),r}(0,n.query),n}let Bt=class e extends tt{constructor(e,t={}){super(),this.writeBuffer=[],e&&"object"==typeof e&&(t=e,e=null),e?(e=$t(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=$t(t.host).host),st(this,t),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=t.transports||["polling","websocket"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function(e){var t={},r=e.split("&");for(let e=0,i=r.length;e<i;e++){var o=r[e].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),"localhost"!==this.hostname)&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1)),this.open()}createTransport(e){var t=((t=Object.assign({},this.opts.query)).EIO=4,t.transport=e,this.id&&(t.sid=this.id),Object.assign({},this.opts.transportOptions[e],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port}));return new Pt[e](t)}open(){let t;if(this.opts.rememberUpgrade&&e.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),(this.transport=e).on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(e=>this.onClose("transport close",e)))}probe(t){let r=this.createTransport(t),o=!1;e.priorWebsocketSuccess=!1;const i=()=>{o||(r.send([{type:"ping",data:"probe"}]),r.once("packet",(t=>{o||("pong"===t.type&&"probe"===t.data?(this.upgrading=!0,this.emitReserved("upgrading",r),r&&(e.priorWebsocketSuccess="websocket"===r.name,this.transport.pause((()=>{o||"closed"!==this.readyState&&(d(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})))):((t=new Error("probe error")).transport=r.name,this.emitReserved("upgradeError",t)))})))};function n(){o||(o=!0,d(),r.close(),r=null)}const s=e=>{(e=new Error("probe error: "+e)).transport=r.name,n(),this.emitReserved("upgradeError",e)};function a(){s("transport closed")}function l(){s("socket closed")}function c(e){r&&e.name!==r.name&&n()}const d=()=>{r.removeListener("open",i),r.removeListener("error",s),r.removeListener("close",a),this.off("close",l),this.off("upgrading",c)};r.once("open",i),r.once("error",s),r.once("close",a),this.once("close",l),this.once("upgrading",c),r.open()}onOpen(){if(this.readyState="open",e.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade){let e=0;for(var t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}}onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((()=>{this.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),(this.prevBufferLen=0)===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){var e;"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(e=this.getWritablePackets(),this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush"))}getWritablePackets(){if(this.maxPayload&&"polling"===this.transport.name&&1<this.writeBuffer.length){let t=1;for(let r=0;r<this.writeBuffer.length;r++){var e=this.writeBuffer[r].data;if(e&&(t+=at(e)),0<r&&t>this.maxPayload)return this.writeBuffer.slice(0,r);t+=2}}return this.writeBuffer}write(e,t,r){return this.sendPacket("message",e,t,r),this}send(e,t,r){return this.sendPacket("message",e,t,r),this}sendPacket(e,t,r,o){"function"==typeof t&&(o=t,t=void 0),"function"==typeof r&&(o=r,r=null),"closing"!==this.readyState&&"closed"!==this.readyState&&((r=r||{}).compress=!1!==r.compress,this.emitReserved("packetCreate",e={type:e,data:t,options:r}),this.writeBuffer.push(e),o&&this.once("flush",o),this.flush())}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},r=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{(this.upgrading?r:e)()})):(this.upgrading?r:e)()),this}onError(t){e.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){var t=[];let r=0;for(var o=e.length;r<o;r++)~this.transports.indexOf(e[r])&&t.push(e[r]);return t}};Bt.protocol=4;const Ot="function"==typeof ArrayBuffer,Mt=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,It=Object.prototype.toString,jt="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===It.call(Blob),zt="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===It.call(File);function Dt(e){return Ot&&(e instanceof ArrayBuffer||Mt(e))||jt&&e instanceof Blob||zt&&e instanceof File}function Nt(e,t){if(e&&"object"==typeof e)if(Array.isArray(e)){for(let t=0,r=e.length;t<r;t++)if(Nt(e[t]))return!0}else{if(Dt(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return Nt(e.toJSON(),!0);for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&Nt(e[t]))return!0}return!1}function qt(e){var t=[],r=e.data;return e.data=Ut(r,t),e.attachments=t.length,{packet:e,buffers:t}}function Ut(e,t){if(!e)return e;var r;if(Dt(e))return r={_placeholder:!0,num:t.length},t.push(e),r;if(Array.isArray(e)){var o=new Array(e.length);for(let r=0;r<e.length;r++)o[r]=Ut(e[r],t);return o}if("object"!=typeof e||e instanceof Date)return e;var i={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=Ut(e[r],t));return i}function Ft(e,t){return e.data=Ht(e.data,t),delete e.attachments,e}function Ht(e,t){if(e){if(e&&!0===e._placeholder){if("number"==typeof e.num&&0<=e.num&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=Ht(e[r],t);else if("object"==typeof e)for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=Ht(e[r],t))}return e}const Gt=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];var Wt;(Wt=_e=_e||{})[Wt.CONNECT=0]="CONNECT",Wt[Wt.DISCONNECT=1]="DISCONNECT",Wt[Wt.EVENT=2]="EVENT",Wt[Wt.ACK=3]="ACK",Wt[Wt.CONNECT_ERROR=4]="CONNECT_ERROR",Wt[Wt.BINARY_EVENT=5]="BINARY_EVENT",Wt[Wt.BINARY_ACK=6]="BINARY_ACK";function Vt(e){return"[object Object]"===Object.prototype.toString.call(e)}class Yt extends tt{constructor(e){super(),this.reviver=e}add(e){let t;if("string"==typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");var r=(t=this.decodeString(e)).type===_e.BINARY_EVENT;(!r&&t.type!==_e.BINARY_ACK||(t.type=r?_e.EVENT:_e.ACK,this.reconstructor=new Jt(t),0===t.attachments))&&super.emitReserved("decoded",t)}else{if(!Dt(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;var r={type:Number(e.charAt(0))};if(void 0===_e[r.type])throw new Error("unknown packet type "+r.type);if(r.type===_e.BINARY_EVENT||r.type===_e.BINARY_ACK){for(var o=t+1;"-"!==e.charAt(++t)&&t!=e.length;);if((o=e.substring(o,t))!=Number(o)||"-"!==e.charAt(t))throw new Error("Illegal attachments");r.attachments=Number(o)}if("/"===e.charAt(t+1)){for(o=t+1;++t&&","!==e.charAt(t)&&t!==e.length;);r.nsp=e.substring(o,t)}else r.nsp="/";if(""!==(o=e.charAt(t+1))&&Number(o)==o){for(o=t+1;++t;){var i=e.charAt(t);if(null==i||Number(i)!=i){--t;break}if(t===e.length)break}r.id=Number(e.substring(o,t+1))}if(e.charAt(++t)){if(o=this.tryParse(e.substr(t)),!Yt.isPayloadValid(r.type,o))throw new Error("invalid payload");r.data=o}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(e){return!1}}static isPayloadValid(e,t){switch(e){case _e.CONNECT:return Vt(t);case _e.DISCONNECT:return void 0===t;case _e.CONNECT_ERROR:return"string"==typeof t||Vt(t);case _e.EVENT:case _e.BINARY_EVENT:return Array.isArray(t)&&("number"==typeof t[0]||"string"==typeof t[0]&&-1===Gt.indexOf(t[0]));case _e.ACK:case _e.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Jt{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){return this.buffers.push(e),this.buffers.length===this.reconPack.attachments?(e=Ft(this.reconPack,this.buffers),this.finishedReconstruction(),e):null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}var Kt,Xt=Object.freeze({__proto__:null,Decoder:Yt,Encoder:class{constructor(e){this.replacer=e}encode(e){return e.type!==_e.EVENT&&e.type!==_e.ACK||!Nt(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===_e.EVENT?_e.BINARY_EVENT:_e.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){let t=""+e.type;return e.type!==_e.BINARY_EVENT&&e.type!==_e.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){e=qt(e);var t=this.encodeAsString(e.packet);return(e=e.buffers).unshift(t),e}},get PacketType(){return _e},protocol:5});function Qt(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const Zt=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class er extends tt{constructor(e,t,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){var e;this.subs||(e=this.io,this.subs=[Qt(e,"open",this.onopen.bind(this)),Qt(e,"packet",this.onpacket.bind(this)),Qt(e,"error",this.onerror.bind(this)),Qt(e,"close",this.onclose.bind(this))])}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){if(Zt.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');var r,o;return t.unshift(e),!this._opts.retries||this.flags.fromQueue||this.flags.volatile?((e={type:_e.EVENT,data:t,options:{}}).options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(r=this.ids++,o=t.pop(),this._registerAckCallback(r,o),e.id=r),o=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable,(!this.flags.volatile||o&&this.connected)&&(this.connected?(this.notifyOutgoingListeners(e),this.packet(e)):this.sendBuffer.push(e)),this.flags={}):this._addToQueue(t),this}_registerAckCallback(e,t){var r=null!=(r=this.flags.timeout)?r:this._opts.ackTimeout;if(void 0===r)this.acks[e]=t;else{const o=this.io.setTimeoutFn((()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,new Error("operation has timed out"))}),r);this.acks[e]=(...e)=>{this.io.clearTimeoutFn(o),t.apply(this,[null,...e])}}}emitWithAck(e,...t){const r=void 0!==this.flags.timeout||void 0!==this._opts.ackTimeout;return new Promise(((o,i)=>{t.push(((e,t)=>r?e?i(e):o(t):o(e))),this.emit(e,...t)}))}_addToQueue(e){let t;"function"==typeof e[e.length-1]&&(t=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push(((e,...o)=>{if(r===this._queue[0])return null!==e?r.tryCount>this._opts.retries&&(this._queue.shift(),t)&&t(e):(this._queue.shift(),t&&t(null,...o)),r.pending=!1,this._drainQueue()})),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){var t;!this.connected||0===this._queue.length||(t=this._queue[0]).pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth((e=>{this._sendConnectPacket(e)})):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:_e.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case _e.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case _e.EVENT:case _e.BINARY_EVENT:this.onevent(e);break;case _e.ACK:case _e.BINARY_ACK:this.onack(e);break;case _e.DISCONNECT:this.ondisconnect();break;case _e.CONNECT_ERROR:this.destroy();var t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){var t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length)for(const t of this._anyListeners.slice())t.apply(this,e);super.emit.apply(this,e),this._pid&&e.length&&"string"==typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let r=!1;return function(...o){r||(r=!0,t.packet({type:_e.ACK,id:e,data:o}))}}onack(e){var t=this.acks[e.id];"function"==typeof t&&(t.apply(this,e.data),delete this.acks[e.id])}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach((e=>this.emitEvent(e))),this.receiveBuffer=[],this.sendBuffer.forEach((e=>{this.notifyOutgoingListeners(e),this.packet(e)})),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((e=>e())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:_e.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(this._anyListeners)if(e){var t=this._anyListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(this._anyOutgoingListeners)if(e){var t=this._anyOutgoingListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length)for(const t of this._anyOutgoingListeners.slice())t.apply(this,e.data)}}function tr(e){this.ms=(e=e||{}).min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=0<e.jitter&&e.jitter<=1?e.jitter:0,this.attempts=0}tr.prototype.duration=function(){var e,t,r=this.ms*Math.pow(this.factor,this.attempts++);return this.jitter&&(e=Math.random(),t=Math.floor(e*this.jitter*r),r=0==(1&Math.floor(10*e))?r-t:r+t),0|Math.min(r,this.max)},tr.prototype.reset=function(){this.attempts=0},tr.prototype.setMin=function(e){this.ms=e},tr.prototype.setMax=function(e){this.max=e},tr.prototype.setJitter=function(e){this.jitter=e};class rr extends tt{constructor(e,t){super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,st(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!=(r=t.randomizationFactor)?r:.5),this.backoff=new tr({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;var r=t.parser||Xt;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null!=(t=this.backoff)&&t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null!=(t=this.backoff)&&t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null!=(t=this.backoff)&&t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(!~this._readyState.indexOf("open")){this.engine=new Bt(this.uri,this.opts);const o=this.engine,i=this,n=(this._readyState="opening",this.skipReconnect=!1,Qt(o,"open",(function(){i.onopen(),e&&e()})));var t=Qt(o,"error",(t=>{i.cleanup(),i._readyState="closed",this.emitReserved("error",t),e?e(t):i.maybeReconnectOnOpen()}));if(!1!==this._timeout){var r=this._timeout;0===r&&n();const e=this.setTimeoutFn((()=>{n(),o.close(),o.emit("error",new Error("timeout"))}),r);this.opts.autoUnref&&e.unref(),this.subs.push((function(){clearTimeout(e)}))}this.subs.push(n),this.subs.push(t)}return this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");var e=this.engine;this.subs.push(Qt(e,"ping",this.onping.bind(this)),Qt(e,"data",this.ondata.bind(this)),Qt(e,"error",this.onerror.bind(this)),Qt(e,"close",this.onclose.bind(this)),Qt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(e){this.onclose("parse error",e)}}ondecoded(e){_t((()=>{this.emitReserved("packet",e)}),this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new er(this,e,t),this.nsps[e]=r),r}_destroy(e){for(const e of Object.keys(this.nsps)){if(this.nsps[e].active)return}this._close()}_packet(e){var t=this.encoder.encode(e);for(let r=0;r<t.length;r++)this.engine.write(t[r],e.options)}cleanup(){this.subs.forEach((e=>e())),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{var t=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn((()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect)||e.open((t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()}))}),t);this.opts.autoUnref&&r.unref(),this.subs.push((function(){clearTimeout(r)}))}}onreconnect(){var e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const or={};function ir(e,t){"object"==typeof e&&(t=e,e=void 0);e=function(e,t="",r){let o=e;return r=r||"undefined"!=typeof location&&location,"string"==typeof(e=null==e?r.protocol+"//"+r.host:e)&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?r.protocol+e:r.host+e),/^(https?|wss?):\/\//.test(e)||(e=void 0!==r?r.protocol+"//"+e:"https://"+e),o=$t(e)),o.port||(/^(http|ws)$/.test(o.protocol)?o.port="80":/^(http|ws)s$/.test(o.protocol)&&(o.port="443")),o.path=o.path||"/",e=-1!==o.host.indexOf(":")?"["+o.host+"]":o.host,o.id=o.protocol+"://"+e+":"+o.port+t,o.href=o.protocol+"://"+e+(r&&r.port===o.port?"":":"+o.port),o}(e,(t=t||{}).path||"/socket.io");var r=e.source,o=e.id,i=e.path;i=or[o]&&i in or[o].nsps;let n;return n=(i=t.forceNew||t["force new connection"]||!1===t.multiplex||i)?new rr(r,t):(or[o]||(or[o]=new rr(r,t)),or[o]),e.query&&!t.query&&(t.query=e.queryKey),n.socket(e.path,t)}Object.assign(ir,{Manager:rr,Socket:er,io:ir,connect:ir});const nr=ae('<span>Powered by<a href="https://chatgenius.ai" target="_blank" rel="noopener noreferrer" class="lite-badge" id="lite-badge"><span>&nbsp;ChatGenius.ai'),sr="#303235",ar=e=>{let t,r;const o=r=>{r.forEach((r=>{r.removedNodes.forEach((r=>{"id"in r&&t&&"lite-badge"==r.id&&(console.log("Sorry, you can't remove the brand "),e.botContainer?.append(t))}))}))};P((()=>{document&&e.botContainer&&(r=new MutationObserver(o)).observe(e.botContainer,{subtree:!1,childList:!0})})),L((()=>{r&&r.disconnect()}));{const r=nr(),o=r.firstChild.nextSibling;r.style.setProperty("font-size","13px"),r.style.setProperty("position","absolute"),r.style.setProperty("bottom","0"),r.style.setProperty("padding","10px"),r.style.setProperty("margin","auto"),r.style.setProperty("width","100%"),r.style.setProperty("text-align","center");return"function"==typeof t?fe(t,o):t=o,o.style.setProperty("font-weight","bold"),R((t=>{var i=e.poweredByTextColor??sr,n=e.badgeBackgroundColor??"#ffffff",s=e.visibility?"block":"none",a=e.poweredByTextColor??sr;return i!==t._v$&&(null!=(t._v$=i)?r.style.setProperty("color",i):r.style.removeProperty("color")),n!==t._v$2&&(null!=(t._v$2=n)?r.style.setProperty("background-color",n):r.style.removeProperty("background-color")),s!==t._v$3&&(null!=(t._v$3=s)?r.style.setProperty("display",s):r.style.removeProperty("display")),a!==t._v$4&&(null!=(t._v$4=a)?o.style.setProperty("color",a):o.style.removeProperty("color")),t}),{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),r}},[lr,cr]=C(),dr=ae('<figure data-testid="default-avatar"><svg width="75" height="75" viewBox="0 0 75 75" fill="none" xmlns="http://www.w3.org/2000/svg"><mask id="mask0" x="0" y="0" mask-type="alpha"><circle cx="37.5" cy="37.5" r="37.5" fill="#0042DA"></circle></mask><g mask="url(#mask0)"><rect x="-30" y="-43" width="131" height="154" fill="#0042DA"></rect><rect x="2.50413" y="120.333" width="81.5597" height="86.4577" rx="2.5" transform="rotate(-52.6423 2.50413 120.333)" stroke="#FED23D" stroke-width="5"></rect><circle cx="76.5" cy="-1.5" r="29" stroke="#FF8E20" stroke-width="5"></circle><path d="M-49.8224 22L-15.5 -40.7879L18.8224 22H-49.8224Z" stroke="#F7F8FF" stroke-width="5">'),ur=()=>{{const e=dr(),t=e.firstChild;return R((r=>{var o="flex justify-center items-center rounded-full text-white relative "+(lr()?"w-6 h-6 text-sm":"w-10 h-10 text-xl"),i="absolute top-0 left-0 "+(lr()?" w-6 h-6 text-sm":"w-full h-full text-xl");return o!==r._v$&&de(e,r._v$=o),i!==r._v$2&&ce(t,"class",r._v$2=i),r}),{_v$:void 0,_v$2:void 0}),e}},hr=ae('<figure><img alt="Bot avatar" class="rounded-full object-cover w-full h-full">'),pr=e=>{const[t,r]=C(e.initialAvatarSrc);return S((()=>{t()?.startsWith("{{")&&e.initialAvatarSrc?.startsWith("http")&&r(e.initialAvatarSrc)})),W(Z,{get when(){return(e=>null!=e&&""!==e)(t())},keyed:!0,get fallback(){return W(ur,{})},get children(){const e=hr(),r=e.firstChild;return R((o=>{var i="flex justify-center items-center rounded-full text-white relative flex-shrink-0 "+(lr()?"w-6 h-6 text-sm":"w-10 h-10 text-xl"),n=t();return i!==o._v$&&de(e,o._v$=i),n!==o._v$2&&ce(r,"src",o._v$2=n),o}),{_v$:void 0,_v$2:void 0}),e}})};class fr{constructor(e,t=""){this.source=e.source,this.flags=t}setGroup(e,t){let r="string"==typeof t?t:t.source;return r=r.replace(/(^|[^\[])\^/g,"$1"),this.source=this.source.replace(e,r),this}getRegexp(){return new RegExp(this.source,this.flags)}}const gr=/[&<>"']/,mr=/[&<>"']/g,br={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},vr=/[<>"']|&(?!#?\w+;)/,yr=/[<>"']|&(?!#?\w+;)/g;function wr(e,t){if(t){if(gr.test(e))return e.replace(mr,(e=>br[e]))}else if(vr.test(e))return e.replace(yr,(e=>br[e]));return e}function xr(e){return e.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,(function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""}))}!function(e){e[e.space=1]="space",e[e.text=2]="text",e[e.paragraph=3]="paragraph",e[e.heading=4]="heading",e[e.listStart=5]="listStart",e[e.listEnd=6]="listEnd",e[e.looseItemStart=7]="looseItemStart",e[e.looseItemEnd=8]="looseItemEnd",e[e.listItemStart=9]="listItemStart",e[e.listItemEnd=10]="listItemEnd",e[e.blockquoteStart=11]="blockquoteStart",e[e.blockquoteEnd=12]="blockquoteEnd",e[e.code=13]="code",e[e.table=14]="table",e[e.html=15]="html",e[e.hr=16]="hr"}(Kt=Kt||{});class kr{constructor(e){this.options=e||Sr.options}code(e,t,r,o){this.options.highlight&&null!=(i=this.options.highlight(e,t))&&i!==e&&(r=!0,e=i);var i=r?e:this.options.escape(e,!0);return t?`\n<pre><code class="${this.options.langPrefix+this.options.escape(t,!0)}">${i}\n</code></pre>\n`:`\n<pre><code>${i}\n</code></pre>\n`}blockquote(e){return`<blockquote>\n${e}</blockquote>\n`}html(e){return e}heading(e,t,r){return`<h${t} id="${this.options.headerPrefix+r.toLowerCase().replace(/[^\w]+/g,"-")}">${e}</h${t}>\n`}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(e,t){return`\n<${t=t?"ol":"ul"}>\n${e}</${t}>\n`}listitem(e){return"<li>"+e+"</li>\n"}paragraph(e){return"<p>"+e+"</p>\n"}table(e,t){return`\n<table>\n<thead>\n${e}</thead>\n<tbody>\n${t}</tbody>\n</table>\n`}tablerow(e){return"<tr>\n"+e+"</tr>\n"}tablecell(e,t){var r=t.header?"th":"td";return(t.align?"<"+r+' style="text-align:'+t.align+'">':"<"+r+">")+e+"</"+r+">\n"}strong(e){return"<strong>"+e+"</strong>"}em(e){return"<em>"+e+"</em>"}codespan(e){return"<code>"+e+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return"<del>"+e+"</del>"}link(e,t,r){if(this.options.sanitize){let o;try{o=decodeURIComponent(this.options.unescape(e)).replace(/[^\w:]/g,"").toLowerCase()}catch(t){return r}if(0===o.indexOf("javascript:")||0===o.indexOf("vbscript:")||0===o.indexOf("data:"))return r}let o='<a href="'+e+'"';return t&&(o+=' title="'+t+'"'),o+">"+r+"</a>"}image(e,t,r){let o='<img src="'+e+'" alt="'+r+'"';return t&&(o+=' title="'+t+'"'),o+(this.options.xhtml?"/>":">")}text(e){return e}}class Cr{constructor(e,t,r=Sr.options,o){if(this.staticThis=e,this.links=t,this.options=r,this.renderer=o||this.options.renderer||new kr(this.options),!this.links)throw new Error("InlineLexer requires 'links' parameter.");this.setRules()}static output(e,t,r){return new this(this,t,r).output(e)}static getRulesBase(){var e;return this.rulesBase||((e={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ <>]+(@|:\/)[^ <>]+)>/,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^<'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)([\s\S]*?[^`])\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/,_inside:/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,_href:/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/}).link=new fr(e.link).setGroup("inside",e._inside).setGroup("href",e._href).getRegexp(),e.reflink=new fr(e.reflink).setGroup("inside",e._inside).getRegexp(),this.rulesBase=e)}static getRulesPedantic(){return this.rulesPedantic||(this.rulesPedantic=Object.assign(Object.assign({},this.getRulesBase()),{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}))}static getRulesGfm(){var e,t,r;return this.rulesGfm||(e=this.getRulesBase(),t=new fr(e.escape).setGroup("])","~|])").getRegexp(),r=new fr(e.text).setGroup("]|","~]|").setGroup("|","|https?://|").getRegexp(),this.rulesGfm=Object.assign(Object.assign({},e),{escape:t,url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:r}))}static getRulesBreaks(){var e,t;return this.rulesBreaks||(e=this.getRulesGfm(),t=this.getRulesGfm(),this.rulesBreaks=Object.assign(Object.assign({},t),{br:new fr(e.br).setGroup("{2,}","*").getRegexp(),text:new fr(t.text).setGroup("{2,}","*").getRegexp()}))}setRules(){this.options.gfm?this.options.breaks?this.rules=this.staticThis.getRulesBreaks():this.rules=this.staticThis.getRulesGfm():this.options.pedantic?this.rules=this.staticThis.getRulesPedantic():this.rules=this.staticThis.getRulesBase(),this.hasRulesGfm=void 0!==this.rules.url}output(e){let t,r="";for(;e;)if(t=this.rules.escape.exec(e))e=e.substring(t[0].length),r+=t[1];else if(t=this.rules.autolink.exec(e)){let o,i;e=e.substring(t[0].length),i="@"===t[2]?(o=this.options.escape(":"===t[1].charAt(6)?this.mangle(t[1].substring(7)):this.mangle(t[1])),this.mangle("mailto:")+o):o=this.options.escape(t[1]),r+=this.renderer.link(i,null,o)}else if(!this.inLink&&this.hasRulesGfm&&(t=this.rules.url.exec(e)))e=e.substring(t[0].length),o=this.options.escape(t[1]),r+=this.renderer.link(o,null,o);else if(t=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(t[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(t[0])&&(this.inLink=!1),e=e.substring(t[0].length),r+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):this.options.escape(t[0]):t[0];else if(t=this.rules.link.exec(e))e=e.substring(t[0].length),this.inLink=!0,r+=this.outputLink(t,{href:t[2],title:t[3]}),this.inLink=!1;else if(t=(t=this.rules.reflink.exec(e))||this.rules.nolink.exec(e)){e=e.substring(t[0].length);var o=(t[2]||t[1]).replace(/\s+/g," "),i=this.links[o.toLowerCase()];i&&i.href?(this.inLink=!0,r+=this.outputLink(t,i),this.inLink=!1):(r+=t[0].charAt(0),e=t[0].substring(1)+e)}else if(t=this.rules.strong.exec(e))e=e.substring(t[0].length),r+=this.renderer.strong(this.output(t[2]||t[1]));else if(t=this.rules.em.exec(e))e=e.substring(t[0].length),r+=this.renderer.em(this.output(t[2]||t[1]));else if(t=this.rules.code.exec(e))e=e.substring(t[0].length),r+=this.renderer.codespan(this.options.escape(t[2].trim(),!0));else if(t=this.rules.br.exec(e))e=e.substring(t[0].length),r+=this.renderer.br();else if(this.hasRulesGfm&&(t=this.rules.del.exec(e)))e=e.substring(t[0].length),r+=this.renderer.del(this.output(t[1]));else if(t=this.rules.text.exec(e))e=e.substring(t[0].length),r+=this.renderer.text(this.options.escape(this.smartypants(t[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return r}outputLink(e,t){var r=this.options.escape(t.href);t=t.title?this.options.escape(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(r,t,this.output(e[1])):this.renderer.image(r,t,this.options.escape(e[1]))}smartypants(e){return this.options.smartypants?e.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,""):e}mangle(e){if(!this.options.mangle)return e;let t="";var r=e.length;for(let o=0;o<r;o++){let r;.5<Math.random()&&(r="x"+e.charCodeAt(o).toString(16)),t+="&#"+r+";"}return t}}Cr.rulesBase=null,Cr.rulesPedantic=null,Cr.rulesGfm=null,Cr.rulesBreaks=null;class Rr{constructor(e){this.simpleRenderers=[],this.line=0,this.tokens=[],this.token=null,this.options=e||Sr.options,this.renderer=this.options.renderer||new kr(this.options)}static parse(e,t,r){return new this(r).parse(t,e)}parse(e,t){this.inlineLexer=new Cr(Cr,e,this.options,this.renderer),this.tokens=t.reverse();let r="";for(;this.next();)r+=this.tok();return r}debug(e,t){this.inlineLexer=new Cr(Cr,e,this.options,this.renderer),this.tokens=t.reverse();let r="";for(;this.next();){var o=this.tok();this.token.line=this.line+=o.split("\n").length-1,r+=o}return r}next(){return this.token=this.tokens.pop()}getNextElement(){return this.tokens[this.tokens.length-1]}parseText(){let e=this.token.text;for(var t;(t=this.getNextElement())&&t.type==Kt.text;)e+="\n"+this.next().text;return this.inlineLexer.output(e)}tok(){switch(this.token.type){case Kt.space:return"";case Kt.paragraph:return this.renderer.paragraph(this.inlineLexer.output(this.token.text));case Kt.text:return this.options.isNoP?this.parseText():this.renderer.paragraph(this.parseText());case Kt.heading:return this.renderer.heading(this.inlineLexer.output(this.token.text),this.token.depth,this.token.text);case Kt.listStart:{let t="";for(var e=this.token.ordered;this.next().type!=Kt.listEnd;)t+=this.tok();return this.renderer.list(t,e)}case Kt.listItemStart:{let e="";for(;this.next().type!=Kt.listItemEnd;)e+=this.token.type==Kt.text?this.parseText():this.tok();return this.renderer.listitem(e)}case Kt.looseItemStart:{let e="";for(;this.next().type!=Kt.listItemEnd;)e+=this.tok();return this.renderer.listitem(e)}case Kt.code:return this.renderer.code(this.token.text,this.token.lang,this.token.escaped,this.token.meta);case Kt.table:{e="";let o,i="";o="";for(let e=0;e<this.token.header.length;e++){var t={header:!0,align:this.token.align[e]},r=this.inlineLexer.output(this.token.header[e]);o+=this.renderer.tablecell(r,t)}e+=this.renderer.tablerow(o);for(const e of this.token.cells){o="";for(let t=0;t<e.length;t++)o+=this.renderer.tablecell(this.inlineLexer.output(e[t]),{header:!1,align:this.token.align[t]});i+=this.renderer.tablerow(o)}return this.renderer.table(e,i)}case Kt.blockquoteStart:{let e="";for(;this.next().type!=Kt.blockquoteEnd;)e+=this.tok();return this.renderer.blockquote(e)}case Kt.hr:return this.renderer.hr();case Kt.html:return e=this.token.pre||this.options.pedantic?this.token.text:this.inlineLexer.output(this.token.text),this.renderer.html(e);default:if(this.simpleRenderers.length)for(let e=0;e<this.simpleRenderers.length;e++)if(this.token.type=="simpleRule"+(e+1))return this.simpleRenderers[e].call(this.renderer,this.token.execArr);if(e=`Token with "${this.token.type}" type was not found.`,!this.options.silent)throw new Error(e);console.log(e)}}}class Sr{static setOptions(e){return Object.assign(this.options,e),this}static setBlockRule(e,t=(()=>"")){return _r.simpleRules.push(e),this.simpleRenderers.push(t),this}static parse(e,t=this.options){try{var{tokens:r,links:o}=this.callBlockLexer(e,t);return this.callParser(r,o,t)}catch(e){return this.callMe(e)}}static debug(e,t=this.options){var{tokens:e,links:r}=this.callBlockLexer(e,t);let o=e.slice();return(t=new Rr(t)).simpleRenderers=this.simpleRenderers,t=t.debug(r,e),{tokens:o=o.map((e=>{e.type=Kt[e.type]||e.type;var t=e.line;return delete e.line,t?Object.assign({line:t},e):e})),links:r,result:t}}static callBlockLexer(e="",t){if("string"!=typeof e)throw new Error(`Expected that the 'src' parameter would have a 'string' type, got '${typeof e}'`);return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n").replace(/^ +$/gm,""),_r.lex(e,t,!0)}static callParser(e,t,r){var o;return this.simpleRenderers.length?((o=new Rr(r)).simpleRenderers=this.simpleRenderers,o.parse(t,e)):Rr.parse(e,t,r)}static callMe(e){if(e.message+="\nPlease report this to https://github.com/ts-stack/markdown",this.options.silent)return"<p>An error occured:</p><pre>"+this.options.escape(e.message+"",!0)+"</pre>";throw e}}Sr.options=new class{constructor(){this.gfm=!0,this.tables=!0,this.breaks=!1,this.pedantic=!1,this.sanitize=!1,this.mangle=!0,this.smartLists=!1,this.silent=!1,this.langPrefix="lang-",this.smartypants=!1,this.headerPrefix="",this.xhtml=!1,this.escape=wr,this.unescape=xr}},Sr.simpleRenderers=[];class _r{constructor(e,t){this.staticThis=e,this.links={},this.tokens=[],this.options=t||Sr.options,this.setRules()}static lex(e,t,r,o){return new this(this,t).getTokens(e,r,o)}static getRulesBase(){var e,t;return this.rulesBase||((e={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/,bullet:/(?:[*+-]|\d+\.)/,item:/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/}).item=new fr(e.item,"gm").setGroup(/bull/g,e.bullet).getRegexp(),e.list=new fr(e.list).setGroup(/bull/g,e.bullet).setGroup("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))").setGroup("def","\\n+(?="+e.def.source+")").getRegexp(),t="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",e.html=new fr(e.html).setGroup("comment",/<!--[\s\S]*?-->/).setGroup("closed",/<(tag)[\s\S]+?<\/\1>/).setGroup("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/).setGroup(/tag/g,t).getRegexp(),e.paragraph=new fr(e.paragraph).setGroup("hr",e.hr).setGroup("heading",e.heading).setGroup("lheading",e.lheading).setGroup("blockquote",e.blockquote).setGroup("tag","<"+t).setGroup("def",e.def).getRegexp(),this.rulesBase=e)}static getRulesGfm(){var e,t,r,o;return this.rulesGfm||(e=this.getRulesBase(),r=(t=Object.assign(Object.assign({},e),{fences:/^ *(`{3,}|~{3,})[ \.]*((\S+)? *[^\n]*)\n([\s\S]*?)\s*\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/})).fences.source.replace("\\1","\\2"),o=e.list.source.replace("\\1","\\3"),t.paragraph=new fr(e.paragraph).setGroup("(?!",`(?!${r}|${o}|`).getRegexp(),this.rulesGfm=t)}static getRulesTable(){return this.rulesTables||(this.rulesTables=Object.assign(Object.assign({},this.getRulesGfm()),{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}))}setRules(){this.options.gfm?this.options.tables?this.rules=this.staticThis.getRulesTable():this.rules=this.staticThis.getRulesGfm():this.rules=this.staticThis.getRulesBase(),this.hasRulesGfm=void 0!==this.rules.fences,this.hasRulesTables=void 0!==this.rules.table}getTokens(e,t,r){let o,i=e;e:for(;i;)if((o=this.rules.newline.exec(i))&&(i=i.substring(o[0].length),1<o[0].length)&&this.tokens.push({type:Kt.space}),o=this.rules.code.exec(i)){i=i.substring(o[0].length);var n=o[0].replace(/^ {4}/gm,"");this.tokens.push({type:Kt.code,text:this.options.pedantic?n:n.replace(/\n+$/,"")})}else if(this.hasRulesGfm&&(o=this.rules.fences.exec(i)))i=i.substring(o[0].length),this.tokens.push({type:Kt.code,meta:o[2],lang:o[3],text:o[4]||""});else if(o=this.rules.heading.exec(i))i=i.substring(o[0].length),this.tokens.push({type:Kt.heading,depth:o[1].length,text:o[2]});else if(t&&this.hasRulesTables&&(o=this.rules.nptable.exec(i))){i=i.substring(o[0].length);var s={type:Kt.table,header:o[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:o[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:[]};for(let e=0;e<s.align.length;e++)/^ *-+: *$/.test(s.align[e])?s.align[e]="right":/^ *:-+: *$/.test(s.align[e])?s.align[e]="center":/^ *:-+ *$/.test(s.align[e])?s.align[e]="left":s.align[e]=null;var a=o[3].replace(/\n$/,"").split("\n");for(let e=0;e<a.length;e++)s.cells[e]=a[e].split(/ *\| */);this.tokens.push(s)}else if(o=this.rules.lheading.exec(i))i=i.substring(o[0].length),this.tokens.push({type:Kt.heading,depth:"="===o[2]?1:2,text:o[1]});else if(o=this.rules.hr.exec(i))i=i.substring(o[0].length),this.tokens.push({type:Kt.hr});else if(o=this.rules.blockquote.exec(i))i=i.substring(o[0].length),this.tokens.push({type:Kt.blockquoteStart}),n=o[0].replace(/^ *> ?/gm,""),this.getTokens(n),this.tokens.push({type:Kt.blockquoteEnd});else if(o=this.rules.list.exec(i)){i=i.substring(o[0].length);var l,c=o[2],d=(this.tokens.push({type:Kt.listStart,ordered:1<c.length}),o[0].match(this.rules.item)),u=d.length;let e,t=!1;for(let o=0;o<u;o++){let n=d[o];l=n.length,-1!==(n=n.replace(/^ *([*+-]|\d+\.) +/,"")).indexOf("\n ")&&(l-=n.length,n=this.options.pedantic?n.replace(/^ {1,4}/gm,""):n.replace(new RegExp("^ {1,"+l+"}","gm"),"")),!this.options.smartLists||o===u-1||c===(l=this.staticThis.getRulesBase().bullet.exec(d[o+1])[0])||1<c.length&&1<l.length||(i=d.slice(o+1).join("\n")+i,o=u-1),e=t||/\n\n(?!\s*$)/.test(n),o!==u-1&&(t="\n"===n.charAt(n.length-1),e=e||t),this.tokens.push({type:e?Kt.looseItemStart:Kt.listItemStart}),this.getTokens(n,!1,r),this.tokens.push({type:Kt.listItemEnd})}this.tokens.push({type:Kt.listEnd})}else if(o=this.rules.html.exec(i)){i=i.substring(o[0].length);var h=o[1];this.tokens.push({type:this.options.sanitize?Kt.paragraph:Kt.html,pre:!this.options.sanitizer&&("pre"===h||"script"===h||"style"===h),text:o[0]})}else if(t&&(o=this.rules.def.exec(i)))i=i.substring(o[0].length),this.links[o[1].toLowerCase()]={href:o[2],title:o[3]};else if(t&&this.hasRulesTables&&(o=this.rules.table.exec(i))){i=i.substring(o[0].length);var p={type:Kt.table,header:o[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:o[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:[]};for(let e=0;e<p.align.length;e++)/^ *-+: *$/.test(p.align[e])?p.align[e]="right":/^ *:-+: *$/.test(p.align[e])?p.align[e]="center":/^ *:-+ *$/.test(p.align[e])?p.align[e]="left":p.align[e]=null;var f=o[3].replace(/(?: *\| *)?\n$/,"").split("\n");for(let e=0;e<f.length;e++)p.cells[e]=f[e].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(p)}else{if(this.staticThis.simpleRules.length){var g=this.staticThis.simpleRules;for(let e=0;e<g.length;e++)if(o=g[e].exec(i)){i=i.substring(o[0].length);var m="simpleRule"+(e+1);this.tokens.push({type:m,execArr:o});continue e}}if(t&&(o=this.rules.paragraph.exec(i)))i=i.substring(o[0].length),"\n"===o[1].slice(-1)?this.tokens.push({type:Kt.paragraph,text:o[1].slice(0,-1)}):this.tokens.push({type:0<this.tokens.length?Kt.paragraph:Kt.text,text:o[1]});else if(o=this.rules.text.exec(i))i=i.substring(o[0].length),this.tokens.push({type:Kt.text,text:o[0]});else if(i)throw new Error("Infinite loop on byte: "+i.charCodeAt(0)+`, near text '${i.slice(0,30)}...'`)}return{tokens:this.tokens,links:this.links}}}_r.simpleRules=[],_r.rulesBase=null,_r.rulesGfm=null,_r.rulesTables=null;const Tr=ae('<div class="flex justify-start items-start host-container"><span class="px-4 py-2 ml-2 max-w-full chatbot-host-bubble flex flex-col gap-2" data-testid="host-bubble">'),Ar=new kr,Pr=(Ar.heading=function(e,t){return 1===t?`<h1 class="text-4xl font-bold  my-4">${e}</h1>`:2===t?`<h2 class="text-3xl font-semibold my-3">${e}</h2>`:`<h${t} class="text-xl font-medium my-2">${e}</h${t}>`},Ar.list=function(e){return`<ul class="list-disc px-4">${e}</ul>`},Ar.listitem=function(e){return`<li class="my-2">${e}</li>`},Ar.table=function(e,t){return`<div class="overflow-x-auto"><table class="w-full table-collapse divide-y"><thead class="text-sm text-left uppercase font-semibold text-grey-darker p-3 bg-gray-200" >${e}</thead><tbody class="align-baseline divide-y" >${t}</tbody></table></div>`},Ar.tablerow=function(e){return`<tr class="group cursor-pointer hover:bg-gray-100" >${e}</tr>`},Ar.tablecell=function(e){return`<td class="text-sm p-3 border-t border-grey-light">${e}</td>`},Sr.setOptions({tables:!0,sanitizer:e=>(console.log(e),e),renderer:Ar}),e=>{let t;P((()=>{var r;t&&(r=e.message.replace(/\n{3,}/g,"\n\n"),t.innerHTML=Sr.parse(r))}));{const r=Tr(),o=r.firstChild;r.style.setProperty("margin-right","50px"),ge(r,W(Z,{get when(){return e.showAvatar},get children(){return W(pr,{get initialAvatarSrc(){return e.avatarSrc}})}}),o);return"function"==typeof t?fe(t,o):t=o,o.style.setProperty("border-radius","6px"),R((t=>{var r=e.backgroundColor??"#f7f8ff",i=e.textColor??"#303235";return r!==t._v$&&(null!=(t._v$=r)?o.style.setProperty("background-color",r):o.style.removeProperty("background-color")),i!==t._v$2&&(null!=(t._v$2=i)?o.style.setProperty("color",i):o.style.removeProperty("color")),t}),{_v$:void 0,_v$2:void 0}),r}}),Lr=ae('<div class="flex justify-end mb-2 items-end guest-container"><span class="px-4 py-2 mr-2 whitespace-pre-wrap max-w-full chatbot-guest-bubble" data-testid="guest-bubble">'),Er=(Sr.setOptions({isNoP:!0}),e=>{let t;P((()=>{t&&(t.innerHTML=Sr.parse(e.message))}));{const r=Lr(),o=r.firstChild;r.style.setProperty("margin-left","50px");return"function"==typeof t?fe(t,o):t=o,o.style.setProperty("border-radius","6px"),ge(r,W(Z,{get when(){return e.showAvatar},get children(){return W(pr,{get initialAvatarSrc(){return e.avatarSrc}})}}),null),R((t=>{var r=e.backgroundColor??"#3B81F6",i=e.textColor??"#ffffff";return r!==t._v$&&(null!=(t._v$=r)?o.style.setProperty("background-color",r):o.style.removeProperty("background-color")),i!==t._v$2&&(null!=(t._v$2=i)?o.style.setProperty("color",i):o.style.removeProperty("color")),t}),{_v$:void 0,_v$2:void 0}),r}}),$r=ae('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="19px"><path d="M476.59 227.05l-.16-.07L49.35 49.84A23.56 23.56 0 0027.14 52 24.65 24.65 0 0016 72.59v113.29a24 24 0 0019.52 23.57l232.93 43.07a4 4 0 010 7.86L35.53 303.45A24 24 0 0016 327v113.31A23.57 23.57 0 0026.59 460a23.94 23.94 0 0013.22 4 24.55 24.55 0 009.52-1.93L476.4 285.94l.19-.09a32 32 0 000-58.8z">'),Br=e=>{return pe(t=$r(),K({get style(){return{fill:e.color??"#3B81F6"}}},e),!0,!0),t;var t},Or=ae('<button type="submit">'),Mr=ae('<svg><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">'),Ir=e=>{return pe(t=Or(),K({get disabled(){return e.isDisabled||e.isLoading}},e,{get class(){return"py-2 px-4 justify-center font-semibold text-white focus:outline-none flex items-center disabled:opacity-50 disabled:cursor-not-allowed disabled:brightness-100 transition-all filter hover:brightness-90 active:brightness-75 chatbot-button "+e.class},style:{background:"transparent",border:"none"}}),!1,!0),ge(t,W(Z,{get when(){return!e.isLoading},get fallback(){return W(jr,{class:"text-white"})},get children(){return W(Br,{get color(){return e.sendButtonColor},get class(){return"send-icon flex "+(e.disableIcon?"hidden":"")}})}})),t;var t},jr=e=>{return pe(t=Mr(),K(e,{get class(){return"animate-spin -ml-1 mr-3 h-5 w-5 "+e.class},xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","data-testid":"loading-spinner"}),!0,!0),t;var t},zr=ae('<div class="flex items-center"><div class="w-2 h-2 mr-1 rounded-full bubble1"></div><div class="w-2 h-2 mr-1 rounded-full bubble2"></div><div class="w-2 h-2 rounded-full bubble3">'),Dr=()=>zr(),Nr=ae('<div class="flex justify-start mb-2 items-start animate-fade-in host-container"><span class="px-4 py-4 ml-2 whitespace-pre-wrap max-w-full chatbot-host-bubble" data-testid="host-bubble">'),qr=()=>{return ge((e=Nr()).firstChild,W(Dr,{})),e;var e},Ur=ae('<input id="message-input-field" class="focus:outline-none bg-transparent px-4 py-4 flex-1 w-full text-input">'),Fr=e=>{const[t,r]=X(e,["ref","onInput"]);return(o=Ur()).$$input=e=>t.onInput(e.currentTarget.value),"function"==typeof(i=e.ref)?fe(i,o):e.ref=o,pe(o,K({get type(){return e.type??"text"},get style(){return{"font-size":e.fontSize?e.fontSize+"px":"16px"}}},r),!1,!1),o;var o,i},Hr=(le(["input"]),ae('<form><div class="overflow-auto rounded-lg py-3 px-4 my-4 max-w-sm ml-2"><div class="flex space-x-3"><div class="flex-1 gap-4"><div class="text-inherit text-left"><div class="min-w-[16rem]"><div class="flex justify-between mb-4"><h4 class="pr-8">To offer you top-notch support and stay connected, may we kindly request your email address?</h4></div><div class="mb-4"></div><div class="flex justify-center items-end"><button class="text-sm px-3 py-2 rounded-md font-bold">Let\'s Chat! ')),Gr=ae('<div class="mb-5"><label class="block text-sm font-medium mb-1"></label><div class="flex w-full rounded bg-white">'),Wr=e=>{const[t,r]=C({});let o;S((()=>{o?.focus()}),[]);const i=(e,t)=>{r((r=>({...r,[e]:t})))};{const r=Hr(),n=r.firstChild,s=n.firstChild.firstChild.firstChild.firstChild.firstChild.nextSibling,a=s.nextSibling.firstChild;return r.addEventListener("submit",(r=>{r.preventDefault(),r.stopPropagation(),e.onSubmit(t())})),ge(s,(()=>e?.formFields?.map(((e,t)=>{return s=(n=(r=Gr()).firstChild).nextSibling,ge(n,(()=>e.field_name)),ge(s,W(Fr,0==t?{ref(e){"function"==typeof o?o(e):o=e},onInput:t=>i(e.field_name,t),get type(){return"email"===e.field_name.toLowerCase()?"email":"text"},get required(){return e.is_required},fontSize:16,get placeholder(){return"Type your "+e.field_name.toLowerCase()}}:{ref(e){},onInput:t=>i(e.field_name,t),fontSize:16,get placeholder(){return"Type your "+e.field_name.toLowerCase()}})),r;var r,n,s})))),R((t=>{var r=e.backgroundColor??"#f7f8ff",o=e.textColor??"#000",i=e.submitButtonBackground??"rgb(59, 129, 246)",s=e.submitButtonTextColor??"#fff";return r!==t._v$&&(null!=(t._v$=r)?n.style.setProperty("background-color",r):n.style.removeProperty("background-color")),o!==t._v$2&&(null!=(t._v$2=o)?n.style.setProperty("color",o):n.style.removeProperty("color")),i!==t._v$3&&(null!=(t._v$3=i)?a.style.setProperty("background",i):a.style.removeProperty("background")),s!==t._v$4&&(null!=(t._v$4=s)?a.style.setProperty("color",s):a.style.removeProperty("color")),t}),{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),r}},Vr=ae('<div class="flex justify-start mb-2 items-start animate-fade-in host-container hover:brightness-90 active:brightness-75"><span class="px-2 py-1 ml-1 whitespace-pre-wrap max-w-full hover:bg-blue-200 hover:bg-opacity-25" data-testid="host-bubble">'),Yr="rgb(59, 129, 246)",Jr=e=>{{const t=Vr(),r=t.firstChild;return t.$$click=()=>e.onOptionClick?.(),r.style.setProperty("font-size","14px"),r.style.setProperty("border-radius","15px"),r.style.setProperty("border","1px solid"),r.style.setProperty("cursor","pointer"),r.style.setProperty("text-overflow","ellipsis"),r.style.setProperty("overflow","hidden"),r.style.setProperty("white-space","nowrap"),ge(r,(()=>e.topic_name)),R((t=>{var o=e.backgroundColor??Yr,i=e.backgroundColor??Yr;return o!==t._v$&&(null!=(t._v$=o)?r.style.setProperty("border-color",o):r.style.removeProperty("border-color")),i!==t._v$2&&(null!=(t._v$2=i)?r.style.setProperty("color",i):r.style.removeProperty("color")),t}),{_v$:void 0,_v$2:void 0}),t}};le(["click"]);var Kr=()=>{},Xr=(e,t)=>t();function Qr(e,t){var r=A(e);const{onEnter:o=Xr,onExit:i=Xr}=t,[n,s]=C(t.appear?[]:r?[r]:[]),[a]=[w,E];let l,c=!1;function d(e,t){if(!e)return t&&t();c=!0,i(e,(()=>{T((()=>{c=!1,s((t=>t.filter((t=>t!==e)))),t&&t()}))}))}function h(e){const t=l;if(!t)return e&&e();l=void 0,s((e=>[t,...e])),o(t,e??Kr)}const p="out-in"===t.mode?e=>c||d(e,h):"in-out"===t.mode?e=>h((()=>d(e))):e=>{d(e),h()};return function(e,t,r){O(M(e,t,!0,u))}((t=>{var r=e();return A(a)?(a(),t):(r!==t&&(l=r,T((()=>A((()=>p(t)))))),r)}),t.appear?void 0:r),n}var Zr=e=>e instanceof Element;function eo(e,t){if(t(e))return e;if("function"==typeof e&&!e.length)return eo(e(),t);if(Array.isArray(e))for(const o of e){var r=eo(o,t);if(r)return r}return null}function to(e,t=Zr,r){const o=_(e);return _((()=>eo(o(),t)))}function ro(e){requestAnimationFrame((()=>requestAnimationFrame(e)))}var oo={inout:"in-out",outin:"out-in"},io=e=>{const t=(r=e,_((()=>{var e=r.name||"s";return{enterActive:(r.enterActiveClass||e+"-enter-active").split(" "),enter:(r.enterClass||e+"-enter").split(" "),enterTo:(r.enterToClass||e+"-enter-to").split(" "),exitActive:(r.exitActiveClass||e+"-exit-active").split(" "),exit:(r.exitClass||e+"-exit").split(" "),exitTo:(r.exitToClass||e+"-exit-to").split(" "),move:(r.moveClass||e+"-move").split(" ")}})));var r;return Qr(to((()=>e.children)),{mode:oo[e.mode],appear:e.appear,onEnter(r,o){!function(e,t,r,o){const{onBeforeEnter:i,onEnter:n,onAfterEnter:s}=t;function a(t){t&&t.target!==r||(o?.(),r.removeEventListener("transitionend",a),r.removeEventListener("animationend",a),r.classList.remove(...e.enterActive),r.classList.remove(...e.enterTo),s?.(r))}i?.(r),r.classList.add(...e.enter),r.classList.add(...e.enterActive),queueMicrotask((()=>{if(!r.parentNode)return o?.();n?.(r,(()=>a()))})),ro((()=>{r.classList.remove(...e.enter),r.classList.add(...e.enterTo),(!n||n.length<2)&&(r.addEventListener("transitionend",a),r.addEventListener("animationend",a))}))}(t(),e,r,o)},onExit(r,o){!function(e,t,r,o){const{onBeforeExit:i,onExit:n,onAfterExit:s}=t;if(!r.parentNode)return o?.();function a(t){t&&t.target!==r||(o?.(),r.removeEventListener("transitionend",a),r.removeEventListener("animationend",a),r.classList.remove(...e.exitActive),r.classList.remove(...e.exitTo),s?.(r))}i?.(r),r.classList.add(...e.exit),r.classList.add(...e.exitActive),n?.(r,(()=>a())),ro((()=>{r.classList.remove(...e.exit),r.classList.add(...e.exitTo),(!n||n.length<2)&&(r.addEventListener("transitionend",a),r.addEventListener("animationend",a))}))}(t(),e,r,o)}})};const no=ae('<div class="px-2 ml-2 mb-4 mt-1 flex items-center gap-2">'),so=ae('<svg height="22px" width="22px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 53.867 53.867" class="cursor-pointer transition-colors duration-300 ease-in-out"><polygon points="26.934,1.318 35.256,18.182 53.867,20.887 40.4,34.013 43.579,52.549 26.934,43.798 10.288,52.549 13.467,34.013 0,20.887 18.611,18.182">'),ao=ae('<div class="fixed inset-0 flex items-center justify-center z-[99999] bg-[rgba(0,0,0,0.4)]"><div class="bg-white p-4 rounded shadow-md flex flex-col gap-3 w-3/4"><h2 class="text-xl font-semibold mb-2">Share your feedback</h2><textarea class="h-28 text-sm p-1 border border-gray-300 rounded-lg" placeholder="We\'re eager to hear from you  start typing!"></textarea><div class="text-right"><button class="text-sm mt-4 px-4 py-1 mr-2 rounded">Close</button><button class="text-sm mt-4 px-4 py-1 rounded">Submit'),lo=e=>{const[t,r]=C(0),[o,i]=C(!1),[n,s]=C([]),[a,l]=C(""),[c,d]=C(-1),u=()=>{s([...n(),c()]),i(!1),d(-1),e.onSubmitReview({rating:t(),feedback:a()}),l("")},h=(L((()=>{r(0),i(!1)})),()=>{s([...n(),c()]),e.onSubmitReview({rating:t(),feedback:""}),l(""),d(-1),i(!1)});return(p=no()).style.setProperty("margin-right","50px"),ge(p,(()=>[1,2,3,4,5].map((o=>{{const s=so(),a=s.firstChild;return s.$$click=()=>{n().includes(e.messageIndex)||(async(e,t)=>{r(e),d(t),i(!0)})(o,e.messageIndex)},R((r=>{var i=t()>=o?`fill:${e.backgroundColor??"#EFCE4A"};`:"fill:#FFF;stroke:#9095a0;stroke-width:2;",n=t()>=o?`fill:${e.backgroundColor};}`??"fill:#EFCE4A":"fill:#FFF;stroke:#9095a0;stroke-width:2;";return r._v$=he(s,i,r._v$),r._v$2=he(a,n,r._v$2),r}),{_v$:void 0,_v$2:void 0}),s}}))),null),ge(p,W(io,{onEnter:(e,t)=>{e.animate([{opacity:0},{opacity:1}],{duration:200}).finished.then(t)},onExit:(e,t)=>{e.animate([{opacity:1},{opacity:0}],{duration:200}).finished.then(t)},get children(){if(_((()=>!!o()))()){const t=ao(),r=t.firstChild.firstChild.nextSibling,o=r.nextSibling.firstChild,i=o.nextSibling;return r.addEventListener("change",(e=>l(e.target.value))),o.addEventListener("click",h),i.addEventListener("click",u),R((t=>{var r=e.backgroundColor,n="1px solid "+e.backgroundColor,s=e.backgroundColor,a=e.textColor;return r!==t._v$3&&(null!=(t._v$3=r)?o.style.setProperty("color",r):o.style.removeProperty("color")),n!==t._v$4&&(null!=(t._v$4=n)?o.style.setProperty("border",n):o.style.removeProperty("border")),s!==t._v$5&&(null!=(t._v$5=s)?i.style.setProperty("background-color",s):i.style.removeProperty("background-color")),a!==t._v$6&&(null!=(t._v$6=a)?i.style.setProperty("color",a):i.style.removeProperty("color")),t}),{_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0}),R((()=>r.value=a())),t}return null}}),null),p;var p},co=(le(["click"]),ae('<div data-modal-target="defaultModal" data-modal-toggle="defaultModal" class="flex justify-start mb-2 items-start animate-fade-in host-container hover:brightness-90 active:brightness-75"><span class="px-2 py-1 ml-1 whitespace-pre-wrap max-w-full chatbot-host-bubble" data-testid="host-bubble">')),uo=e=>{return r=(t=co()).firstChild,t.$$click=()=>e.onSourceClick?.(),r.style.setProperty("width","max-content"),r.style.setProperty("max-width","80px"),r.style.setProperty("font-size","13px"),r.style.setProperty("border-radius","15px"),r.style.setProperty("cursor","pointer"),r.style.setProperty("text-overflow","ellipsis"),r.style.setProperty("overflow","hidden"),r.style.setProperty("white-space","nowrap"),ge(r,(()=>e.pageContent)),t;var t,r},ho=(le(["click"]),ae('<div class="w-full h-16 py-3 flex px-6 items-center z-[999]"><div class="pr-3"><img></div><div class="flex-1"><div class="font-bold"></div><div class="text-[13px]"></div></div><div class="hidden sm:block">')),po=ae('<div class="cursor-pointer">View Menu'),fo=ae('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" style="width:1.5em;height:1.5em;vertical-align:middle;fill:currentColor;overflow:hidden;rotate:90deg;"><path d="m4 18v2h6.586l-8.586 8.582 1.414 1.418 8.586-8.586v6.586h2v-10z"></path><path d="m30 3.416-1.408-1.416-8.592 8.586v-6.586h-2v10h10v-2h-6.586z"></path><path d="m0 0h32v32h-32z" fill="none" transform="matrix(-1 0 0 -1 32 32)">'),go=ae('<svg xmlns="http://www.w3.org/2000/svg" class="svg-icon" style="width:1.5em;height:1.5em;vertical-align:middle;fill:currentColor;overflow:hidden;rotate:90deg;" viewBox="0 0 1024 1024" version="1.1"><path d="M597.34016 554.33216q17.67424 0 30.33088 12.67712l268.32896 268.32896 0-195.66592q0-17.67424 12.4928-30.16704t30.16704-12.4928 30.16704 12.4928 12.4928 30.16704l0 298.65984q0 17.67424-12.67712 30.33088t-30.33088 12.67712l-298.65984 0q-17.67424 0-30.16704-12.4928t-12.4928-30.16704 12.4928-30.16704 30.16704-12.4928l195.66592 0-268.32896-268.32896q-12.32896-13.0048-12.32896-30.33088 0-17.67424 12.4928-30.33088t30.16704-12.67712zM85.34016 42.65984l298.65984 0q17.67424 0 30.16704 12.4928t12.4928 30.16704-12.4928 30.16704-30.16704 12.4928l-195.66592 0 268.32896 268.00128q12.67712 12.67712 12.67712 30.33088t-12.67712 30.16704-30.33088 12.4928q-16.9984 0-30.33088-12.32896l-268.00128-268.32896 0 195.66592q0 17.67424-12.4928 30.16704t-30.16704 12.4928-30.16704-12.4928-12.4928-30.16704l0-298.65984q0-17.67424 12.4928-30.16704t30.16704-12.4928z">'),mo=e=>{{const t=ho(),r=t.firstChild,o=r.firstChild,i=r.nextSibling,n=i.firstChild,s=n.nextSibling,a=i.nextSibling;return n.style.setProperty("line-height","1.5"),ge(n,(()=>e.title??"AI Assistant")),s.style.setProperty("line-height","1"),ge(s,(()=>e.subTitle??"Ask me anything..!")),ge(t,(()=>{const t=_((()=>!!e.isViewTopic));return()=>{return t()?(ue(r=po(),"click",e.gotoTopic,!0),r):null;var r}})(),a),a.style.setProperty("margin-left","10px"),a.style.setProperty("cursor","pointer"),a.addEventListener("click",e.onMax),ge(a,(()=>{const t=_((()=>!!e.isMax));return()=>(t()?fo:go)()})()),R((r=>{var i=e.backgroundColor??"rgb(59, 129, 246)",n=e.textColor??"#fff",s=e.avatar??"https://cdn-icons-png.flaticon.com/512/4712/4712035.png",a=e.avatarStyle??{width:"36px"};return i!==r._v$&&(null!=(r._v$=i)?t.style.setProperty("background-color",i):t.style.removeProperty("background-color")),n!==r._v$2&&(null!=(r._v$2=n)?t.style.setProperty("color",n):t.style.removeProperty("color")),s!==r._v$3&&ce(o,"src",r._v$3=s),r._v$4=he(o,a,r._v$4),r}),{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),t}};le(["click"]);var bo="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},vo={exports:{}},yo=(function(e){function t(e,i){if(!e)throw"First parameter is required.";i=new r(e,i=i||{type:"video"});var n=this;function s(t){t&&(i.initCallback=function(){t(),t=i.initCallback=null});var r=new o(e,i);(p=new r(e,i)).record(),h("recording"),i.disableLogs||console.log("Initialized recorderType:",p.constructor.name,"for output-type:",i.type)}function a(e){function t(t){if(p){Object.keys(p).forEach((function(e){"function"!=typeof p[e]&&(n[e]=p[e])}));var r,o=p.blob;if(!o){if(!t)throw"Recording failed.";p.blob=o=t}if(o&&!i.disableLogs&&console.log(o.type,"->",m(o.size)),e){try{r=c.createObjectURL(o)}catch(t){}"function"==typeof e.call?e.call(n,r):e(r)}i.autoWriteToDisk&&d((function(e){var t={};t[i.type+"Blob"]=e,L.Store(t)}))}else"function"==typeof e.call?e.call(n,""):e("")}e=e||function(){},p?"paused"===n.state?(n.resumeRecording(),setTimeout((function(){a(e)}),1)):("recording"===n.state||i.disableLogs||console.warn('Recording state should be: "recording", however current state is: ',n.state),i.disableLogs||console.log("Stopped recording "+i.type+" stream."),"gif"!==i.type?p.stop(t):(p.stop(),t()),h("stopped")):g()}function l(e){postMessage((new FileReaderSync).readAsDataURL(e))}function d(e,t){if(!e)throw"Pass a callback function over getDataURL.";var r,o=(t||p||{}).blob;o?"undefined"==typeof Worker||navigator.mozGetUserMedia?((r=new FileReader).readAsDataURL(o),r.onload=function(t){e(t.target.result)}):((r=function(e){try{var t=c.createObjectURL(new Blob([e.toString(),"this.onmessage =  function (eee) {"+e.name+"(eee.data);}"],{type:"application/javascript"})),r=new Worker(t);return c.revokeObjectURL(t),r}catch(e){}}(l)).onmessage=function(t){e(t.data)},r.postMessage(o)):(i.disableLogs||console.warn("Blob encoder did not finish its job yet."),setTimeout((function(){d(e,t)}),1e3))}function u(e){e=e||0,"paused"===n.state?setTimeout((function(){u(e)}),1e3):"stopped"!==n.state&&(e>=n.recordingDuration?a(n.onRecordingStopped):(e+=1e3,setTimeout((function(){u(e)}),1e3)))}function h(e){n&&(n.state=e,"function"==typeof n.onStateChanged.call?n.onStateChanged.call(n,e):n.onStateChanged(e))}var p,f='It seems that recorder is destroyed or "startRecording" is not invoked for '+i.type+" recorder.";function g(){!0!==i.disableLogs&&console.warn(f)}var v,y={startRecording:function(t){return i.disableLogs||console.log("RecordRTC version: ",n.version),(i=t?new r(e,t):i).disableLogs||console.log("started recording "+i.type+" stream."),p?(p.clearRecordedData(),p.record(),h("recording"),n.recordingDuration&&u()):s((function(){n.recordingDuration&&u()})),n},stopRecording:a,pauseRecording:function(){p?"recording"!==n.state?i.disableLogs||console.warn("Unable to pause the recording. Recording state: ",n.state):(h("paused"),p.pause(),i.disableLogs||console.log("Paused recording.")):g()},resumeRecording:function(){p?"paused"!==n.state?i.disableLogs||console.warn("Unable to resume the recording. Recording state: ",n.state):(h("recording"),p.resume(),i.disableLogs||console.log("Resumed recording.")):g()},initRecorder:s,setRecordingDuration:function(e,t){if(void 0===e)throw"recordingDuration is required.";if("number"!=typeof e)throw"recordingDuration must be a number.";return n.recordingDuration=e,n.onRecordingStopped=t||function(){},{onRecordingStopped:function(e){n.onRecordingStopped=e}}},clearRecordedData:function(){p?(p.clearRecordedData(),i.disableLogs||console.log("Cleared old recorded data.")):g()},getBlob:function(){if(p)return p.blob;g()},getDataURL:d,toURL:function(){if(p)return c.createObjectURL(p.blob);g()},getInternalRecorder:function(){return p},save:function(e){p?b(p.blob,e):g()},getFromDisk:function(e){p?t.getFromDisk(i.type,e):g()},setAdvertisementArray:function(e){i.advertisement=[];for(var t=e.length,r=0;r<t;r++)i.advertisement.push({duration:r,image:e[r]})},blob:null,bufferSize:0,sampleRate:0,buffer:null,reset:function(){"recording"!==n.state||i.disableLogs||console.warn("Stop an active recorder."),p&&"function"==typeof p.clearRecordedData&&p.clearRecordedData(),p=null,h("inactive"),n.blob=null},onStateChanged:function(e){i.disableLogs||console.log("Recorder state changed:",e)},state:"inactive",getState:function(){return n.state},destroy:function(){var e=i.disableLogs;i={disableLogs:!0},n.reset(),h("destroyed"),y=n=null,x.AudioContextConstructor&&(x.AudioContextConstructor.close(),x.AudioContextConstructor=null),i.disableLogs=e,i.disableLogs||console.log("RecordRTC is destroyed.")},version:"5.6.2"};if(!this)return n=y;for(v in y)this[v]=y[v];return n=this,y}function r(e,t){return t.recorderType||t.type||(t.audio&&t.video?t.type="video":t.audio&&!t.video&&(t.type="audio")),t.recorderType&&!t.type&&(t.recorderType===_||t.recorderType===S||void 0!==O&&t.recorderType===O?t.type="video":t.recorderType===E?t.type="gif":t.recorderType===R?t.type="audio":t.recorderType===C&&(y(e,"audio").length&&y(e,"video").length||!y(e,"audio").length&&y(e,"video").length?t.type="video":y(e,"audio").length&&!y(e,"video").length&&(t.type="audio"))),void 0!==C&&"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&(t.mimeType||(t.mimeType="video/webm"),t.type||(t.type=t.mimeType.split("/")[0]),t.bitsPerSecond),t.type||(t.mimeType&&(t.type=t.mimeType.split("/")[0]),t.type)||(t.type="audio"),t}function o(e,t){var r;return(p||d||u)&&(r=R),"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&!p&&(r=C),"video"===t.type&&(p||u)&&(r=_,void 0!==O)&&"undefined"!=typeof ReadableStream&&(r=O),"gif"===t.type&&(r=E),"canvas"===t.type&&(r=S),k()&&r!==S&&r!==E&&"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&(y(e,"video").length||y(e,"audio").length)&&("audio"===t.type?"function"==typeof MediaRecorder.isTypeSupported&&MediaRecorder.isTypeSupported("audio/webm")&&(r=C):"function"==typeof MediaRecorder.isTypeSupported&&MediaRecorder.isTypeSupported("video/webm")&&(r=C)),e instanceof Array&&e.length&&(r=B),t.recorderType&&(r=t.recorderType),!t.disableLogs&&r&&r.name&&console.log("Using recorderType:",r.name||r.constructor.name),!r&&f?C:r}function i(e){this.addStream=function(t){t&&(e=t)},this.mediaType={audio:!0,video:!0},this.startRecording=function(){var r,o,i,n,s=this.mediaType,a=this.mimeType||{audio:null,video:null,gif:null};if("function"!=typeof s.audio&&k()&&!y(e,"audio").length&&(s.audio=!1),"function"!=typeof s.video&&k()&&!y(e,"video").length&&(s.video=!1),"function"!=typeof s.gif&&k()&&!y(e,"video").length&&(s.gif=!1),!s.audio&&!s.video&&!s.gif)throw"MediaStream must have either audio or video tracks.";s.audio&&(r=null,"function"==typeof s.audio&&(r=s.audio),this.audioRecorder=new t(e,{type:"audio",bufferSize:this.bufferSize,sampleRate:this.sampleRate,numberOfAudioChannels:this.numberOfAudioChannels||2,disableLogs:this.disableLogs,recorderType:r,mimeType:a.audio,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp}),s.video||this.audioRecorder.startRecording()),s.video&&(r=null,"function"==typeof s.video&&(r=s.video),o=e,k()&&s.audio&&"function"==typeof s.audio&&(n=y(e,"video")[0],h?((o=new g).addTrack(n),r&&r===_&&(r=C)):(o=new g).addTrack(n)),this.videoRecorder=new t(o,{type:"video",video:this.video,canvas:this.canvas,frameInterval:this.frameInterval||10,disableLogs:this.disableLogs,recorderType:r,mimeType:a.video,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp,workerPath:this.workerPath,webAssemblyPath:this.webAssemblyPath,frameRate:this.frameRate,bitrate:this.bitrate}),s.audio||this.videoRecorder.startRecording()),s.audio&&s.video&&(i=this,n=!0===k(),!0===(n=!(s.audio instanceof R&&s.video||!0!==s.audio&&!0!==s.video&&s.audio!==s.video)&&n)?(i.audioRecorder=null,i.videoRecorder.startRecording()):i.videoRecorder.initRecorder((function(){i.audioRecorder.initRecorder((function(){i.videoRecorder.startRecording(),i.audioRecorder.startRecording()}))}))),s.gif&&(r=null,"function"==typeof s.gif&&(r=s.gif),this.gifRecorder=new t(e,{type:"gif",frameRate:this.frameRate||200,quality:this.quality||10,disableLogs:this.disableLogs,recorderType:r,mimeType:a.gif}),this.gifRecorder.startRecording())},this.stopRecording=function(e){e=e||function(){},this.audioRecorder&&this.audioRecorder.stopRecording((function(t){e(t,"audio")})),this.videoRecorder&&this.videoRecorder.stopRecording((function(t){e(t,"video")})),this.gifRecorder&&this.gifRecorder.stopRecording((function(t){e(t,"gif")}))},this.pauseRecording=function(){this.audioRecorder&&this.audioRecorder.pauseRecording(),this.videoRecorder&&this.videoRecorder.pauseRecording(),this.gifRecorder&&this.gifRecorder.pauseRecording()},this.resumeRecording=function(){this.audioRecorder&&this.audioRecorder.resumeRecording(),this.videoRecorder&&this.videoRecorder.resumeRecording(),this.gifRecorder&&this.gifRecorder.resumeRecording()},this.getBlob=function(e){var t={};return this.audioRecorder&&(t.audio=this.audioRecorder.getBlob()),this.videoRecorder&&(t.video=this.videoRecorder.getBlob()),this.gifRecorder&&(t.gif=this.gifRecorder.getBlob()),e&&e(t),t},this.destroy=function(){this.audioRecorder&&(this.audioRecorder.destroy(),this.audioRecorder=null),this.videoRecorder&&(this.videoRecorder.destroy(),this.videoRecorder=null),this.gifRecorder&&(this.gifRecorder.destroy(),this.gifRecorder=null)},this.getDataURL=function(e){function t(e,t){var r;"undefined"!=typeof Worker?((r=function(e){e=c.createObjectURL(new Blob([e.toString(),"this.onmessage =  function (eee) {"+e.name+"(eee.data);}"],{type:"application/javascript"}));var t,r=new Worker(e);if(void 0!==c)t=c;else{if("undefined"==typeof webkitURL)throw"Neither URL nor webkitURL detected.";t=webkitURL}return t.revokeObjectURL(e),r}((function(e){postMessage((new FileReaderSync).readAsDataURL(e))}))).onmessage=function(e){t(e.data)},r.postMessage(e)):((r=new FileReader).readAsDataURL(e),r.onload=function(e){t(e.target.result)})}this.getBlob((function(r){r.audio&&r.video?t(r.audio,(function(o){t(r.video,(function(t){e({audio:o,video:t})}))})):r.audio?t(r.audio,(function(t){e({audio:t})})):r.video&&t(r.video,(function(t){e({video:t})}))}))},this.writeToDisk=function(){t.writeToDisk({audio:this.audioRecorder,video:this.videoRecorder,gif:this.gifRecorder})},this.save=function(e){(e=e||{audio:!0,video:!0,gif:!0}).audio&&this.audioRecorder&&this.audioRecorder.save("string"==typeof e.audio?e.audio:""),e.video&&this.videoRecorder&&this.videoRecorder.save("string"==typeof e.video?e.video:""),e.gif&&this.gifRecorder&&this.gifRecorder.save("string"==typeof e.gif?e.gif:"")}}t.version="5.6.2",(e.exports=t).getFromDisk=function(e,t){if(!t)throw"callback is mandatory.";console.log("Getting recorded "+("all"===e?"blobs":e+" blob ")+" from disk!"),L.Fetch((function(r,o){"all"!==e&&o===e+"Blob"&&t&&t(r),"all"===e&&t&&t(r,o.replace("Blob",""))}))},t.writeToDisk=function(e){console.log("Writing recorded blob(s) to disk!"),(e=e||{}).audio&&e.video&&e.gif?e.audio.getDataURL((function(t){e.video.getDataURL((function(r){e.gif.getDataURL((function(e){L.Store({audioBlob:t,videoBlob:r,gifBlob:e})}))}))})):e.audio&&e.video?e.audio.getDataURL((function(t){e.video.getDataURL((function(e){L.Store({audioBlob:t,videoBlob:e})}))})):e.audio&&e.gif?e.audio.getDataURL((function(t){e.gif.getDataURL((function(e){L.Store({audioBlob:t,gifBlob:e})}))})):e.video&&e.gif?e.video.getDataURL((function(t){e.gif.getDataURL((function(e){L.Store({videoBlob:t,gifBlob:e})}))})):e.audio?e.audio.getDataURL((function(e){L.Store({audioBlob:e})})):e.video?e.video.getDataURL((function(e){L.Store({videoBlob:e})})):e.gif&&e.gif.getDataURL((function(e){L.Store({gifBlob:e})}))},i.getFromDisk=t.getFromDisk,i.writeToDisk=t.writeToDisk,void 0!==t&&(t.MRecordRTC=i),(l=void 0!==bo?bo:null)&&"undefined"==typeof window&&void 0!==bo&&(bo.navigator={userAgent:"Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45",getUserMedia:function(){}},bo.console||(bo.console={}),void 0!==bo.console.log&&void 0!==bo.console.error||(bo.console.error=bo.console.log=bo.console.log||function(){console.log(arguments)}),"undefined"==typeof document&&(l.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var e={getContext:function(){return e},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""},style:{}};return e},l.HTMLVideoElement=function(){}),"undefined"==typeof location&&(l.location={protocol:"file:",href:"",hash:""}),"undefined"==typeof screen&&(l.screen={width:0,height:0}),void 0===c&&(l.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),l.window=bo);var n,s=window.requestAnimationFrame,a=(void 0===s&&("undefined"!=typeof webkitRequestAnimationFrame?s=webkitRequestAnimationFrame:"undefined"!=typeof mozRequestAnimationFrame?s=mozRequestAnimationFrame:"undefined"!=typeof msRequestAnimationFrame?s=msRequestAnimationFrame:void 0===s&&(n=0,s=function(e,t){var r=(new Date).getTime(),o=Math.max(0,16-(r-n)),i=setTimeout((function(){e(r+o)}),o);return n=r+o,i})),window.cancelAnimationFrame),l=(void 0===a&&("undefined"!=typeof webkitCancelAnimationFrame?a=webkitCancelAnimationFrame:"undefined"!=typeof mozCancelAnimationFrame?a=mozCancelAnimationFrame:"undefined"!=typeof msCancelAnimationFrame?a=msCancelAnimationFrame:void 0===a&&(a=function(e){clearTimeout(e)})),window.AudioContext),c=(void 0===l&&("undefined"!=typeof webkitAudioContext&&(l=webkitAudioContext),"undefined"!=typeof mozAudioContext)&&(l=mozAudioContext),window.URL),d=(void 0===c&&"undefined"!=typeof webkitURL&&(c=webkitURL),"undefined"!=typeof navigator&&void 0===navigator.getUserMedia&&(void 0!==navigator.webkitGetUserMedia&&(navigator.getUserMedia=navigator.webkitGetUserMedia),void 0!==navigator.mozGetUserMedia)&&(navigator.getUserMedia=navigator.mozGetUserMedia),!(-1===navigator.userAgent.indexOf("Edge")||!navigator.msSaveBlob&&!navigator.msSaveOrOpenBlob)),u=!!window.opera||-1!==navigator.userAgent.indexOf("OPR/"),h=-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&"netscape"in window&&/ rv:/.test(navigator.userAgent),p=!u&&!d&&!!navigator.webkitGetUserMedia||v()||-1!==navigator.userAgent.toLowerCase().indexOf("chrome/"),f=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),g=(f&&!p&&-1!==navigator.userAgent.indexOf("CriOS")&&(p=!(f=!1)),window.MediaStream);function m(e){var t;return 0===e?"0 Bytes":(t=parseInt(Math.floor(Math.log(e)/Math.log(1e3)),10),(e/Math.pow(1e3,t)).toPrecision(3)+" "+["Bytes","KB","MB","GB","TB"][t])}function b(e,t){if(!e)throw"Blob object is required.";if(!e.type)try{e.type="video/webm"}catch(e){}var r=(e.type||"video/webm").split("/")[1],o=(-1!==r.indexOf(";")&&(r=r.split(";")[0]),t&&-1!==t.indexOf(".")&&(t=(o=t.split("."))[0],r=o[1]),(t||Math.round(9999999999*Math.random())+888888888)+"."+r);return void 0!==navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(e,o):void 0!==navigator.msSaveBlob?navigator.msSaveBlob(e,o):((t=document.createElement("a")).href=c.createObjectURL(e),t.download=o,t.style="display:none;opacity:0;color:transparent;",(document.body||document.documentElement).appendChild(t),"function"==typeof t.click?t.click():(t.target="_blank",t.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))),void c.revokeObjectURL(t.href))}function v(){return"undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type||!("undefined"==typeof process||"object"!=typeof process.versions||!process.versions.electron)||"object"==typeof navigator&&"string"==typeof navigator.userAgent&&0<=navigator.userAgent.indexOf("Electron")}function y(e,t){return e&&e.getTracks?e.getTracks().filter((function(e){return e.kind===(t||"audio")})):[]}function w(e,t){!("srcObject"in t)&&"mozSrcObject"in t?t.mozSrcObject=e:t.srcObject=e}void 0!==(g=void 0===g&&"undefined"!=typeof webkitMediaStream?webkitMediaStream:g)&&void 0===g.prototype.stop&&(g.prototype.stop=function(){this.getTracks().forEach((function(e){e.stop()}))}),void 0!==t&&(t.invokeSaveAsDialog=b,t.getTracks=y,t.getSeekableBlob=function(e,t){if("undefined"==typeof EBML)throw new Error("Please link: https://www.webrtc-experiment.com/EBML.js");var r=new EBML.Reader,o=new EBML.Decoder,i=EBML.tools,n=new FileReader;n.onload=function(e){o.decode(this.result).forEach((function(e){r.read(e)})),r.stop();var n=i.makeMetadataSeekable(r.metadatas,r.duration,r.cues),s=this.result.slice(r.metadataSize);n=new Blob([n,s],{type:"video/webm"});t(n)},n.readAsArrayBuffer(e)},t.bytesToSize=m,t.isElectron=v);var x={};function k(){var e,t,r,o;return!!(h||f||d)||(o=navigator.userAgent,e=""+parseFloat(navigator.appVersion),t=parseInt(navigator.appVersion,10),(p||u)&&(r=o.indexOf("Chrome"),e=o.substring(r+7)),-1!==(o=(e=-1!==(o=e.indexOf(";"))?e.substring(0,o):e).indexOf(" "))&&(e=e.substring(0,o)),t=parseInt(""+e,10),isNaN(t)&&(e=""+parseFloat(navigator.appVersion),t=parseInt(navigator.appVersion,10)),49<=t)}function C(e,t){var r,o=this;if(void 0===e)throw'First argument "MediaStream" is required.';if("undefined"==typeof MediaRecorder)throw"Your browser does not support the Media Recorder API. Please try other modules e.g. WhammyRecorder or StereoAudioRecorder.";"audio"===(t=t||{mimeType:"video/webm"}).type&&(y(e,"video").length&&y(e,"audio").length&&(navigator.mozGetUserMedia?(r=new g).addTrack(y(e,"audio")[0]):r=new g(y(e,"audio")),e=r),t.mimeType&&-1!==t.mimeType.toString().toLowerCase().indexOf("audio")||(t.mimeType=p?"audio/webm":"audio/ogg"),t.mimeType)&&"audio/ogg"!==t.mimeType.toString().toLowerCase()&&navigator.mozGetUserMedia&&(t.mimeType="audio/ogg");var i,n=[];function s(){o.timestamps.push((new Date).getTime()),"function"==typeof t.onTimeStamp&&t.onTimeStamp(o.timestamps[o.timestamps.length-1],o.timestamps)}function a(e){return i&&i.mimeType?i.mimeType:e.mimeType||"video/webm"}function l(){n=[],i=null,o.timestamps=[]}this.getArrayOfBlobs=function(){return n},this.record=function(){o.blob=null,o.clearRecordedData(),o.timestamps=[],c=[],n=[];var r=t;t.disableLogs||console.log("Passing following config over MediaRecorder API.",r),i=i&&null,p&&!k()&&(r="video/vp8"),"function"==typeof MediaRecorder.isTypeSupported&&r.mimeType&&!MediaRecorder.isTypeSupported(r.mimeType)&&(t.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",r.mimeType),r.mimeType="audio"===t.type?"audio/webm":"video/webm");try{i=new MediaRecorder(e,r),t.mimeType=r.mimeType}catch(t){i=new MediaRecorder(e)}r.mimeType&&!MediaRecorder.isTypeSupported&&"canRecordMimeType"in i&&!1===i.canRecordMimeType(r.mimeType)&&(t.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",r.mimeType)),i.ondataavailable=function(e){var i;e.data&&c.push("ondataavailable: "+m(e.data.size)),"number"==typeof t.timeSlice?e.data&&e.data.size&&(n.push(e.data),s(),"function"==typeof t.ondataavailable)&&(i=t.getNativeBlob?e.data:new Blob([e.data],{type:a(r)}),t.ondataavailable(i)):!e.data||!e.data.size||e.data.size<100||o.blob?o.recordingCallback&&(o.recordingCallback(new Blob([],{type:a(r)})),o.recordingCallback=null):(o.blob=t.getNativeBlob?e.data:new Blob([e.data],{type:a(r)}),o.recordingCallback&&(o.recordingCallback(o.blob),o.recordingCallback=null))},i.onstart=function(){c.push("started")},i.onpause=function(){c.push("paused")},i.onresume=function(){c.push("resumed")},i.onstop=function(){c.push("stopped")},i.onerror=function(e){e&&(e.name||(e.name="UnknownError"),c.push("error: "+e),t.disableLogs||(-1!==e.name.toString().toLowerCase().indexOf("invalidstate")?console.error("The MediaRecorder is not in a state in which the proposed operation is allowed to be executed.",e):-1!==e.name.toString().toLowerCase().indexOf("notsupported")?console.error("MIME type (",r.mimeType,") is not supported.",e):-1!==e.name.toString().toLowerCase().indexOf("security")?console.error("MediaRecorder security error",e):"OutOfMemory"===e.name?console.error("The UA has exhaused the available memory. User agents SHOULD provide as much additional information as possible in the message attribute.",e):"IllegalStreamModification"===e.name?console.error("A modification to the stream has occurred that makes it impossible to continue recording. An example would be the addition of a Track while recording is occurring. User agents SHOULD provide as much additional information as possible in the message attribute.",e):"OtherRecordingError"===e.name?console.error("Used for an fatal error other than those listed above. User agents SHOULD provide as much additional information as possible in the message attribute.",e):"GenericError"===e.name?console.error("The UA cannot provide the codec or recording option that has been requested.",e):console.error("MediaRecorder Error",e)),!o.manuallyStopped&&i&&"inactive"===i.state?(delete t.timeslice,i.start(6e5)):setTimeout(void 0,1e3),"inactive"!==i.state)&&"stopped"!==i.state&&i.stop()},"number"==typeof t.timeSlice?(s(),i.start(t.timeSlice)):i.start(36e5),t.initCallback&&t.initCallback()},this.timestamps=[],this.stop=function(e){e=e||function(){},o.manuallyStopped=!0,i&&(this.recordingCallback=e,"recording"===i.state&&i.stop(),"number"==typeof t.timeSlice)&&setTimeout((function(){o.blob=new Blob(n,{type:a(t)}),o.recordingCallback(o.blob)}),100)},this.pause=function(){i&&"recording"===i.state&&i.pause()},this.resume=function(){i&&"paused"===i.state&&i.resume()},this.clearRecordedData=function(){i&&"recording"===i.state&&o.stop(l),l()},this.getInternalRecorder=function(){return i},this.blob=null,this.getState=function(){return i&&i.state||"inactive"};var c=[];this.getAllStates=function(){return c},void 0===t.checkForInactiveTracks&&(t.checkForInactiveTracks=!1),o=this;!function r(){i&&!1!==t.checkForInactiveTracks&&(!1===function(){if("active"in e){if(!e.active)return!1}else if("ended"in e&&e.ended)return!1;return!0}()?(t.disableLogs||console.log("MediaStream seems stopped."),o.stop()):setTimeout(r,1e3))}(),this.name="MediaStreamRecorder",this.toString=function(){return this.name}}function R(e,r){if(!y(e,"audio").length)throw"Your stream has no audio tracks.";var o,i=this,n=[],s=[],a=!1,l=0,d=2,u=(r=r||{}).desiredSampRate;function h(){if(!1!==r.checkForInactiveTracks)if("active"in e){if(!e.active)return!1}else if("ended"in e&&e.ended)return!1;return!0}function p(e,t){function r(e,t){var r,o=e.numberOfAudioChannels,i=e.leftBuffers.slice(0),n=e.rightBuffers.slice(0),s=e.sampleRate,a=e.internalInterleavedLength;e=e.desiredSampRate;function l(e,t,r){var o=Math.round(e.length*(t/r)),i=[],n=Number((e.length-1)/(o-1));i[0]=e[0];for(var s,a=1;a<o-1;a++){var l=a*n,c=Number(Math.floor(l)).toFixed(),d=Number(Math.ceil(l)).toFixed();i[a]=(s=e[c])+((d=e[d])-s)*(l-c)}return i[o-1]=e[e.length-1],i}function c(e,t){for(var r=new Float64Array(t),o=0,i=e.length,n=0;n<i;n++){var s=e[n];r.set(s,o),o+=s.length}return r}function d(e,t,r){for(var o=r.length,i=0;i<o;i++)e.setUint8(t+i,r.charCodeAt(i))}2===o&&(i=c(i,a),n=c(n,a),e)&&(i=l(i,e,s),n=l(n,e,s)),1===o&&(i=c(i,a),e)&&(i=l(i,e,s)),e&&(s=e),2===o&&(r=function(e,t){for(var r=e.length+t.length,o=new Float64Array(r),i=0,n=0;n<r;)o[n++]=e[i],o[n++]=t[i],i++;return o}(i,n));a=(r=1===o?i:r).length,e=new ArrayBuffer(44+2*a);for(var u=new DataView(e),h=(d(u,0,"RIFF"),u.setUint32(4,36+2*a,!0),d(u,8,"WAVE"),d(u,12,"fmt "),u.setUint32(16,16,!0),u.setUint16(20,1,!0),u.setUint16(22,o,!0),u.setUint32(24,s,!0),u.setUint32(28,s*o*2,!0),u.setUint16(32,2*o,!0),u.setUint16(34,16,!0),d(u,36,"data"),u.setUint32(40,2*a,!0),a),p=44,f=0;f<h;f++)u.setInt16(p,32767*r[f],!0),p+=2;if(t)return t({buffer:e,view:u});postMessage({buffer:e,view:u})}var o,i,n;e.noWorker?r(e,(function(e){t(e.buffer,e.view)})):(i=r,i=c.createObjectURL(new Blob([i.toString(),";this.onmessage =  function (eee) {"+i.name+"(eee.data);}"],{type:"application/javascript"})),(n=new Worker(i)).workerURL=i,(o=n).onmessage=function(e){t(e.data.buffer,e.data.view),c.revokeObjectURL(o.workerURL),o.terminate()},o.postMessage(e))}!0===r.leftChannel&&(d=1),(!(d=1===r.numberOfAudioChannels?1:d)||d<1)&&(d=2),r.disableLogs||console.log("StereoAudioRecorder is set to record number of channels: "+d),void 0===r.checkForInactiveTracks&&(r.checkForInactiveTracks=!0),this.record=function(){if(!1===h())throw"Please make sure MediaStream is active.";x(),C=w=!1,a=!0,void 0!==r.timeSlice&&S()},this.stop=function(e){e=e||function(){},a=!1,p({desiredSampRate:u,sampleRate:v,numberOfAudioChannels:d,internalInterleavedLength:l,leftBuffers:n,rightBuffers:1===d?[]:s,noWorker:r.noWorker},(function(t,r){i.blob=new Blob([r],{type:"audio/wav"}),i.buffer=new ArrayBuffer(r.buffer.byteLength),i.view=r,i.sampleRate=u||v,i.bufferSize=b,i.length=l,C=!1,e&&e(i.blob)}))},(t.Storage=void 0===t.Storage?{AudioContextConstructor:null,AudioContext:window.AudioContext||window.webkitAudioContext}:t.Storage).AudioContextConstructor&&"closed"!==t.Storage.AudioContextConstructor.state||(t.Storage.AudioContextConstructor=new t.Storage.AudioContext);var f=t.Storage.AudioContextConstructor,g=f.createMediaStreamSource(e),m=[0,256,512,1024,2048,4096,8192,16384],b=void 0===r.bufferSize?4096:r.bufferSize;if(-1!==m.indexOf(b)||r.disableLogs||console.log("Legal values for buffer-size are "+JSON.stringify(m,null,"\t")),f.createJavaScriptNode)o=f.createJavaScriptNode(b,d,d);else{if(!f.createScriptProcessor)throw"WebAudio API has no support on this browser.";o=f.createScriptProcessor(b,d,d)}g.connect(o),r.bufferSize||(b=o.bufferSize);var v=void 0!==r.sampleRate?r.sampleRate:f.sampleRate||44100,w=(!(v<22050||96e3<v)||r.disableLogs||console.log("sample-rate must be under range 22050 and 96000."),r.disableLogs||r.desiredSampRate&&console.log("Desired sample-rate: "+r.desiredSampRate),!1);function x(){n=[],l=0,w=a=C=!(s=[]),f=null,i.leftchannel=n,i.rightchannel=s,i.numberOfAudioChannels=d,i.desiredSampRate=u,i.sampleRate=v,i.recordingLength=l,R={left:[],right:[],recordingLength:0}}function k(){o&&(o.onaudioprocess=null,o.disconnect(),o=null),g&&(g.disconnect(),g=null),x()}this.pause=function(){w=!0},this.resume=function(){if(!1===h())throw"Please make sure MediaStream is active.";a?w=!1:(r.disableLogs||console.log("Seems recording has been restarted."),this.record())},this.clearRecordedData=function(){r.checkForInactiveTracks=!1,a&&this.stop(k),k()},this.name="StereoAudioRecorder";var C=!(this.toString=function(){return this.name});o.onaudioprocess=function(e){var t,c;w||(!1===h()&&(r.disableLogs||console.log("MediaStream seems stopped."),o.disconnect(),a=!1),a?(C||(C=!0,r.onAudioProcessStarted&&r.onAudioProcessStarted(),r.initCallback&&r.initCallback()),t=e.inputBuffer.getChannelData(0),t=new Float32Array(t),n.push(t),2===d&&(e=e.inputBuffer.getChannelData(1),c=new Float32Array(e),s.push(c)),l+=b,i.recordingLength=l,void 0!==r.timeSlice&&(R.recordingLength+=b,R.left.push(t),2===d)&&R.right.push(c)):g&&(g.disconnect(),g=null))},f.createMediaStreamDestination?o.connect(f.createMediaStreamDestination()):o.connect(f.destination),this.leftchannel=n,this.rightchannel=s,this.numberOfAudioChannels=d,this.desiredSampRate=u,this.sampleRate=v,i.recordingLength=l;var R={left:[],right:[],recordingLength:0};function S(){a&&"function"==typeof r.ondataavailable&&void 0!==r.timeSlice&&(R.left.length?(p({desiredSampRate:u,sampleRate:v,numberOfAudioChannels:d,internalInterleavedLength:R.recordingLength,leftBuffers:R.left,rightBuffers:1===d?[]:R.right},(function(e,t){t=new Blob([t],{type:"audio/wav"}),r.ondataavailable(t),setTimeout(S,r.timeSlice)})),R={left:[],right:[],recordingLength:0}):setTimeout(S,r.timeSlice))}}function S(e,t){if("undefined"==typeof html2canvas)throw"Please link: https://www.webrtc-experiment.com/screenshot.js";(t=t||{}).frameInterval||(t.frameInterval=10);var r,o,i,n=!1,s=(["captureStream","mozCaptureStream","webkitCaptureStream"].forEach((function(e){e in document.createElement("canvas")&&(n=!0)})),!(!window.webkitRTCPeerConnection&&!window.webkitGetUserMedia||!window.chrome)),a=50,l=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);if(s&&l&&l[2]&&(a=parseInt(l[2],10)),s&&a<52&&(n=!1),n=!t.useWhammyRecorder&&n)if(t.disableLogs||console.log("Your browser supports both MediRecorder API and canvas.captureStream!"),e instanceof HTMLCanvasElement)r=e;else{if(!(e instanceof CanvasRenderingContext2D))throw"Please pass either HTMLCanvasElement or CanvasRenderingContext2D.";r=e.canvas}else!navigator.mozGetUserMedia||t.disableLogs||console.error("Canvas recording is NOT supported in Firefox.");this.record=function(){if(i=!0,n&&!t.useWhammyRecorder){var e;"captureStream"in r?e=r.captureStream(25):"mozCaptureStream"in r?e=r.mozCaptureStream(25):"webkitCaptureStream"in r&&(e=r.webkitCaptureStream(25));try{var s=new g;s.addTrack(y(e,"video")[0]),e=s}catch(e){}if(!e)throw"captureStream API are NOT available.";(o=new C(e,{mimeType:t.mimeType||"video/webm"})).record()}else p.frames=[],h=(new Date).getTime(),u();t.initCallback&&t.initCallback()},this.getWebPImages=function(r){var o;"canvas"!==e.nodeName.toLowerCase()||(o=p.frames.length,p.frames.forEach((function(e,r){var i=o-r;t.disableLogs||console.log(i+"/"+o+" frames remaining"),t.onEncodingCallback&&t.onEncodingCallback(i,o),i=e.image.toDataURL("image/webp",1);p.frames[r].image=i})),t.disableLogs)||console.log("Generating WebM"),r()};var c=!(this.stop=function(e){i=!1;var r=this;n&&o?o.stop(e):this.getWebPImages((function(){p.compile((function(o){t.disableLogs||console.log("Recording finished!"),r.blob=o,r.blob.forEach&&(r.blob=new Blob([],{type:"video/webm"})),e&&e(r.blob),p.frames=[]}))}))});function d(){p.frames=[],c=i=!1}function u(){if(c)return h=(new Date).getTime(),setTimeout(u,500);var r,o,n;"canvas"===e.nodeName.toLowerCase()?(r=(new Date).getTime()-h,h=(new Date).getTime(),p.frames.push({image:(o=document.createElement("canvas"),n=o.getContext("2d"),o.width=e.width,o.height=e.height,n.drawImage(e,0,0),o),duration:r}),i&&setTimeout(u,t.frameInterval)):html2canvas(e,{grabMouse:void 0===t.showMousePointer||t.showMousePointer,onrendered:function(e){var r=(new Date).getTime()-h;if(!r)return setTimeout(u,t.frameInterval);h=(new Date).getTime(),p.frames.push({image:e.toDataURL("image/webp",1),duration:r}),i&&setTimeout(u,t.frameInterval)}})}this.pause=function(){c=!0,o instanceof C&&o.pause()},this.resume=function(){c=!1,o instanceof C?o.resume():i||this.record()},this.clearRecordedData=function(){i&&this.stop(d),d()},this.name="CanvasRecorder",this.toString=function(){return this.name};var h=(new Date).getTime(),p=new T.Video(100)}function _(e,t){function r(e){e=void 0!==e?e:10;var t=(new Date).getTime()-a;return t?i?(a=(new Date).getTime(),setTimeout(r,100)):(a=(new Date).getTime(),s.paused&&s.play(),d.drawImage(s,0,0,c.width,c.height),l.frames.push({duration:t,image:c.toDataURL("image/webp")}),void(o||setTimeout(r,e,e))):setTimeout(r,e,e)}(t=t||{}).frameInterval||(t.frameInterval=10),t.disableLogs||console.log("Using frames-interval:",t.frameInterval);var o=!(this.record=function(){t.width||(t.width=320),t.height||(t.height=240),t.video||(t.video={width:t.width,height:t.height}),t.canvas||(t.canvas={width:t.width,height:t.height}),c.width=t.canvas.width||320,c.height=t.canvas.height||240,d=c.getContext("2d"),t.video&&t.video instanceof HTMLVideoElement?(s=t.video.cloneNode(),t.initCallback&&t.initCallback()):(s=document.createElement("video"),w(e,s),s.onloadedmetadata=function(){t.initCallback&&t.initCallback()},s.width=t.video.width,s.height=t.video.height),s.muted=!0,s.play(),a=(new Date).getTime(),l=new T.Video,t.disableLogs||(console.log("canvas resolutions",c.width,"*",c.height),console.log("video width/height",s.width||c.width,"*",s.height||c.height)),r(t.frameInterval)}),i=!(this.stop=function(e){e=e||function(){},o=!0;var r=this;setTimeout((function(){!function(e,t,r,o,i){var n,s,a,l=document.createElement("canvas"),d=(l.width=c.width,l.height=c.height,l.getContext("2d")),u=[],h=-1===t,p=t&&0<t&&t<=e.length?t:e.length,f=Math.sqrt(Math.pow(255,2)+Math.pow(255,2)+Math.pow(255,2)),g=r&&0<=r&&r<=1?r:0,m=o&&0<=o&&o<=1?o:0,b=!1;s=-1,a=(n={length:p,functionToLoop:function(t,r){function o(){!b&&s-i<=s*m||(h&&(b=!0),u.push(e[r])),t()}var i,n,s,a;b?o():((a=new Image).onload=function(){d.drawImage(a,0,0,c.width,c.height);var e=d.getImageData(0,0,c.width,c.height);i=0,n=e.data.length,s=e.data.length/4;for(var t=0;t<n;t+=4){var r=e.data[t],l=e.data[t+1],u=e.data[t+2];Math.sqrt(Math.pow(r-0,2)+Math.pow(l-0,2)+Math.pow(u-0,2))<=f*g&&i++}o()},a.src=e[r].image)},callback:function(){(u=u.concat(e.slice(p))).length<=0&&u.push(e[e.length-1]),i(u)}}).length,function e(){++s===a?n.callback():setTimeout((function(){n.functionToLoop(e,s)}),1)}()}(l.frames,-1,null,null,(function(o){l.frames=o,t.advertisement&&t.advertisement.length&&(l.frames=t.advertisement.concat(l.frames)),l.compile((function(t){r.blob=t,r.blob.forEach&&(r.blob=new Blob([],{type:"video/webm"})),e&&e(r.blob)}))}))}),10)});function n(){l.frames=[],i=!(o=!0)}this.pause=function(){i=!0},this.resume=function(){i=!1,o&&this.record()},this.clearRecordedData=function(){o||this.stop(n),n()},this.name="WhammyRecorder",this.toString=function(){return this.name};var s,a,l,c=document.createElement("canvas"),d=c.getContext("2d")}void 0!==l?x.AudioContext=l:"undefined"!=typeof webkitAudioContext&&(x.AudioContext=webkitAudioContext),void 0!==t&&(t.Storage=x),void 0!==t&&(t.MediaStreamRecorder=C),void 0!==t&&(t.StereoAudioRecorder=R),void 0!==t&&(t.CanvasRecorder=S),void 0!==t&&(t.WhammyRecorder=_),A.prototype.add=function(e,t){if("toDataURL"in(e="canvas"in e?e.canvas:e)&&(e=e.toDataURL("image/webp",this.quality)),!/^data:image\/webp;base64,/gi.test(e))throw"Input must be formatted properly as a base64 encoded DataURI of type image/webp";this.frames.push({image:e,duration:t||this.duration})},A.prototype.compile=function(e){r=P,r=c.createObjectURL(new Blob([r.toString(),"this.onmessage =  function (eee) {"+r.name+"(eee.data);}"],{type:"application/javascript"})),t=new Worker(r),c.revokeObjectURL(r);var t,r=t;r.onmessage=function(t){t.data.error?console.error(t.data.error):e(t.data)},r.postMessage(this.frames)};var T={Video:A};function A(e){this.frames=[],this.duration=e||1,this.quality=.8}function P(e){function t(e){for(var t=[];0<e;)t.push(255&e),e>>=8;return new Uint8Array(t.reverse())}function r(e){return new Uint8Array(e.split("").map((function(e){return e.charCodeAt(0)})))}function o(e){var t=[];e=(e.length%8?new Array(9-e.length%8).join("0"):"")+e;for(var r=0;r<e.length;r+=8)t.push(parseInt(e.substr(r,8),2));return new Uint8Array(t)}function i(e){for(var t=0,r={};t<e.length;){var o=e.substr(t,4),n=(n=t,parseInt(e.substr(n+4,4).split("").map((function(e){return e=e.charCodeAt(0).toString(2),new Array(8-e.length+1).join("0")+e})).join(""),2)),s=e.substr(t+4+4,n);t+=8+n,r[o]=r[o]||[],"RIFF"===o||"LIST"===o?r[o].push(i(s)):r[o].push(s)}return r}e=new function(e){var i=function(e){if(e[0]){for(var t=e[0].width,r=e[0].height,o=e[0].duration,i=1;i<e.length;i++)o+=e[i].duration;return{duration:o,width:t,height:r}}postMessage({error:"Something went wrong. Maybe WebP format is not supported in the current browser."})}(e);if(!i)return[];for(var n,s=[{id:440786851,data:[{data:1,id:17030},{data:1,id:17143},{data:4,id:17138},{data:8,id:17139},{data:"webm",id:17026},{data:2,id:17031},{data:2,id:17029}]},{id:408125543,data:[{id:357149030,data:[{data:1e6,id:2807729},{data:"whammy",id:19840},{data:"whammy",id:22337},{data:(n=i.duration,[].slice.call(new Uint8Array(new Float64Array([n]).buffer),0).map((function(e){return String.fromCharCode(e)})).reverse().join("")),id:17545}]},{id:374648427,data:[{id:174,data:[{data:1,id:215},{data:1,id:29637},{data:0,id:156},{data:"und",id:2274716},{data:"V_VP8",id:134},{data:"VP8",id:2459272},{data:1,id:131},{id:224,data:[{data:i.width,id:176},{data:i.height,id:186}]}]}]}]}],a=0,l=0;a<e.length;){for(var c=[],d=0;c.push(e[a]),d+=e[a].duration,++a<e.length&&d<3e4;);var u={id:524531317,data:function(e,t,r){return[{data:e,id:231}].concat(r.map((function(e){var r=function(e){var t=0;if(e.keyframe&&(t|=128),e.invisible&&(t|=8),e.lacing&&(t|=e.lacing<<1),e.discardable&&(t|=1),127<e.trackNum)throw"TrackNumber > 127 not supported";return[128|e.trackNum,e.timecode>>8,255&e.timecode,t].map((function(e){return String.fromCharCode(e)})).join("")+e.frame}({discardable:0,frame:e.data.slice(4),invisible:0,keyframe:1,lacing:0,trackNum:1,timecode:Math.round(t)});return t+=e.duration,{data:r,id:163}})))}(l,0,c)};s[1].data.push(u),l+=d}return function e(i){for(var n=[],s=0;s<i.length;s++){var a=i[s].data,l=(a="string"==typeof(a="number"==typeof(a="object"==typeof a?e(a):a)?o(a.toString(2)):a)?r(a):a).size||a.byteLength||a.length,c=Math.ceil(Math.ceil(Math.log(l)/Math.log(2))/8);l=l.toString(2),l=new Array(7*c+7+1-l.length).join("0")+l,c=new Array(c).join("0")+"1"+l;n.push(t(i[s].id)),n.push(o(c)),n.push(a)}return new Blob(n,{type:"video/webm"})}(s)}(e.map((function(e){var t=function(e){for(var t=e.RIFF[0].WEBP[0],r=t.indexOf("*"),o=0,i=[];o<4;o++)i[o]=t.charCodeAt(r+3+o);return{width:16383&(i[1]<<8|i[0]),height:16383&(i[3]<<8|i[2]),data:t,riff:e}}(i(atob(e.image.slice(23))));return t.duration=e.duration,t}))),postMessage(e)}void 0!==t&&(t.Whammy=T);var L={init:function(){var e,t,r,o=this;function i(e){e.createObjectStore(o.dataStoreName)}function n(){var e=t.transaction([o.dataStoreName],"readwrite");function r(t){e.objectStore(o.dataStoreName).get(t).onsuccess=function(e){o.callback&&o.callback(e.target.result,t)}}o.videoBlob&&e.objectStore(o.dataStoreName).put(o.videoBlob,"videoBlob"),o.gifBlob&&e.objectStore(o.dataStoreName).put(o.gifBlob,"gifBlob"),o.audioBlob&&e.objectStore(o.dataStoreName).put(o.audioBlob,"audioBlob"),r("audioBlob"),r("videoBlob"),r("gifBlob")}"undefined"==typeof indexedDB||void 0===indexedDB.open?console.error("IndexedDB API are not available in this browser."):(e=this.dbName||location.href.replace(/\/|:|#|%|\.|\[|\]/g,""),(r=indexedDB.open(e,1)).onerror=o.onError,r.onsuccess=function(){(t=r.result).onerror=o.onError,t.setVersion&&1!==t.version?t.setVersion(1).onsuccess=function(){i(t),n()}:n()},r.onupgradeneeded=function(e){i(e.target.result)})},Fetch:function(e){return this.callback=e,this.init(),this},Store:function(e){return this.audioBlob=e.audioBlob,this.videoBlob=e.videoBlob,this.gifBlob=e.gifBlob,this.init(),this},onError:function(e){console.error(JSON.stringify(e,null,"\t"))},dataStoreName:"recordRTC",dbName:null};function E(e,t){"undefined"==typeof GIFEncoder&&((r=document.createElement("script")).src="https://www.webrtc-experiment.com/gif-recorder.js",(document.body||document.documentElement).appendChild(r)),t=t||{};var r,o=e instanceof CanvasRenderingContext2D||e instanceof HTMLCanvasElement,i=(this.record=function(){"undefined"!=typeof GIFEncoder&&h?(o||(t.width||(t.width=n.offsetWidth||320),t.height||(t.height=n.offsetHeight||240),t.video||(t.video={width:t.width,height:t.height}),t.canvas||(t.canvas={width:t.width,height:t.height}),d.width=t.canvas.width||320,d.height=t.canvas.height||240,n.width=t.video.width||320,n.height=t.video.height||240),(c=new GIFEncoder).setRepeat(0),c.setDelay(t.frameRate||200),c.setQuality(t.quality||10),c.start(),"function"==typeof t.onGifRecordingStarted&&t.onGifRecordingStarted(),p=s((function e(r){if(!0!==f.clearedRecordedData){if(i)return setTimeout((function(){e(r)}),100);p=s(e),r-l<90||(!o&&n.paused&&n.play(),o||u.drawImage(n,0,0,d.width,d.height),t.onGifPreview&&t.onGifPreview(d.toDataURL("image/png")),c.addFrame(u),l=r)}})),t.initCallback&&t.initCallback()):setTimeout(f.record,1e3)},!(this.stop=function(e){e=e||function(){},p&&a(p),this.blob=new Blob([new Uint8Array(c.stream().bin)],{type:"image/gif"}),e(this.blob),c.stream().bin=[]}));this.pause=function(){i=!0},this.resume=function(){i=!1},this.clearRecordedData=function(){f.clearedRecordedData=!0,c&&(c.stream().bin=[])},this.name="GifRecorder",this.toString=function(){return this.name};var n,l,c,d=document.createElement("canvas"),u=d.getContext("2d"),h=(o&&(e instanceof CanvasRenderingContext2D?d=(u=e).canvas:e instanceof HTMLCanvasElement&&(u=e.getContext("2d"),d=e)),!0),p=(o||((n=document.createElement("video")).muted=!0,n.autoplay=!0,n.playsInline=!0,h=!1,n.onloadedmetadata=function(){h=!0},w(e,n),n.play()),null),f=this}function $(e,t){t=t||"multi-streams-mixer";var r=[],o=!1,i=document.createElement("canvas"),n=i.getContext("2d"),s=(i.style.opacity=0,i.style.position="absolute",i.style.zIndex=-1,i.style.top="-1000em",i.style.left="-1000em",i.className=t,(document.body||document.documentElement).appendChild(i),this.disableLogs=!1,this.frameInterval=10,this.width=360,this.height=240,this.useGainNode=!0,this),a=window.AudioContext,l=(void 0===a&&("undefined"!=typeof webkitAudioContext&&(a=webkitAudioContext),"undefined"!=typeof mozAudioContext)&&(a=mozAudioContext),window.URL),c=(void 0===l&&"undefined"!=typeof webkitURL&&(l=webkitURL),"undefined"!=typeof navigator&&void 0===navigator.getUserMedia&&(void 0!==navigator.webkitGetUserMedia&&(navigator.getUserMedia=navigator.webkitGetUserMedia),void 0!==navigator.mozGetUserMedia)&&(navigator.getUserMedia=navigator.mozGetUserMedia),window.MediaStream),d=(void 0!==(c=void 0===c&&"undefined"!=typeof webkitMediaStream?webkitMediaStream:c)&&void 0===c.prototype.stop&&(c.prototype.stop=function(){this.getTracks().forEach((function(e){e.stop()}))}),{});function u(){var e,t,n;o||(e=r.length,t=!1,n=[],r.forEach((function(e){e.stream||(e.stream={}),e.stream.fullcanvas?t=e:n.push(e)})),t?(i.width=t.stream.width,i.height=t.stream.height):n.length?(i.width=1<e?2*n[0].width:n[0].width,i.height=n[0].height*(9!==e&&10!==e?7!==e&&8!==e?5!==e&&6!==e?3!==e&&4!==e?1:2:3:4:5)):(i.width=s.width||360,i.height=s.height||240),t&&t instanceof HTMLVideoElement&&h(t),n.forEach((function(e,t){h(e,t)})),setTimeout(u,s.frameInterval))}function h(e,t){var r,i,s,a;o||(i=r=0,s=e.width,a=e.height,1===t&&(r=e.width),2===t&&(i=e.height),3===t&&(r=e.width,i=e.height),4===t&&(i=2*e.height),5===t&&(r=e.width,i=2*e.height),6===t&&(i=3*e.height),7===t&&(r=e.width,i=3*e.height),void 0!==e.stream.left&&(r=e.stream.left),void 0!==e.stream.top&&(i=e.stream.top),void 0!==e.stream.width&&(s=e.stream.width),void 0!==e.stream.height&&(a=e.stream.height),n.drawImage(e,r,i,s,a),"function"==typeof e.stream.onRender&&e.stream.onRender(n,r,i,s,a,t))}function p(e){var r,o,i=document.createElement("video");return r=e,!("srcObject"in(o=i))&&"mozSrcObject"in o?o.mozSrcObject=r:o.srcObject=r,i.className=t,i.muted=!0,i.volume=0,i.width=e.width||s.width||360,i.height=e.height||s.height||240,i.play(),i}function f(t){r=[],(t=t||e).forEach((function(e){var t;e.getTracks().filter((function(e){return"video"===e.kind})).length&&((t=p(e)).stream=e,r.push(t))}))}void 0!==a?d.AudioContext=a:"undefined"!=typeof webkitAudioContext&&(d.AudioContext=webkitAudioContext),this.startDrawingFrames=function(){u()},this.appendStreams=function(t){if(!t)throw"First parameter is required.";(t=t instanceof Array?t:[t]).forEach((function(t){var o,i=new c;t.getTracks().filter((function(e){return"video"===e.kind})).length&&((o=p(t)).stream=t,r.push(o),i.addTrack(t.getTracks().filter((function(e){return"video"===e.kind}))[0])),t.getTracks().filter((function(e){return"audio"===e.kind})).length&&(o=s.audioContext.createMediaStreamSource(t),s.audioDestination=s.audioContext.createMediaStreamDestination(),o.connect(s.audioDestination),i.addTrack(s.audioDestination.stream.getTracks().filter((function(e){return"audio"===e.kind}))[0])),e.push(i)}))},this.releaseStreams=function(){r=[],o=!0,s.gainNode&&(s.gainNode.disconnect(),s.gainNode=null),s.audioSources.length&&(s.audioSources.forEach((function(e){e.disconnect()})),s.audioSources=[]),s.audioDestination&&(s.audioDestination.disconnect(),s.audioDestination=null),s.audioContext&&s.audioContext.close(),s.audioContext=null,n.clearRect(0,0,i.width,i.height),i.stream&&(i.stream.stop(),i.stream=null)},this.resetVideoStreams=function(e){f(e=!e||e instanceof Array?e:[e])},this.name="MultiStreamsMixer",this.toString=function(){return this.name},this.getMixedStream=function(){o=!1,f(),"captureStream"in i?n=i.captureStream():"mozCaptureStream"in i?n=i.mozCaptureStream():s.disableLogs||console.error("Upgrade to latest Chrome or otherwise enable this flag: chrome://flags/#enable-experimental-web-platform-features"),t=new c,n.getTracks().filter((function(e){return"video"===e.kind})).forEach((function(e){t.addTrack(e)}));var t,r=i.stream=t,n=function(){d.AudioContextConstructor||(d.AudioContextConstructor=new d.AudioContext),s.audioContext=d.AudioContextConstructor,s.audioSources=[],!0===s.useGainNode&&(s.gainNode=s.audioContext.createGain(),s.gainNode.connect(s.audioContext.destination),s.gainNode.gain.value=0);var t=0;if(e.forEach((function(e){if(e.getTracks().filter((function(e){return"audio"===e.kind})).length){t++;var r=s.audioContext.createMediaStreamSource(e);!0===s.useGainNode&&r.connect(s.gainNode),s.audioSources.push(r)}})),t)return s.audioDestination=s.audioContext.createMediaStreamDestination(),s.audioSources.forEach((function(e){e.connect(s.audioDestination)})),s.audioDestination.stream}();return n&&n.getTracks().filter((function(e){return"audio"===e.kind})).forEach((function(e){r.addTrack(e)})),e.forEach((function(e){e.fullcanvas})),r}}function B(e,t){e=e||[];var r,o,i=this;(t=t||{elementClass:"multi-streams-mixer",mimeType:"video/webm",video:{width:360,height:240}}).frameInterval||(t.frameInterval=10),t.video||(t.video={}),t.video.width||(t.video.width=360),t.video.height||(t.video.height=240),this.record=function(){var i;r=new $(e,t.elementClass||"multi-streams-mixer"),i=[],e.forEach((function(e){y(e,"video").forEach((function(e){i.push(e)}))})),i.length&&(r.frameInterval=t.frameInterval||10,r.width=t.video.width||360,r.height=t.video.height||240,r.startDrawingFrames()),t.previewStream&&"function"==typeof t.previewStream&&t.previewStream(r.getMixedStream()),(o=new C(r.getMixedStream(),t)).record()},this.stop=function(e){o&&o.stop((function(t){i.blob=t,e(t),i.clearRecordedData()}))},this.pause=function(){o&&o.pause()},this.resume=function(){o&&o.resume()},this.clearRecordedData=function(){o&&(o.clearRecordedData(),o=null),r&&(r.releaseStreams(),r=null)},this.addStreams=function(i){if(!i)throw"First parameter is required.";i instanceof Array||(i=[i]),e.concat(i),o&&r&&(r.appendStreams(i),t.previewStream)&&"function"==typeof t.previewStream&&t.previewStream(r.getMixedStream())},this.resetVideoStreams=function(e){r&&(!e||e instanceof Array||(e=[e]),r.resetVideoStreams(e))},this.getMixer=function(){return r},this.name="MultiStreamRecorder",this.toString=function(){return this.name}}function O(e,t){var r,o,i;function n(a,l){t.workerPath||l?(!t.workerPath&&l instanceof ArrayBuffer&&(l=new Blob([l],{type:"text/javascript"}),t.workerPath=c.createObjectURL(l)),t.workerPath||console.error("workerPath parameter is missing."),(o=new Worker(t.workerPath)).postMessage(t.webAssemblyPath||"https://unpkg.com/webm-wasm@latest/dist/webm-wasm.wasm"),o.addEventListener("message",(function(n){"READY"===n.data?(o.postMessage({width:t.width,height:t.height,bitrate:t.bitrate||1200,timebaseDen:t.frameRate||30,realtime:t.realtime}),new ReadableStream({start:function(o){var i=document.createElement("canvas"),n=document.createElement("video"),s=!0;n.srcObject=e,n.muted=!0,n.height=t.height,n.width=t.width,n.volume=0,n.onplaying=function(){i.width=t.width,i.height=t.height;var e=i.getContext("2d"),a=1e3/t.frameRate,l=setInterval((function(){if(r&&(clearInterval(l),o.close()),s&&(s=!1,t.onVideoProcessStarted)&&t.onVideoProcessStarted(),e.drawImage(n,0,0),"closed"!==o._controlledReadableStream.state)try{o.enqueue(e.getImageData(0,0,t.width,t.height))}catch(e){}}),a)},n.play()}}).pipeTo(new WritableStream({write:function(e){r?console.error("Got image, but recorder is finished!"):o.postMessage(e.data.buffer,[e.data.buffer])}}))):n.data&&!i&&s.push(n.data)}))):(r=!1,fetch("https://unpkg.com/webm-wasm@latest/dist/webm-worker.js").then((function(e){e.arrayBuffer().then((function(e){n(a,e)}))})))}"undefined"!=typeof ReadableStream&&"undefined"!=typeof WritableStream||console.error("Following polyfill is strongly recommended: https://unpkg.com/@mattiasbuelens/web-streams-polyfill/dist/polyfill.min.js"),(t=t||{}).width=t.width||640,t.height=t.height||480,t.frameRate=t.frameRate||30,t.bitrate=t.bitrate||1200,t.realtime=t.realtime||!0,this.record=function(){i=!(s=[]),this.blob=null,n(e),"function"==typeof t.initCallback&&t.initCallback()},this.pause=function(){i=!0},this.resume=function(){i=!1};var s=[];this.stop=function(e){r=!0;var t,i=this;t=function(){i.blob=new Blob(s,{type:"video/webm"}),e(i.blob)},o?(o.addEventListener("message",(function(e){null===e.data&&(o.terminate(),o=null,t)&&t()})),o.postMessage(null)):t&&t()},this.name="WebAssemblyRecorder",this.toString=function(){return this.name},this.clearRecordedData=function(){i=!(s=[]),this.blob=null},this.blob=null}void 0!==t&&(t.DiskStorage=L),void 0!==t&&(t.GifRecorder=E),void 0===t&&(e.exports=$),void 0!==t&&(t.MultiStreamRecorder=B),void 0!==t&&(t.RecordRTCPromisesHandler=function(e,r){if(!this)throw'Use "new RecordRTCPromisesHandler()"';if(void 0===e)throw'First argument "MediaStream" is required.';var o=this;o.recordRTC=new t(e,r),this.startRecording=function(){return new Promise((function(e,t){try{o.recordRTC.startRecording(),e()}catch(e){t(e)}}))},this.stopRecording=function(){return new Promise((function(e,t){try{o.recordRTC.stopRecording((function(r){o.blob=o.recordRTC.getBlob(),o.blob&&o.blob.size?e(r):t("Empty blob.",o.blob)}))}catch(e){t(e)}}))},this.pauseRecording=function(){return new Promise((function(e,t){try{o.recordRTC.pauseRecording(),e()}catch(e){t(e)}}))},this.resumeRecording=function(){return new Promise((function(e,t){try{o.recordRTC.resumeRecording(),e()}catch(e){t(e)}}))},this.getDataURL=function(e){return new Promise((function(e,t){try{o.recordRTC.getDataURL((function(t){e(t)}))}catch(e){t(e)}}))},this.getBlob=function(){return new Promise((function(e,t){try{e(o.recordRTC.getBlob())}catch(e){t(e)}}))},this.getInternalRecorder=function(){return new Promise((function(e,t){try{e(o.recordRTC.getInternalRecorder())}catch(e){t(e)}}))},this.reset=function(){return new Promise((function(e,t){try{e(o.recordRTC.reset())}catch(e){t(e)}}))},this.destroy=function(){return new Promise((function(e,t){try{e(o.recordRTC.destroy())}catch(e){t(e)}}))},this.getState=function(){return new Promise((function(e,t){try{e(o.recordRTC.getState())}catch(e){t(e)}}))},this.blob=null,this.version="5.6.2"}),void 0!==t&&(t.WebAssemblyRecorder=O)}(vo),vo.exports);const wo=new(window.AudioContext||window.webkitAudioContext),xo=wo.createAnalyser();xo.fftSize=256;class ko{isVisualize=!1;constructor(e,t){this.recorder=null,this.stream=null,this.isRecording=!1,this.isStopped=!0,this.isPaused=!1,this.apiHost=e??"",this.tenantId=t??""}pauseRecording=async()=>{if(!this.recorder)throw new Error("Cannot pause recording: no recorder");await this.recorder.pauseRecording(),this.isPaused=!0,this.isRecording=!1};resumeRecording=async()=>{if(!this.recorder)throw new Error("Cannot resume recording: no recorder");await this.recorder.resumeRecording(),this.isPaused=!1,this.isRecording=!0};startRecording=async()=>{try{this.stream=await navigator.mediaDevices.getUserMedia({audio:!0,video:!1}),wo.createMediaStreamSource(this.stream).connect(xo),this.recorder=new yo.RecordRTCPromisesHandler(this.stream,{type:"audio"}),this.recorder.startRecording(),this.isRecording=!0,this.isStopped=!1,this.isVisualize=!0}catch(e){throw this.isRecording=!1,this.isStopped=!0,new Error("Error starting recording: "+e.message)}};stopRecording=async e=>{if(!this.isRecording||!this.recorder)throw new Error("Cannot stop recording: no recorder");try{await this.recorder.stopRecording();var t=await this.recorder.getBlob();e(await this.transcribe(t)??""),this.stream?.getTracks().forEach((e=>{e.stop()})),this.recorder=null,this.stream=null,this.isRecording=!1,this.isStopped=!0,this.isPaused=!1,this.isVisualize=!1}catch(t){throw e(""),this.isRecording=!1,this.isStopped=!0,new Error("Error stopping recording: "+t.message)}};async transcribe(e){e=new File([e],"input.wav",{type:"audio/wav"});var t=new FormData;if(t.append("file",e,"input.wav"),e)return(e=(await Ne({apiHost:this.apiHost,tenantId:this.tenantId,body:t})).data)??""}visualizeSound=e=>{this.isVisualize&&requestAnimationFrame((()=>{this.visualizeSound(e);var t=new Uint8Array(xo.frequencyBinCount);xo.getByteFrequencyData(t),t=t.reduce(((e,t)=>e+t),0)/t.length;e(t)}))}}const Co=ae("<span>Send"),Ro=ae('<div class="flex items-center justify-between chatbot-input" data-testid="input">'),So=ae('<span><svg height="23px" width="23px" version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" enable-background="new 0 0 512 512"><g><g><path d="m439.5,236c0-11.3-9.1-20.4-20.4-20.4s-20.4,9.1-20.4,20.4c0,70-64,126.9-142.7,126.9-78.7,0-142.7-56.9-142.7-126.9 0-11.3-9.1-20.4-20.4-20.4s-20.4,9.1-20.4,20.4c0,86.2 71.5,157.4 163.1,166.7v57.5h-23.6c-11.3,0-20.4,9.1-20.4,20.4 0,11.3 9.1,20.4 20.4,20.4h88c11.3,0 20.4-9.1 20.4-20.4 0-11.3-9.1-20.4-20.4-20.4h-23.6v-57.5c91.6-9.3 163.1-80.5 163.1-166.7z"></path><path d="m256,323.5c51,0 92.3-41.3 92.3-92.3v-127.9c0-51-41.3-92.3-92.3-92.3s-92.3,41.3-92.3,92.3v127.9c0,51 41.3,92.3 92.3,92.3zm-52.3-220.2c0-28.8 23.5-52.3 52.3-52.3s52.3,23.5 52.3,52.3v127.9c0,28.8-23.5,52.3-52.3,52.3s-52.3-23.5-52.3-52.3v-127.9z">'),_o=ae('<div class="fixed inset-0 flex items-center justify-center z-50"><div class="bg-white p-6 rounded-lg shadow-lg"><div class="w-52 h-52 rounded-full mx-auto mb-4 flex items-center justify-center text-white"><div class="rounded-full shadow-md pulse"><svg xmlns="http://www.w3.org/2000/svg" height="120px" width="120px" version="1.1" viewBox="0 0 512 512" enable-background="new 0 0 512 512"><g><path d="m256,11c-81,0-147,65.9-147,147v100.3c0,74.1 55.1,135.6 126.5,145.5v56.4h-43.4c-11.3,0-20.4,9.1-20.4,20.4 0,11.3 9.1,20.4 20.4,20.4h127.7c11.3,0 20.4-9.1 20.4-20.4 0-11.3-9.1-20.4-20.4-20.4h-43.4v-56.4c71.4-10 126.5-71.4 126.5-145.5v-100.3c0.1-81.1-65.9-147-146.9-147zm0,353.4c-42.7,0-79.6-25.3-96.4-61.8h45.1c11.3,0 20.4-9.1 20.4-20.4 0-11.3-9.1-20.4-20.4-20.4h-54.8c0-1.2-0.1-33.3-0.1-33.3h54.8c11.3,0 20.4-9.1 20.4-20.4 0-11.3-9.1-20.4-20.4-20.4h-54.8c0,0 0-32.1 0.1-33.3h54.8c11.3,0 20.4-9.1 20.4-20.4s-9.1-20.4-20.4-20.4h-45.1c16.8-36.4 53.7-61.8 96.4-61.8 42.7,0 79.6,25.3 96.4,61.8h-45.1c-11.3,0-20.4,9.1-20.4,20.4s9.1,20.4 20.4,20.4h54.8c0,1.2 0.1,33.3 0.1,33.3h-54.8c-11.3,0-20.4,9.1-20.4,20.4 0,11.3 9.1,20.4 20.4,20.4h54.8c0,0 0,32.1-0.1,33.3h-54.8c-11.3,0-20.4,9.1-20.4,20.4 0,11.3 9.1,20.4 20.4,20.4h45.1c-16.8,36.5-53.7,61.8-96.4,61.8z">'),To=ae('<div class="flex items-center justify-center"><button type="button" class="inline-flex items-center px-4 py-2 font-semibold leading-6 text-sm shadow rounded-md hover:opacity-25 transition ease-in-out duration-150 cursor-not-allowed"><svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>Processing...'),Ao=ae('<button class="bg-red-500 text-white p-2 rounded-md hover:bg-red-600 active:bg-red-700 w-full">Stop Recording'),Po=e=>{const t=new ko(e.apiHost,e.tenantId),[r,o]=C(e.defaultValue??""),[i,n]=C(!1),[s,a]=C(!1),[l,c]=C(!1),[d,u]=C(!1);var h,p=new window.webkitSpeechRecognition;let f;window?.webkitSpeechGrammarList&&((h=new window.webkitSpeechGrammarList).addFromString("#JSGF V1.0; grammar colors; public <color> = aqua | azure | beige | bisque | black | blue | brown | chocolate | coral | crimson | cyan | fuchsia | ghostwhite | gold | goldenrod | gray | green | indigo | ivory | khaki | lavender | lime | linen | magenta | maroon | moccasin | navy | olive | orange | orchid | peru | pink | plum | purple | red | salmon | sienna | silver | snow | tan | teal | thistle | tomato | turquoise | violet | white | yellow ;",1),p.grammars=h);const g=e=>o(e),m=(S((()=>{window?.webkitSpeechRecognition&&a(!0)})),()=>{""!==r()&&f?.reportValidity()&&e.onSubmit(r()),o("")}),b=e=>{var t=e.isComposing||229===e.keyCode;"Enter"!==e.key||t||m()},v=(P((()=>{!lr()&&f&&f.focus()})),async()=>{try{n(!0),await t.startRecording(),setTimeout((()=>c(!0)),500)}catch(e){u(!1),c(!1),alert("Please enable microphone recording")}finally{u(!1),c(!1)}}),y=()=>{n(!1),u(!0),t.stopRecording((e=>{u(!1),c(!1),o(e)}))};{const t=Ro();return t.$$keydown=b,t.style.setProperty("border-top","1px solid #eeeeee"),t.style.setProperty("position","absolute"),t.style.setProperty("left","20px"),t.style.setProperty("right","20px"),t.style.setProperty("bottom","40px"),t.style.setProperty("margin","auto"),t.style.setProperty("z-index","1000"),ge(t,W(Fr,{ref(e){"function"==typeof f?f(e):f=e},onInput:g,get value(){return r()},get fontSize(){return e.fontSize},get placeholder(){return e.placeholder??"Type your question"}}),null),ge(t,(()=>{const t=_((()=>!!s()));return()=>t()&&[(()=>{const t=So(),r=t.firstChild;return t.addEventListener("click",v),t.style.setProperty("cursor","pointer"),R((()=>ce(r,"fill",i()?"red":e.backgroundColor))),t})(),_((()=>{const t=_((()=>!!l()));return()=>t()&&(()=>{const t=_o(),r=t.firstChild,o=r.firstChild.firstChild.firstChild;return t.style.setProperty("background","rgba(0,0,0,0.4)"),ge(r,(()=>{const t=_((()=>!!d()));return()=>{if(t()){const t=To(),r=t.firstChild;return R((t=>{var o=e.buttonTheme.backgroundColor,i=e.buttonTheme.textColor;return o!==t._v$3&&(null!=(t._v$3=o)?r.style.setProperty("background",o):r.style.removeProperty("background")),i!==t._v$4&&(null!=(t._v$4=i)?r.style.setProperty("color",i):r.style.removeProperty("color")),t}),{_v$3:void 0,_v$4:void 0}),t}return(r=Ao()).$$click=y,r;var r}})(),null),R((()=>ce(o,"fill",e.backgroundColor))),t})()})())]})(),null),ge(t,W(Ir,{get sendButtonColor(){return e.sendButtonColor},type:"button",get isDisabled(){return""===r()},class:"my-2 ml-2","on:click":m,get children(){var e=Co();return e.style.setProperty("font-family","Poppins, sans-serif"),e}}),null),R((r=>{var o=e.backgroundColor??"#ffffff",i=e.textColor??"#303235";return o!==r._v$&&(null!=(r._v$=o)?t.style.setProperty("background-color",o):t.style.removeProperty("background-color")),i!==r._v$2&&(null!=(r._v$2=i)?t.style.setProperty("color",i):t.style.removeProperty("color")),r}),{_v$:void 0,_v$2:void 0}),t}},Lo=(le(["keydown","click"]),ae('<div class="flex justify-start mb-2 items-start animate-fade-in host-container hover:brightness-90 active:brightness-75"><span class="px-2 py-1 ml-1 whitespace-pre-wrap max-w-full hover:bg-blue-200 hover:bg-opacity-25" data-testid="host-bubble">')),Eo="rgb(59, 129, 246)",$o=e=>{{const t=Lo(),r=t.firstChild;return t.$$click=()=>e.onOptionClick?.(),r.style.setProperty("font-size","14px"),r.style.setProperty("border-radius","15px"),r.style.setProperty("border","1px solid"),r.style.setProperty("cursor","pointer"),r.style.setProperty("text-overflow","ellipsis"),r.style.setProperty("overflow","hidden"),r.style.setProperty("white-space","nowrap"),ge(r,(()=>e.pre_question)),R((t=>{var o=e.backgroundColor??Eo,i=e.backgroundColor??Eo;return o!==t._v$&&(null!=(t._v$=o)?r.style.setProperty("border-color",o):r.style.removeProperty("border-color")),i!==t._v$2&&(null!=(t._v$2=i)?r.style.setProperty("color",i):r.style.removeProperty("color")),t}),{_v$:void 0,_v$2:void 0}),t}},Bo=(le(["click"]),ae('<div class="px-4 absolute flex justify-evenly gap-2 bottom-[110px] w-full flex-wrap">')),Oo=ae('<div><div class="flex w-full h-full justify-center"><div class="overflow-y-scroll min-w-full w-full min-h-full px-3 pt-10 relative scrollable-container chatbot-chat-view scroll-smooth">'),Mo=ae('<div class="mb-4 mt-1">'),Io=ae('<div class="flex flex-wrap gap-2 mt-5 mb-3">'),jo=ae("<div>"),zo=ae('<h3 class="text-center">No content has been provided.'),Do=ae("<p>"),No=ae('<div class="w-full h-32">'),qo="Hello!, What can I assist you with today? ",Uo="Take your pick!  Select an option below to keep things rolling.",Fo=e=>{const t=function(e){for(const o of document.cookie.split("; ")){var[t,r]=o.split("=");if(t===e)return decodeURIComponent(r)}return null}("session_user");let r,o,i;const[n,s]=C(768<window.innerWidth),a=document?.querySelector("body > chatgenius-chatbot")?.shadowRoot.querySelector("#chatgenius-bot-container"),[l,c]=C(""),[d,u]=C(!1),[h,p]=C(!1),[f,g]=C(null),[m,b]=C([]),[v,y]=C(!0),[w,x]=C([{message:t?e.welcomeMessage??qo:"Hello!",type:"apiMessage"}],{equals:!1}),[k,T]=C(""),[A,E]=C(!1),[$,B]=C({}),[O,M]=C(null),[I,j]=C(!0),[,z]=C(!1),[D,N]=C(!1),[q,U]=C(""),[F,H]=C(!1),[G,,]=C([]),[V,Y]=C(),[J,K]=C([]),[X,ee]=C(""),[te,re]=C({});let oe="";const ie=()=>{console.log(n()),console.log(a?.clientWidth,"width"),s(768<a?.clientWidth)},ne=(S((()=>{window.addEventListener("resize",ie),L((()=>{window.removeEventListener("resize",ie)}))})),S((async()=>{var{chatflowid:r,apiHost:o,tenantId:i}=e,r=(await(({apiHost:e,tenantId:t})=>Le({method:"GET",url:e+"/api/v1/tenant/load-db",tenantId:t}))({chatflowid:r,apiHost:o,tenantId:i}),t?JSON.parse(t):null);r&&M(r),j(!1)})),async t=>{t={email:t.Email,createdAt:new Date,meta_data:t},t=(await(({apiHost:e="http://localhost:3000",body:t,tenantId:r})=>Le({method:"POST",url:e+"/api/v1/user-session",body:t,tenantId:r}))({apiHost:e.apiHost,tenantId:e.tenantId,body:t})).data,t?.data&&(function(e,t,r){var o=new Date;o.setDate(o.getDate()+r),document.cookie=`${e}=${t}; expires=${o.toUTCString()}; path=/`}("session_user",JSON.stringify(t.data),30),M(t.data))}),se=(P((()=>{o&&setTimeout((()=>{r?.scrollTo(0,r.scrollHeight)}),50)})),()=>{setTimeout((()=>{r?.scrollTo(0,r.scrollHeight)}),50)}),ae=async()=>{var{chatflowid:t,apiHost:r,tenantId:o}=e;u(!0);const i=(await(({chatflowid:e,apiHost:t="http://localhost:3000",tenantId:r})=>Le({method:"GET",url:t+"/api/v1/chatflow/"+e,tenantId:r}))({chatflowid:t,apiHost:r,tenantId:o})).data;if("boolean"==typeof i?.data?.chatbot_theme?.powered_by_visibility&&y(i?.data?.chatbot_theme?.powered_by_visibility),i?.data?.type&&U(i.data.type),"gpt_plus"!==i?.data?.type){if(!i.data.topics.length)return void H(!0);b(i.data.topics),1===i.data.topics.length?me(i.data.topics[0].name):x((e=>[...e,{message:Uo,type:"apiMessage"},{message:i.data.topics.map((e=>e.name)).join(","),type:"option"}])),ie()}u(!1),se()},le=(S((()=>{O()&&ae()}),[O()]),e=>{x((t=>[...t.map(((r,o)=>o===t.length-1?{...r,message:r.message+e}:r))]))}),ce=e=>{x((t=>[...t.map(((r,o)=>o===t.length-1?{...r,sourceDocuments:e}:r))]))},ue=(S((async()=>{if(!D()&&O()&&q().length){console.log("--------Creating Chain---------");try{await(({chatflowid:e,apiHost:t="http://localhost:3000",topic_id:r,session_id:o,tenantId:i})=>Le({method:"POST",url:t+`/api/v1/chatflow/${e}/create-chain/topic/${r}/session/`+o,tenantId:i}))({tenantId:e.tenantId,chatflowid:e.chatflowid,apiHost:e.apiHost,topic_id:q(),session_id:k()}),N(!0)}catch(e){N(!1)}}}),[O(),q()]),async t=>{if(c(t),""!==t.trim())if(O()){u(!0),se();const i=e.welcomeMessage??qo;if(w().filter((e=>e.message!==i)),x((e=>[...e,{message:t,type:"userMessage"}])),"API_BOT"===$().type){if(re((e=>({...e,[oe]:t}))),$()?.api_metadata?.parameter?.length){const r=be($());"string"==typeof r?x((e=>[...e,{message:r,type:"apiMessage"}])):V()&&V()?.length?await De({chatflowid:e.chatflowid,apiHost:e.apiHost,tenantId:e.tenantId,session_id:k(),userSessionId:O()?._id,topic_id:q(),body:{question:t,topic:$(),api_metadata:{input:te(),current_date:(new Date).toISOString()}}}):(x((e=>[...e,{message:`Could you share your question about ${$().name}?`,type:"apiMessage"}])),Y("Could you share your question about "))}else await De({chatflowid:e.chatflowid,apiHost:e.apiHost,tenantId:e.tenantId,session_id:k(),userSessionId:O()?._id,topic_id:q(),body:{question:t,topic:$(),api_metadata:{input:te(),current_date:(new Date).toISOString()}}});u(!1)}else{const i=await De({chatflowid:e.chatflowid,apiHost:e.apiHost,tenantId:e.tenantId,session_id:k(),userSessionId:O()?._id,topic_id:q(),body:{question:t,topic:$()}});if(i.data){const e=pe(i.data);"object"==typeof e&&e.text&&e.sourceDocuments?A()||x((t=>[...t,{message:e.text,sourceDocuments:e.sourceDocuments,type:"apiMessage"}])):A()||x((t=>[...t,{message:e,type:"apiMessage"}])),u(!1),c(""),se()}var r,o;i.error&&(r=i.error,console.error(r),r=r.response.data||r.response.status+": "+r.response.statusText,o=r,x((e=>[...e,{message:o,type:"apiMessage"}])),u(!1),c(""),se())}}else x((e=>[...e,{message:"Please make sure to fill in all the required fields to complete the process.",type:"apiMessage"}]))}),he=(S((()=>{w()&&se()})),S((()=>{e.fontSize&&i&&(i.style.fontSize=e.fontSize+"px")})),S((async()=>{let t;return k().length||(E({isStreaming:!0}.isStreaming),(t=ir(e.apiHost,{path:"/chat/stream"})).on("connect",(()=>{T(t.id)})),t.on("startChat",(()=>{z(!1),x((e=>[...e,{message:"",type:"apiMessage"}]))})),t.on("endChat",(()=>{z(!0)})),t.on("sourceDocuments",ce),t.on("message",le)),()=>{c(""),u(!1),x([{message:e.welcomeMessage??qo,type:"apiMessage"}]),t&&(t.disconnect(),T(""))}})),e=>{try{return new URL(e)}catch(e){}}),pe=e=>(e.sourceDocuments&&e.sourceDocuments[0].metadata.length&&(e.sourceDocuments=e.sourceDocuments.map((e=>{var t=e.metadata.reduce(((e,t)=>(e[t.name]=t.value,e)),{});return{pageContent:e.pageContent,metadata:t}}))),e),me=async e=>{var t=m().find((t=>t.name===e));if(console.log("TOPIC==>",t),t){if(u(!0),x((t=>[...t,{message:e,type:"userMessage"}])),se(),B(t),u(!1),se(),console.log(t,"@topic"),"API_BOT"===t?.type)if(Y(void 0),console.log("@topic-length",t),0<t?.api_metadata?.parameter?.length){const r=be(t);x("string"==typeof r?e=>[...e,{message:r,type:"apiMessage"}]:t=>[...t,{message:`Could you share your question about ${e}?`,type:"apiMessage"}])}else x((t=>[...t,{message:`Could you share your question about ${e}?`,type:"apiMessage"}]));else x((t=>[...t,{message:"Please post your query on : "+e,type:"apiMessage"}]));ee(e),K(t?.questions&&0!==t?.questions?.length?JSON.parse(t?.questions):[])}},be=e=>{e=e.api_metadata.parameter;for(const t of e)if(!te().hasOwnProperty(t.name)||typeof te()[t.name]!==t.type)return oe=t.name,t.user_query},ve=async()=>{await ae()};return S((()=>{console.log(G(),"Pre suggestion")})),S((()=>{console.log("QUESTION_TOPIC====>",w())})),[(()=>{const t=Oo(),s=t.firstChild,a=s.firstChild;var c;return"function"==typeof(c=("function"==typeof(c=i)?fe(c,t):i=t,ge(t,W(mo,{get avatar(){return e.header?.avatar},get backgroundColor(){return e.header?.backgroundColor},get textColor(){return e.header?.textColor},get subTitle(){return e.header?.subTitle},get title(){return e.header?.title},gotoTopic:ve,get isViewTopic(){return _((()=>!!$()))()&&Object.keys($()).length},onMax:()=>{"function"==typeof e.onMax&&e.onMax(),ie()},get isMax(){return e.isMax}}),s),r))?fe(c,a):r=a,a.style.setProperty("padding-bottom","160px"),ge(a,(()=>{const t=_((()=>!F()));return()=>t()?W(Q,{get each(){return[...w()]},children:(t,r)=>[_((()=>{const r=_((()=>"userMessage"===t.type));return()=>r()&&W(Er,{get message(){return t.message},get backgroundColor(){return e.userMessage?.backgroundColor},get textColor(){return e.userMessage?.textColor},get showAvatar(){return e.userMessage?.showAvatar},get avatarSrc(){return e.userMessage?.avatarSrc}})})()),_((()=>{const o=_((()=>"apiMessage"===t.type));return()=>o()&&[W(Pr,{get message(){return t.message},get backgroundColor(){return e.botMessage?.backgroundColor},get textColor(){return e.botMessage?.textColor},get showAvatar(){return e.botMessage?.showAvatar},get avatarSrc(){return e.botMessage?.avatarSrc}}),_((()=>{const o=_((()=>{return r=t.message,!(["Hello!","Hello!,","Hello!, What can I assist you with today?","Take your pick!  Select an option below to keep things rolling.",qo,Uo,e.welcomeMessage].includes(r)||r.startsWith("Please post your query on")||!t.message.length);var r}));return()=>o()?W(lo,{get backgroundColor(){return e.header?.backgroundColor??"#3b81f6"},get textColor(){return e.header?.textColor??"#fff"},onSubmitReview:({rating:t,feedback:o})=>{var i=r();(async({apiHost:e="http://localhost:3000",tenantId:t,...r})=>{Le({method:"POST",url:e+"/api/v1/review",tenantId:t,body:r})})(t={rating:t,feedback:o,apiHost:e.apiHost,chatflow_id:e.chatflowid,topic_id:$()._id,question:w()[i-1].message,answer:w()[i].message,tenantId:e.tenantId,user_email:O().email})},get messageIndex(){return r()}}):Mo()})())]})()),_((()=>{const r=_((()=>"option"===t.type));return()=>{return r()&&(ge(o=Io(),W(Q,{get each(){return[...t.message.split(",")]},children:t=>W(Jr,{topic_name:t,get backgroundColor(){return e.header?.backgroundColor},get textColor(){return e.header?.textColor},get borderColor(){return e.header?.backgroundColor},onOptionClick:()=>me(t)})})),o);var o}})()),_((()=>{const e=_((()=>!!(!m().length&&"gpt_plus"!==q()&&O()||"userMessage"===t.type&&d()&&r()===w().length-1)));return()=>e()?W(qr,{}):null})()),_((()=>{const e=_((()=>!(!t.sourceDocuments||!t.sourceDocuments.length)));return()=>{return e()&&((r=jo()).style.setProperty("display","flex"),r.style.setProperty("flex-direction","row"),r.style.setProperty("width","100%"),ge(r,W(Q,{get each(){return[...(e=>{const t=[],r=[];return(e=pe(e)).sourceDocuments.forEach((e=>{he(e.metadata.source)&&!t.includes(e.metadata.source)?(t.push(e.metadata.source),r.push(e)):he(e.metadata.source)||r.push(e)})),r})(t)]},children:e=>{const t=he(e.metadata.source);return W(uo,{get pageContent(){return t?t.pathname:e.pageContent},get metadata(){return e.metadata},onSourceClick:()=>{t?window.open(e.metadata.source,"_blank"):(g(e),p(!0))}})}})),r);var r}})()),_((()=>{const o=_((()=>!("apiMessage"!==t.type||!t.message.includes("Please post your query on : "+X())||r()!==w().length-1||!J()?.length)));return()=>{return o()&&(ge(t=Io(),W(Q,{get each(){return J()},children:t=>W($o,{pre_question:t,get backgroundColor(){return e.header?.backgroundColor},get textColor(){return e.header?.textColor},get borderColor(){return e.header?.backgroundColor},onOptionClick:()=>ue(t)})})),t);var t}})())]}):zo()})(),null),ge(a,(()=>{const t=_((()=>!(O()||I())));return()=>t()?W(Wr,{get formFields(){return e?.loginPrompt??[{field_name:"Email",is_required:!0}]},onSubmit:ne,get backgroundColor(){return e.botMessage?.backgroundColor},get textColor(){return e.botMessage?.textColor},get submitButtonBackground(){return e.header?.backgroundColor},get submitButtonTextColor(){return e.header?.textColor}}):null})(),null),ge(s,W(Z,{get when(){return _((()=>!(!D()||!O())))()&&!F()},get children(){return[W(Z,{when:!1,get children(){var e=Bo();return ge(e,(()=>G().slice(0,4).slice(n()?0:2)?.map((e=>{{const t=Do();return t.$$click=()=>ue(e),ge(t,e),R((()=>de(t,`px-3 py-3 text-xs ${n()?"w-[45%]":"w-full"}  bg-slate-100 rounded-md cursor-pointer h-14 overflow-hidden text-ellipsis flex items-center`))),t}})))),e}}),W(Po,{get backgroundColor(){return e.textInput?.backgroundColor},get textColor(){return e.textInput?.textColor},get placeholder(){return e.textInput?.placeholder},get sendButtonColor(){return e.textInput?.sendButtonColor},get fontSize(){return e.fontSize},get defaultValue(){return l()},onSubmit:ue,get apiHost(){return e.apiHost},get tenantId(){return e.tenantId},get buttonTheme(){return{backgroundColor:e.header?.backgroundColor??"#3b81f6",textColor:e.header?.textColor??"#fff"}}})]}}),null),ge(t,W(ar,{get badgeBackgroundColor(){return e.badgeBackgroundColor},get poweredByTextColor(){return e.poweredByTextColor},botContainer:i,get visibility(){return v()}}),null),ge(t,W(Ho,{ref(e){"function"==typeof o?o(e):o=e}}),null),R((()=>de(t,"relative flex w-full h-full text-base overflow-hidden bg-cover bg-center flex-col items-center chatbot-container "+e.class))),t})(),_((()=>{const e=_((()=>!!h()));return()=>e()&&W(ze,{get isOpen(){return h()},get value(){return f()},onClose:()=>p(!1)})})())]},Ho=e=>{return t=No(),"function"==typeof(r=e.ref)?fe(r,t):e.ref=t,t;var t,r},Go=(le(["click"]),ae("<style>")),Wo=ae('<div part="bot" id="chatgenius-bot-container">'),Vo=e=>{const[t]=X(e,["theme"]),[r,o]=C(!1),[i,n]=C(!1),[s,a]=C(!1);var l;return[(ge(l=Go(),Te),l),W(Oe,K((()=>t.theme?.button),{toggleBot:()=>{r()?o(!1):(i()||n(!0),o(!0))},get isBotOpened(){return r()}})),(()=>{const o=Wo();return o.style.setProperty("transition","transform 200ms cubic-bezier(0, 1.2, 1, 1), opacity 150ms ease-out"),o.style.setProperty("transform-origin","bottom right"),o.style.setProperty("box-shadow","rgb(0 0 0 / 16%) 0px 5px 40px"),o.style.setProperty("z-index","42424242"),ge(o,W(Z,{get when(){return i()},get children(){return W(Fo,{get badgeBackgroundColor(){return t.theme?.chatWindow?.backgroundColor},get welcomeMessage(){return t.theme?.chatWindow?.welcomeMessage},get poweredByTextColor(){return t.theme?.chatWindow?.poweredByTextColor},get textInput(){return t.theme?.chatWindow?.textInput},get botMessage(){return t.theme?.chatWindow?.botMessage},get userMessage(){return t.theme?.chatWindow?.userMessage},get fontSize(){return t.theme?.chatWindow?.fontSize},get chatflowid(){return e.chatflowid},get chatflowConfig(){return e.chatflowConfig},get tenantId(){return e.tenantId},get apiHost(){return e.apiHost},get header(){return e.theme?.header},get loginPrompt(){return e.theme?.loginPrompt??e.theme?.login_prompt},get poweredByVisibility(){return e.theme?.poweredByVisibility},onMax:()=>{a(!s())},get isMax(){return s()}})}})),R((i=>{var n=t.theme?.chatWindow?.height?t.theme?.chatWindow?.height.toString()+"px":"calc(100% - 100px)",a=s()?"90%":t.theme?.chatWindow?.width?t.theme?.chatWindow?.width.toString()+"px":600<window.innerWidth?"400px":"100%",l=r()?"scale3d(1, 1, 1)":"scale3d(0, 0, 1)",c=t.theme?.chatWindow?.backgroundColor||"#ffffff",d="fixed sm:right-5 rounded-lg "+(s()?"w-[90%] xs:w-full":"w-full sm:w-[400px] max-h-[704px]")+(r()?" opacity-1":" opacity-0 pointer-events-none")+("large"===e.theme?.button?.size?" bottom-24":" bottom-20");return n!==i._v$&&(null!=(i._v$=n)?o.style.setProperty("height",n):o.style.removeProperty("height")),a!==i._v$2&&(null!=(i._v$2=a)?o.style.setProperty("width",a):o.style.removeProperty("width")),l!==i._v$3&&(null!=(i._v$3=l)?o.style.setProperty("transform",l):o.style.removeProperty("transform")),c!==i._v$4&&(null!=(i._v$4=c)?o.style.setProperty("background-color",c):o.style.removeProperty("background-color")),d!==i._v$5&&de(o,i._v$5=d),i}),{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0}),o})()]},Yo=ae("<style>"),Jo=ae("<div>"),Ko=(e,{element:t})=>{const[r,o]=C(!1),i=new IntersectionObserver((e=>{e.some((e=>e.isIntersecting))&&o(!0)}));return P((()=>{i.observe(t)})),L((()=>{i.disconnect()})),[(ge(n=Yo(),Te),n),W(Z,{get when(){return r()},get children(){const t=Jo();return t.style.setProperty("margin","0px"),ge(t,W(Fo,{get badgeBackgroundColor(){return e.theme?.chatWindow?.backgroundColor},get welcomeMessage(){return e.theme?.chatWindow?.welcomeMessage},get poweredByTextColor(){return e.theme?.chatWindow?.poweredByTextColor},get textInput(){return e.theme?.chatWindow?.textInput},get botMessage(){return e.theme?.chatWindow?.botMessage},get userMessage(){return e.theme?.chatWindow?.userMessage},get fontSize(){return e.theme?.chatWindow?.fontSize},get chatflowid(){return e.chatflowid},get tenantId(){return e.tenantId},get chatflowConfig(){return e.chatflowConfig},get apiHost(){return e.apiHost},get loginPrompt(){return e.loginPrompt},get poweredByVisibility(){return e.theme?.poweredByVisibility},get header(){return e?.theme?.header}})),R((r=>{var o=e.theme?.chatWindow?.backgroundColor||"#ffffff",i=e.theme?.chatWindow?.height?e.theme?.chatWindow?.height.toString()+"px":"100vh",n=e.theme?.chatWindow?.width?e.theme?.chatWindow?.width.toString()+"px":"100%";return o!==r._v$&&(null!=(r._v$=o)?t.style.setProperty("background-color",o):t.style.removeProperty("background-color")),i!==r._v$2&&(null!=(r._v$2=i)?t.style.setProperty("height",i):t.style.removeProperty("height")),n!==r._v$3&&(null!=(r._v$3=n)?t.style.setProperty("width",n):t.style.removeProperty("width")),r}),{_v$:void 0,_v$2:void 0,_v$3:void 0}),t}})];var n},Xo=e=>{var t=e.id?document.getElementById(e.id):document.querySelector("chatgenius-fullchatbot");if(!t)throw new Error("<chatgenius-fullchatbot> element not found.");Object.assign(t,e)},Qo=e=>{var t=document.createElement("chatgenius-chatbot");Object.assign(t,e),document.body.appendChild(t)},Zo=("undefined"!=typeof window&&(Re("chatgenius-fullchatbot",Se,Ko),Re("chatgenius-chatbot",Se,Vo)),{initFull:Xo,init:Qo});(e=>{"undefined"!=typeof window&&(window.Chatbot={...e})})(Zo);export{Zo as default};
